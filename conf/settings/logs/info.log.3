2025-06-04 11:02:11,251 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 11:02:25,168 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 11:13:50,060 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x7466fc6d9be0>> raised: FieldDoesNotExist("ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 662, in get_field
    return self._forward_fields_map[field_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'is_active'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 116, in populate
    app_config.import_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/config.py", line 269, in import_models
    self.models_module = import_module(models_module_name)
                         ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/products/product_image/models.py", line 24, in <module>
    class ProductImage(BaseModel):
    ...<42 lines>...
            super().delete(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 365, in __new__
    new_class._prepare()
    ~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 426, in _prepare
    index.set_name_with_model(cls)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/indexes.py", line 168, in set_name_with_model
    model._meta.get_field(field_name).column
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 667, in get_field
    raise FieldDoesNotExist(
    ...<3 lines>...
    )
django.core.exceptions.FieldDoesNotExist: ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.
2025-06-04 11:13:50,158 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7466fc6d0190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7466fc6d92b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 11:13:51,883 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x79b449a65be0>> raised: FieldDoesNotExist("ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 662, in get_field
    return self._forward_fields_map[field_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'is_active'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 116, in populate
    app_config.import_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/config.py", line 269, in import_models
    self.models_module = import_module(models_module_name)
                         ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/products/product_image/models.py", line 24, in <module>
    class ProductImage(BaseModel):
    ...<42 lines>...
            super().delete(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 365, in __new__
    new_class._prepare()
    ~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 426, in _prepare
    index.set_name_with_model(cls)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/indexes.py", line 168, in set_name_with_model
    model._meta.get_field(field_name).column
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 667, in get_field
    raise FieldDoesNotExist(
    ...<3 lines>...
    )
django.core.exceptions.FieldDoesNotExist: ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.
2025-06-04 11:13:51,945 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x79b449a5c190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x79b449a652b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 11:20:42,002 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x713c68119be0>> raised: FieldDoesNotExist("ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 662, in get_field
    return self._forward_fields_map[field_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'is_active'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 116, in populate
    app_config.import_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/config.py", line 269, in import_models
    self.models_module = import_module(models_module_name)
                         ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/products/product_image/models.py", line 24, in <module>
    class ProductImage(BaseModel):
    ...<42 lines>...
            super().delete(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 365, in __new__
    new_class._prepare()
    ~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 426, in _prepare
    index.set_name_with_model(cls)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/indexes.py", line 168, in set_name_with_model
    model._meta.get_field(field_name).column
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 667, in get_field
    raise FieldDoesNotExist(
    ...<3 lines>...
    )
django.core.exceptions.FieldDoesNotExist: ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.
2025-06-04 11:20:42,137 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x713c68110190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x713c681192b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 11:20:43,936 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x77bbd7185be0>> raised: FieldDoesNotExist("ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 662, in get_field
    return self._forward_fields_map[field_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'is_active'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 116, in populate
    app_config.import_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/config.py", line 269, in import_models
    self.models_module = import_module(models_module_name)
                         ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/products/product_image/models.py", line 24, in <module>
    class ProductImage(BaseModel):
    ...<42 lines>...
            super().delete(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 365, in __new__
    new_class._prepare()
    ~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 426, in _prepare
    index.set_name_with_model(cls)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/indexes.py", line 168, in set_name_with_model
    model._meta.get_field(field_name).column
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 667, in get_field
    raise FieldDoesNotExist(
    ...<3 lines>...
    )
django.core.exceptions.FieldDoesNotExist: ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.
2025-06-04 11:20:44,059 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x77bbd717c190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x77bbd71852b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 11:22:58,985 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x7606bba2dbe0>> raised: FieldDoesNotExist("ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 662, in get_field
    return self._forward_fields_map[field_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'is_active'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 116, in populate
    app_config.import_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/config.py", line 269, in import_models
    self.models_module = import_module(models_module_name)
                         ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/products/product_image/models.py", line 24, in <module>
    class ProductImage(BaseModel):
    ...<42 lines>...
            super().delete(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 365, in __new__
    new_class._prepare()
    ~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 426, in _prepare
    index.set_name_with_model(cls)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/indexes.py", line 168, in set_name_with_model
    model._meta.get_field(field_name).column
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 667, in get_field
    raise FieldDoesNotExist(
    ...<3 lines>...
    )
django.core.exceptions.FieldDoesNotExist: ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.
2025-06-04 11:22:59,038 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7606bba24190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7606bba2d2b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 11:22:59,859 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x7d52d8ae9be0>> raised: FieldDoesNotExist("ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 662, in get_field
    return self._forward_fields_map[field_name]
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'is_active'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 116, in populate
    app_config.import_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/config.py", line 269, in import_models
    self.models_module = import_module(models_module_name)
                         ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/products/product_image/models.py", line 24, in <module>
    class ProductImage(BaseModel):
    ...<42 lines>...
            super().delete(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 365, in __new__
    new_class._prepare()
    ~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 426, in _prepare
    index.set_name_with_model(cls)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/indexes.py", line 168, in set_name_with_model
    model._meta.get_field(field_name).column
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/options.py", line 667, in get_field
    raise FieldDoesNotExist(
    ...<3 lines>...
    )
django.core.exceptions.FieldDoesNotExist: ProductImage has no field named 'is_active'. The app cache isn't ready yet, so if this is an auto-created related field, it won't be available yet.
2025-06-04 11:22:59,913 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7d52d8ae0190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7d52d8ae92b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 11:28:04,136 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x77cef560dbe0>> raised: ModuleNotFoundError("No module named 'apps.products.services'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 124, in populate
    app_config.ready()
    ~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/transactions/apps.py", line 9, in ready
    import apps.transactions.signals  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/signals.py", line 8, in <module>
    from apps.transactions.tasks.transitions_tasks import (
    ...<2 lines>...
    )
  File "/workspaces/apps/transactions/tasks/transitions_tasks.py", line 9, in <module>
    from apps.products.services.inventory import InventoryService
ModuleNotFoundError: No module named 'apps.products.services'
2025-06-04 11:28:04,161 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x77cef5604190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x77cef560d2b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 11:28:04,433 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x7f4f1db69be0>> raised: ModuleNotFoundError("No module named 'apps.products.services'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 124, in populate
    app_config.ready()
    ~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/transactions/apps.py", line 9, in ready
    import apps.transactions.signals  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/signals.py", line 8, in <module>
    from apps.transactions.tasks.transitions_tasks import (
    ...<2 lines>...
    )
  File "/workspaces/apps/transactions/tasks/transitions_tasks.py", line 9, in <module>
    from apps.products.services.inventory import InventoryService
ModuleNotFoundError: No module named 'apps.products.services'
2025-06-04 11:28:04,452 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7f4f1db60190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7f4f1db692b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 11:29:30,132 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x7a80c57edbe0>> raised: ModuleNotFoundError("No module named 'apps.products.services'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 124, in populate
    app_config.ready()
    ~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/transactions/apps.py", line 9, in ready
    import apps.transactions.signals  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/signals.py", line 8, in <module>
    from apps.transactions.tasks.transitions_tasks import (
    ...<2 lines>...
    )
  File "/workspaces/apps/transactions/tasks/transitions_tasks.py", line 9, in <module>
    from apps.products.services.inventory import InventoryService
ModuleNotFoundError: No module named 'apps.products.services'
2025-06-04 11:29:30,173 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7a80c57e4190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7a80c57ed2b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 11:29:30,180 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x7cd721411be0>> raised: ModuleNotFoundError("No module named 'apps.products.services'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 124, in populate
    app_config.ready()
    ~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/transactions/apps.py", line 9, in ready
    import apps.transactions.signals  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/signals.py", line 8, in <module>
    from apps.transactions.tasks.transitions_tasks import (
    ...<2 lines>...
    )
  File "/workspaces/apps/transactions/tasks/transitions_tasks.py", line 9, in <module>
    from apps.products.services.inventory import InventoryService
ModuleNotFoundError: No module named 'apps.products.services'
2025-06-04 11:29:30,205 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7cd721408190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7cd7214112b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 14:09:29,386 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x7a1d490d9be0>> raised: ModuleNotFoundError("No module named 'apps.products.services'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 124, in populate
    app_config.ready()
    ~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/transactions/apps.py", line 9, in ready
    import apps.transactions.signals  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/signals.py", line 8, in <module>
    from apps.transactions.tasks.transitions_tasks import (
    ...<2 lines>...
    )
  File "/workspaces/apps/transactions/tasks/transitions_tasks.py", line 9, in <module>
    from apps.products.services.inventory import InventoryService
ModuleNotFoundError: No module named 'apps.products.services'
2025-06-04 14:09:29,404 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7a1d490d0190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7a1d490d92b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 14:09:29,546 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x7684162e1be0>> raised: ModuleNotFoundError("No module named 'apps.products.services'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 124, in populate
    app_config.ready()
    ~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/transactions/apps.py", line 9, in ready
    import apps.transactions.signals  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/signals.py", line 8, in <module>
    from apps.transactions.tasks.transitions_tasks import (
    ...<2 lines>...
    )
  File "/workspaces/apps/transactions/tasks/transitions_tasks.py", line 9, in <module>
    from apps.products.services.inventory import InventoryService
ModuleNotFoundError: No module named 'apps.products.services'
2025-06-04 14:09:29,562 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7684162d8190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7684162e12b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 19:23:49,078 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x718a65575be0>> raised: ModuleNotFoundError("No module named 'apps.products.services'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 124, in populate
    app_config.ready()
    ~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/transactions/apps.py", line 9, in ready
    import apps.transactions.signals  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/signals.py", line 8, in <module>
    from apps.transactions.tasks.transitions_tasks import (
    ...<2 lines>...
    )
  File "/workspaces/apps/transactions/tasks/transitions_tasks.py", line 9, in <module>
    from apps.products.services.inventory import InventoryService
ModuleNotFoundError: No module named 'apps.products.services'
2025-06-04 19:23:49,085 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x718a6556c190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x718a655752b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 19:23:49,128 celery.utils.dispatch.signal ERROR    Signal handler <bound method DjangoFixup.on_import_modules of <celery.fixups.django.DjangoFixup object at 0x703b80bc5be0>> raised: ModuleNotFoundError("No module named 'apps.products.services'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 100, in on_import_modules
    self.worker_fixup.validate_models()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 138, in validate_models
    self.django_setup()
    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/fixups/django.py", line 134, in django_setup
    django.setup()
    ~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/__init__.py", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/apps/registry.py", line 124, in populate
    app_config.ready()
    ~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/transactions/apps.py", line 9, in ready
    import apps.transactions.signals  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/signals.py", line 8, in <module>
    from apps.transactions.tasks.transitions_tasks import (
    ...<2 lines>...
    )
  File "/workspaces/apps/transactions/tasks/transitions_tasks.py", line 9, in <module>
    from apps.products.services.inventory import InventoryService
ModuleNotFoundError: No module named 'apps.products.services'
2025-06-04 19:23:49,136 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x703b80bbc190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x703b80bc52b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 19:24:58,221 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:25:30,935 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:26:54,696 django.utils.autoreload INFO     /workspaces/apps/transactions/tasks/transitions_tasks.py changed, reloading.
2025-06-04 19:26:57,398 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:28:43,107 django.utils.autoreload INFO     /workspaces/apps/auth/google/views.py changed, reloading.
2025-06-04 19:28:46,213 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:29:05,306 django.utils.autoreload INFO     /workspaces/apps/auth/traditional/views.py changed, reloading.
2025-06-04 19:29:07,036 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:30:04,595 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-04 19:30:06,281 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:30:21,767 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-04 19:30:23,252 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:30:54,643 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-04 19:30:58,196 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:31:48,287 django.utils.autoreload INFO     /workspaces/apps/categories/services.py changed, reloading.
2025-06-04 19:31:52,482 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:33:10,837 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 19:33:12,793 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:35:57,687 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-04 19:35:59,421 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:36:18,926 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 19:36:23,754 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:37:56,953 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:43:43,710 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-04 19:43:48,349 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:44:20,810 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/views.py changed, reloading.
2025-06-04 19:44:22,502 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 19:48:52,333 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/services.py changed, reloading.
2025-06-04 19:48:57,775 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:07:00,752 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 20:07:02,818 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:09:17,244 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-04 20:09:19,176 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:10:42,198 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/tasks.py changed, reloading.
2025-06-04 20:10:44,001 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:11:49,616 django.utils.autoreload INFO     /workspaces/apps/products/product_base/utils/product_filters.py changed, reloading.
2025-06-04 20:11:51,239 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:15:35,495 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/serializers.py changed, reloading.
2025-06-04 20:15:36,964 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:16:04,088 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/serializers.py changed, reloading.
2025-06-04 20:16:05,745 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:16:25,559 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/services.py changed, reloading.
2025-06-04 20:16:27,149 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:16:53,338 django.utils.autoreload INFO     /workspaces/apps/products/product_variant/services.py changed, reloading.
2025-06-04 20:16:55,206 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:17:02,880 django.utils.autoreload INFO     /workspaces/apps/products/product_variant/services.py changed, reloading.
2025-06-04 20:17:04,357 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:17:26,326 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-04 20:17:28,576 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:17:57,133 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-04 20:18:01,296 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:18:11,103 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-04 20:18:13,450 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:27:37,291 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-04 20:27:46,095 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:31:49,232 django.utils.autoreload INFO     /workspaces/apps/products/product_metadata/urls.py changed, reloading.
2025-06-04 20:31:53,470 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:35:22,538 django.utils.autoreload INFO     /workspaces/apps/products/product_negotiation/urls.py changed, reloading.
2025-06-04 20:35:25,170 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:36:21,256 django.utils.autoreload INFO     /workspaces/apps/products/product_variant/urls.py changed, reloading.
2025-06-04 20:36:22,955 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:38:16,662 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/models.py changed, reloading.
2025-06-04 20:38:18,588 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:40:20,608 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-04 20:40:29,361 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:42:28,824 django.utils.autoreload INFO     /workspaces/apps/products/product_variant/models.py changed, reloading.
2025-06-04 20:42:32,586 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:45:02,989 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:45:55,458 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:46:43,960 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:47:19,690 django.utils.autoreload INFO     /workspaces/apps/products/product_variant/models.py changed, reloading.
2025-06-04 20:47:21,698 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:47:55,092 django.utils.autoreload INFO     /workspaces/apps/products/product_image/models.py changed, reloading.
2025-06-04 20:47:56,982 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:49:17,313 django.utils.autoreload INFO     /workspaces/apps/products/product_image/models.py changed, reloading.
2025-06-04 20:49:19,122 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:49:43,507 django.utils.autoreload INFO     /workspaces/apps/products/product_metadata/models.py changed, reloading.
2025-06-04 20:49:45,261 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:50:27,269 django.utils.autoreload INFO     /workspaces/apps/products/product_rating/models.py changed, reloading.
2025-06-04 20:50:31,028 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:51:28,554 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-04 20:51:30,355 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 20:59:57,591 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-04 21:00:01,174 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:00:36,200 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-04 21:00:40,172 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:01:29,841 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:02:34,111 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:05:01,729 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:05:49,899 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/migrations/0002_add_performance_indexes.py changed, reloading.
2025-06-04 21:05:53,276 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:06:41,195 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-04 21:06:47,107 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:10:14,462 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/migrations/0002_add_performance_indexes.py changed, reloading.
2025-06-04 21:10:17,507 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:11:04,042 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/migrations/0002_add_performance_indexes.py changed, reloading.
2025-06-04 21:11:07,276 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:11:18,345 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/migrations/0002_add_performance_indexes.py changed, reloading.
2025-06-04 21:11:21,765 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:12:43,666 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:13:18,339 django.request ERROR    Internal Server Error: /api/v1/users/profiles/
2025-06-04 21:13:30,436 django.request WARNING  Not Found: /api/v1/dd
2025-06-04 21:13:51,995 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-04 21:18:15,624 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 21:18:17,894 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:20:05,159 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-04 21:20:09,856 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:21:30,866 django.utils.autoreload INFO     /workspaces/apps/core/serializers.py changed, reloading.
2025-06-04 21:21:33,762 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:21:56,205 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/serializers.py changed, reloading.
2025-06-04 21:22:04,792 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:22:45,518 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-04 21:22:47,448 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:22:54,983 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-04 21:23:04,026 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:27:56,709 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 21:28:01,418 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:28:06,518 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-04 21:28:09,136 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:28:13,068 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-04 21:28:16,154 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:28:59,431 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 21:29:06,149 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:29:50,982 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 21:29:57,746 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:30:27,995 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 21:30:32,659 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:30:56,439 django.utils.autoreload INFO     /workspaces/apps/products/utils/rate_limiting.py changed, reloading.
2025-06-04 21:30:59,392 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:31:22,518 django.utils.autoreload INFO     /workspaces/apps/products/services/product_stats_service.py changed, reloading.
2025-06-04 21:31:26,134 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:33:45,766 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 21:33:49,095 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:43:44,801 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 21:43:56,983 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:45:41,885 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-04 21:45:50,685 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:50:27,107 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_featured_service.py changed, reloading.
2025-06-04 21:50:29,554 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 21:50:43,541 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_my_service.py changed, reloading.
2025-06-04 21:55:53,596 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x76cd781c0190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x76cd781c92b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 21:55:53,693 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x79df8db40190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x79df8db492b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-04 22:32:30,940 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 22:33:56,083 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-04 22:33:58,896 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 22:34:26,491 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/models.py changed, reloading.
2025-06-04 22:34:28,891 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 22:35:04,173 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-04 22:35:14,546 django.request WARNING  Not Found: /api/v1/dd
2025-06-04 22:35:16,304 django.request WARNING  Not Found: /api/v1/dd
2025-06-04 22:35:53,364 django.utils.autoreload INFO     /workspaces/conf/urls.py changed, reloading.
2025-06-04 22:35:56,240 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 22:36:01,379 django.request WARNING  Not Found: /api/v1/dd
2025-06-04 22:38:06,835 django.utils.autoreload INFO     /workspaces/apps/products/product_image/urls.py changed, reloading.
2025-06-04 22:38:09,699 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 22:38:17,486 django.request WARNING  Not Found: /api/v1/dd
2025-06-04 22:39:01,384 django.utils.autoreload INFO     /workspaces/apps/products/product_image/urls.py changed, reloading.
2025-06-04 22:39:04,776 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 22:39:41,423 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/urls.py changed, reloading.
2025-06-04 22:39:44,749 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-04 22:39:54,726 django.request WARNING  Not Found: /api/v1/dd
2025-06-05 09:06:09,822 django.request WARNING  Method Not Allowed: /api/v1/auth/logout/
2025-06-05 09:06:32,497 django.request WARNING  Unauthorized: /api/v1/auth/login/
2025-06-05 09:07:00,533 django.request WARNING  Unauthorized: /api/v1/auth/login/
2025-06-05 09:07:08,278 django.request WARNING  Unauthorized: /api/v1/auth/login/
2025-06-05 09:07:56,515 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/urls.py changed, reloading.
2025-06-05 09:08:06,859 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:09:17,374 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 09:12:00,532 django.request WARNING  Not Found: /api/v1/dd
2025-06-05 09:14:07,193 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/services.py changed, reloading.
2025-06-05 09:14:16,130 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:15:31,277 django.utils.autoreload INFO     /workspaces/apps/products/product_variant/services.py changed, reloading.
2025-06-05 09:15:33,311 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:16:19,289 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/services.py changed, reloading.
2025-06-05 09:16:25,485 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:16:52,077 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/services.py changed, reloading.
2025-06-05 09:16:54,690 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:18:11,947 django.utils.autoreload INFO     /workspaces/apps/products/product_rating/services.py changed, reloading.
2025-06-05 09:18:14,862 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:19:38,433 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-05 09:19:40,908 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:20:20,348 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/services.py changed, reloading.
2025-06-05 09:20:22,645 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:22:43,370 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/services.py changed, reloading.
2025-06-05 09:22:45,586 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:23:40,207 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/services.py changed, reloading.
2025-06-05 09:23:44,476 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:24:09,678 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/services.py changed, reloading.
2025-06-05 09:24:13,670 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:24:28,575 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/services.py changed, reloading.
2025-06-05 09:24:30,910 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:28:57,788 django.utils.autoreload INFO     /workspaces/apps/products/product_variant/services.py changed, reloading.
2025-06-05 09:29:00,335 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:30:28,459 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-05 09:30:30,463 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:31:37,335 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-05 09:31:39,167 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:32:17,292 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-05 09:32:19,995 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:32:34,258 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_featured_service.py changed, reloading.
2025-06-05 09:32:39,791 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:32:44,481 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_my_service.py changed, reloading.
2025-06-05 09:32:47,562 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:32:51,993 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_share_service.py changed, reloading.
2025-06-05 09:32:54,791 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:33:07,075 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_toggle_service.py changed, reloading.
2025-06-05 09:33:13,523 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:33:27,075 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_watchers_service.py changed, reloading.
2025-06-05 09:33:29,796 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:35:51,801 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/services.py changed, reloading.
2025-06-05 09:35:53,460 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:47:41,171 django.utils.autoreload INFO     /workspaces/apps/core/views.py changed, reloading.
2025-06-05 09:47:42,953 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:56:38,112 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 09:56:40,269 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 09:56:45,871 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 09:56:47,874 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:14:29,283 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/services.py changed, reloading.
2025-06-05 10:14:31,038 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:25:39,331 django.utils.autoreload INFO     /workspaces/apps/core/utils/cache_key_manager.py changed, reloading.
2025-06-05 10:25:42,631 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:26:01,022 django.utils.autoreload INFO     /workspaces/apps/core/utils/cache_manager.py changed, reloading.
2025-06-05 10:26:03,652 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:27:53,689 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/services.py changed, reloading.
2025-06-05 10:27:56,969 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:29:10,215 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-05 10:29:13,471 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:42:15,853 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/models.py changed, reloading.
2025-06-05 10:42:18,134 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:42:37,900 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-05 10:42:41,095 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:44:55,087 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 10:45:08,782 django.request WARNING  Not Found: /api/v1/brand/
2025-06-05 10:45:34,424 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/deprecation.py", line 131, in __call__
    response = self.process_response(request, response)
  File "/workspaces/apps/monitoring/middleware.py", line 29, in process_response
    if duration > settings.SLOW_REQUEST_THRESHOLD_SEC:
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/conf/__init__.py", line 83, in __getattr__
    val = getattr(_wrapped, name)
AttributeError: 'Settings' object has no attribute 'SLOW_REQUEST_THRESHOLD_SEC'
2025-06-05 10:47:25,667 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-05 10:47:27,148 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:47:35,040 django.request ERROR    Internal Server Error: /api/v1/brands/
2025-06-05 10:53:58,387 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 10:54:00,366 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:54:07,173 django.request ERROR    Internal Server Error: /api/v1/brands/
2025-06-05 10:54:10,841 django.request ERROR    Internal Server Error: /api/v1/brands/
2025-06-05 10:54:23,931 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/managers.py changed, reloading.
2025-06-05 10:54:26,752 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 10:54:33,210 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/apps/products/product_brand/views.py", line 107, in handle_exception
    return super().handle_exception(exc)
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 186, in list
    return cached_view(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 156, in _list_logic
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_brand/views.py", line 115, in get_queryset
    return queryset.with_stats().select_related()
           ~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_brand/managers.py", line 79, in with_stats
    return self.with_product_stats()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_brand/managers.py", line 28, in with_product_stats
    ).annotate(
      ~~~~~~~~^
        active_product_count=Count("products", filter=Q(products__is_active=True)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        ),
        ^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^
        annotation,
        ^^^^^^^^^^^
        alias,
        ^^^^^^
        select=select,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 1073, in resolve_expression
    c.source_expressions[pos] = arg.resolve_expression(
                                ~~~~~~~~~~~~~~~~~~~~~~^
        query, allow_joins, reuse, summarize, for_save
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 2026, in resolve_ref
    transform = join_info.transform_function(targets[0], final_alias)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1886, in transform
    return self.try_transform(wrapped, name)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1423, in try_transform
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Unsupported lookup 'average_rating' for UUIDField or join on the field not permitted.
2025-06-05 11:03:22,936 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/managers.py changed, reloading.
2025-06-05 11:03:24,830 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:03:29,692 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/managers.py changed, reloading.
2025-06-05 11:03:31,839 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:03:39,246 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 11:03:42,893 apps.core.throttle WARNING  Rate limit exceeded for brand_create: key=throttle_brand_create_b61e73b1-a1ed-48f0-99ec-b7164b63f2fb_general, requests=5, limit=5, window=3600s
2025-06-05 11:03:42,933 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 503, in dispatch
    self.initial(request, *args, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 422, in initial
    self.check_throttles(request)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 377, in check_throttles
    self.throttled(request, duration)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 187, in throttled
    raise exceptions.Throttled(wait)
rest_framework.exceptions.Throttled: Request was throttled. Expected available in 2512 seconds.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/apps/products/product_brand/views.py", line 106, in handle_exception
    raise ThrottledException(wait=exc.wait, scope=scope)
apps.core.throttle.ThrottledException: Request rate limit exceeded. Please wait before trying again. Expected available in 2512 seconds.
2025-06-05 11:03:58,252 apps.core.throttle WARNING  Rate limit exceeded for brand_create: key=throttle_brand_create_b61e73b1-a1ed-48f0-99ec-b7164b63f2fb_general, requests=5, limit=5, window=3600s
2025-06-05 11:03:58,295 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 503, in dispatch
    self.initial(request, *args, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 422, in initial
    self.check_throttles(request)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 377, in check_throttles
    self.throttled(request, duration)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 187, in throttled
    raise exceptions.Throttled(wait)
rest_framework.exceptions.Throttled: Request was throttled. Expected available in 2497 seconds.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/apps/products/product_brand/views.py", line 106, in handle_exception
    raise ThrottledException(wait=exc.wait, scope=scope)
apps.core.throttle.ThrottledException: Request rate limit exceeded. Please wait before trying again. Expected available in 2497 seconds.
2025-06-05 11:03:59,815 apps.core.throttle WARNING  Rate limit exceeded for brand_create: key=throttle_brand_create_b61e73b1-a1ed-48f0-99ec-b7164b63f2fb_general, requests=5, limit=5, window=3600s
2025-06-05 11:03:59,852 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 503, in dispatch
    self.initial(request, *args, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 422, in initial
    self.check_throttles(request)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 377, in check_throttles
    self.throttled(request, duration)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 187, in throttled
    raise exceptions.Throttled(wait)
rest_framework.exceptions.Throttled: Request was throttled. Expected available in 2495 seconds.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/apps/products/product_brand/views.py", line 106, in handle_exception
    raise ThrottledException(wait=exc.wait, scope=scope)
apps.core.throttle.ThrottledException: Request rate limit exceeded. Please wait before trying again. Expected available in 2495 seconds.
2025-06-05 11:04:00,982 apps.core.throttle WARNING  Rate limit exceeded for brand_create: key=throttle_brand_create_b61e73b1-a1ed-48f0-99ec-b7164b63f2fb_general, requests=5, limit=5, window=3600s
2025-06-05 11:04:01,021 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 503, in dispatch
    self.initial(request, *args, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 422, in initial
    self.check_throttles(request)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 377, in check_throttles
    self.throttled(request, duration)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 187, in throttled
    raise exceptions.Throttled(wait)
rest_framework.exceptions.Throttled: Request was throttled. Expected available in 2494 seconds.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/apps/products/product_brand/views.py", line 106, in handle_exception
    raise ThrottledException(wait=exc.wait, scope=scope)
apps.core.throttle.ThrottledException: Request rate limit exceeded. Please wait before trying again. Expected available in 2494 seconds.
2025-06-05 11:04:02,130 apps.core.throttle WARNING  Rate limit exceeded for brand_create: key=throttle_brand_create_b61e73b1-a1ed-48f0-99ec-b7164b63f2fb_general, requests=5, limit=5, window=3600s
2025-06-05 11:04:02,190 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 503, in dispatch
    self.initial(request, *args, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 422, in initial
    self.check_throttles(request)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 377, in check_throttles
    self.throttled(request, duration)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 187, in throttled
    raise exceptions.Throttled(wait)
rest_framework.exceptions.Throttled: Request was throttled. Expected available in 2493 seconds.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/apps/products/product_brand/views.py", line 106, in handle_exception
    raise ThrottledException(wait=exc.wait, scope=scope)
apps.core.throttle.ThrottledException: Request rate limit exceeded. Please wait before trying again. Expected available in 2493 seconds.
2025-06-05 11:04:03,135 apps.core.throttle WARNING  Rate limit exceeded for brand_create: key=throttle_brand_create_b61e73b1-a1ed-48f0-99ec-b7164b63f2fb_general, requests=5, limit=5, window=3600s
2025-06-05 11:04:03,178 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 503, in dispatch
    self.initial(request, *args, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 422, in initial
    self.check_throttles(request)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 377, in check_throttles
    self.throttled(request, duration)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 187, in throttled
    raise exceptions.Throttled(wait)
rest_framework.exceptions.Throttled: Request was throttled. Expected available in 2492 seconds.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/apps/products/product_brand/views.py", line 106, in handle_exception
    raise ThrottledException(wait=exc.wait, scope=scope)
apps.core.throttle.ThrottledException: Request rate limit exceeded. Please wait before trying again. Expected available in 2492 seconds.
2025-06-05 11:04:10,897 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-05 11:04:12,893 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:18:04,758 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-05 11:18:06,484 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:18:41,699 django.utils.autoreload INFO     /workspaces/apps/core/throttle.py changed, reloading.
2025-06-05 11:18:43,877 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:18:59,711 django.utils.autoreload INFO     /workspaces/apps/core/throttle.py changed, reloading.
2025-06-05 11:19:07,394 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:19:16,124 django.utils.autoreload INFO     /workspaces/apps/categories/views.py changed, reloading.
2025-06-05 11:19:19,213 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:20:37,098 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-05 11:20:43,182 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:21:10,160 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 11:21:13,091 apps.core.throttle WARNING  Rate limit exceeded for brand_create: key=throttle_brand_create_b61e73b1-a1ed-48f0-99ec-b7164b63f2fb_general, requests=5, limit=5, window=3600s
2025-06-05 11:21:13,150 django.request WARNING  Too Many Requests: /api/v1/brands/
2025-06-05 11:22:24,724 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-05 11:22:26,345 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:22:31,194 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 116, in render
    newretval = post_callback(retval)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 154, in callback
    return middleware.process_response(request, response)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/middleware/cache.py", line 125, in process_response
    response.add_post_render_callback(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        lambda r: self.cache.set(cache_key, r, timeout)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 101, in add_post_render_callback
    callback(self)
    ~~~~~~~~^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/middleware/cache.py", line 126, in <lambda>
    lambda r: self.cache.set(cache_key, r, timeout)
              ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/cache.py", line 29, in _decorator
    return method(self, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/cache.py", line 81, in set
    return self.client.set(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/client/default.py", line 143, in set
    nvalue = self.encode(value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/client/default.py", line 461, in encode
    value = self._serializer.dumps(value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/serializers/json.py", line 13, in dumps
    return json.dumps(value, cls=self.encoder_class).encode()
           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "/usr/local/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/serializers/json.py", line 106, in default
    return super().default(o)
           ~~~~~~~~~~~~~~~^^^
  File "/usr/local/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type Response is not JSON serializable
2025-06-05 11:30:53,599 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/serializers.py changed, reloading.
2025-06-05 11:30:55,922 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:31:03,118 django.request WARNING  Not Found: /api/v1/brand/
2025-06-05 11:31:04,316 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 116, in render
    newretval = post_callback(retval)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 154, in callback
    return middleware.process_response(request, response)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/middleware/cache.py", line 125, in process_response
    response.add_post_render_callback(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        lambda r: self.cache.set(cache_key, r, timeout)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 101, in add_post_render_callback
    callback(self)
    ~~~~~~~~^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/middleware/cache.py", line 126, in <lambda>
    lambda r: self.cache.set(cache_key, r, timeout)
              ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/cache.py", line 29, in _decorator
    return method(self, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/cache.py", line 81, in set
    return self.client.set(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/client/default.py", line 143, in set
    nvalue = self.encode(value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/client/default.py", line 461, in encode
    value = self._serializer.dumps(value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/serializers/json.py", line 13, in dumps
    return json.dumps(value, cls=self.encoder_class).encode()
           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "/usr/local/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/serializers/json.py", line 106, in default
    return super().default(o)
           ~~~~~~~~~~~~~~~^^^
  File "/usr/local/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type Response is not JSON serializable
2025-06-05 11:31:06,270 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 116, in render
    newretval = post_callback(retval)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 154, in callback
    return middleware.process_response(request, response)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/middleware/cache.py", line 125, in process_response
    response.add_post_render_callback(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        lambda r: self.cache.set(cache_key, r, timeout)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 101, in add_post_render_callback
    callback(self)
    ~~~~~~~~^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/middleware/cache.py", line 126, in <lambda>
    lambda r: self.cache.set(cache_key, r, timeout)
              ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/cache.py", line 29, in _decorator
    return method(self, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/cache.py", line 81, in set
    return self.client.set(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/client/default.py", line 143, in set
    nvalue = self.encode(value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/client/default.py", line 461, in encode
    value = self._serializer.dumps(value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/serializers/json.py", line 13, in dumps
    return json.dumps(value, cls=self.encoder_class).encode()
           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "/usr/local/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/serializers/json.py", line 106, in default
    return super().default(o)
           ~~~~~~~~~~~~~~~^^^
  File "/usr/local/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type Response is not JSON serializable
2025-06-05 11:31:07,869 django.request ERROR    Internal Server Error: /api/v1/brands/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 116, in render
    newretval = post_callback(retval)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 154, in callback
    return middleware.process_response(request, response)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/middleware/cache.py", line 125, in process_response
    response.add_post_render_callback(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        lambda r: self.cache.set(cache_key, r, timeout)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 101, in add_post_render_callback
    callback(self)
    ~~~~~~~~^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/middleware/cache.py", line 126, in <lambda>
    lambda r: self.cache.set(cache_key, r, timeout)
              ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/cache.py", line 29, in _decorator
    return method(self, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/cache.py", line 81, in set
    return self.client.set(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/client/default.py", line 143, in set
    nvalue = self.encode(value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/client/default.py", line 461, in encode
    value = self._serializer.dumps(value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django_redis/serializers/json.py", line 13, in dumps
    return json.dumps(value, cls=self.encoder_class).encode()
           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "/usr/local/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/serializers/json.py", line 106, in default
    return super().default(o)
           ~~~~~~~~~~~~~~~^^^
  File "/usr/local/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type Response is not JSON serializable
2025-06-05 11:35:24,447 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-05 11:35:26,097 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:38:36,886 django.request WARNING  Unauthorized: /api/v1/brands/
2025-06-05 11:38:40,801 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 11:38:52,656 django.request WARNING  Bad Request: /api/v1/brands/
2025-06-05 11:39:29,008 django.request WARNING  Bad Request: /api/v1/brands/
2025-06-05 11:40:30,004 django.request WARNING  Bad Request: /api/v1/brands/
2025-06-05 11:40:59,275 django.request ERROR    Internal Server Error: /api/v1/brands/
2025-06-05 11:41:58,192 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/services.py changed, reloading.
2025-06-05 11:41:59,734 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:42:03,870 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/services.py changed, reloading.
2025-06-05 11:42:05,890 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:42:29,922 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/admin.py changed, reloading.
2025-06-05 11:42:31,838 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:44:29,190 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/tasks.py changed, reloading.
2025-06-05 11:44:32,855 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:44:46,656 django.request WARNING  Bad Request: /api/v1/brands/
2025-06-05 11:46:21,879 django.request ERROR    Internal Server Error: /api/v1/brands/
2025-06-05 11:47:42,081 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/models.py changed, reloading.
2025-06-05 11:47:46,100 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:48:44,446 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/models.py changed, reloading.
2025-06-05 11:48:46,081 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:49:03,770 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 11:51:36,376 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/serializers.py changed, reloading.
2025-06-05 11:51:45,817 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:51:55,329 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/serializers.py changed, reloading.
2025-06-05 11:52:00,635 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:52:50,675 django.request WARNING  Method Not Allowed: /api/v1/brands/a432baeb-535b-4929-8e64-ce7da243a53c/refresh_stats/
2025-06-05 11:53:03,512 django.request WARNING  Not Found: /api/v1/brands/a432baeb-535b-4929-8e64-ce7da243a53c/r
2025-06-05 11:53:40,805 django.request WARNING  Bad Request: /api/v1/brands/search/
2025-06-05 11:54:40,902 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 11:54:48,094 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:55:01,034 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 11:55:05,799 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 11:55:19,422 django.request WARNING  Not Found: /api/v1/brands/search/q="apple"
2025-06-05 11:56:49,082 django.request ERROR    Internal Server Error: /api/v1/brands/search/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_brand/views.py", line 124, in search
    return self.error_response(
           ~~~~~~~~~~~~~~~~~~~^
        message="Search query must be at least 2 characters",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        status=status.HTTP_400_BAD_REQUEST,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: BaseResponseMixin.error_response() got an unexpected keyword argument 'status'
2025-06-05 12:02:08,940 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:02:10,582 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:02:55,050 django.request ERROR    Internal Server Error: /api/v1/brands/search/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_brand/views.py", line 124, in search
    return self.error_response(
           ~~~~~~~~~~~~~~~~~~~^
        message="Search query must be at least 2 characters",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        status=status.HTTP_400_BAD_REQUEST,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: BaseResponseMixin.error_response() got an unexpected keyword argument 'status'
2025-06-05 12:03:26,369 django.request ERROR    Internal Server Error: /api/v1/brands/search/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_brand/views.py", line 124, in search
    return self.error_response(
           ~~~~~~~~~~~~~~~~~~~^
        message="Search query must be at least 2 characters",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        status=status.HTTP_400_BAD_REQUEST,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: BaseResponseMixin.error_response() got an unexpected keyword argument 'status'
2025-06-05 12:03:54,421 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:03:56,364 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:03:59,784 django.request ERROR    Internal Server Error: /api/v1/brands/search/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_brand/views.py", line 124, in search
    return self.error_response(
           ~~~~~~~~~~~~~~~~~~~^
        message="Search query must be at least 2 characters",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        status=status.HTTP_400_BAD_REQUEST,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: BaseResponseMixin.error_response() got an unexpected keyword argument 'status'
2025-06-05 12:04:25,213 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:04:29,434 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:04:51,213 django.request WARNING  Bad Request: /api/v1/brands/search/
2025-06-05 12:05:05,560 django.request ERROR    Internal Server Error: /api/v1/brands/search/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_brand/views.py", line 168, in search
    qs = qs.filter(avg_rating__gte=min_rating_dec)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1491, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)
                                        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1303, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
                                ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'avg_rating' into field. Choices are: active_product_count, brand_request, cached_average_rating, cached_product_count, contact_email, contact_phone, country_of_origin, created_at, description, founded_year, id, is_active, is_featured, is_verified, logo, meta_description, name, products, slug, social_media, stats_updated_at, updated_at, variants, website
2025-06-05 12:11:19,352 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:11:25,679 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:12:19,973 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 12:13:20,035 django.request WARNING  Bad Request: /api/v1/brands/search/
2025-06-05 12:15:23,553 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/serializers.py changed, reloading.
2025-06-05 12:15:26,821 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:16:35,398 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:16:37,116 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:18:04,328 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:18:06,369 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:20:46,116 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:20:51,327 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:22:40,234 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:22:42,081 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:23:23,016 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:23:25,011 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:23:30,567 django.request ERROR    Internal Server Error: /api/v1/brands/search/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_brand/views.py", line 175, in search
    qs = qs.annotate(
        active_product_count=Count("products", filter=Q(products__is_active=True)),
    ...<2 lines>...
        ),
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^
        annotation,
        ^^^^^^^^^^^
        alias,
        ^^^^^^
        select=select,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 1073, in resolve_expression
    c.source_expressions[pos] = arg.resolve_expression(
                                ~~~~~~~~~~~~~~~~~~~~~~^
        query, allow_joins, reuse, summarize, for_save
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 2026, in resolve_ref
    transform = join_info.transform_function(targets[0], final_alias)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1886, in transform
    return self.try_transform(wrapped, name)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1423, in try_transform
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Unsupported lookup 'average_rating' for UUIDField or join on the field not permitted.
2025-06-05 12:23:58,047 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:24:02,459 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:24:45,622 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:24:47,952 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:25:17,763 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:25:26,299 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 12:29:07,067 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:29:08,974 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:29:30,057 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/serializers.py changed, reloading.
2025-06-05 12:29:38,621 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:30:55,518 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:30:58,393 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:31:06,057 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-05 12:31:13,539 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:31:25,825 django.request ERROR    Internal Server Error: /api/v1/brands/s/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/renderers.py", line 731, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/renderers.py", line 663, in get_context
    raw_data_put_form = self.get_raw_data_form(data, view, 'PUT', request)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/renderers.py", line 569, in get_raw_data_form
    data = serializer.data.copy()
           ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 255, in data
    self._data = self.get_initial()
                 ~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 423, in get_initial
    for field in self.fields.values()
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1146, in get_field_names
    assert not (fields and exclude), (
           ^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: Cannot set both 'fields' and 'exclude' options on serializer BrandDetailSerializer.
2025-06-05 12:32:17,485 django.request ERROR    Internal Server Error: /api/v1/brands/f6854a78-2b01-48b5-b40d-f6d025feed7d/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 221, in retrieve
    return cached_view(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 201, in _retrieve_logic
    data=serializer.data,
         ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 525, in to_representation
    for field in fields:
                 ^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 386, in _readable_fields
    for field in self.fields.values():
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1146, in get_field_names
    assert not (fields and exclude), (
           ^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: Cannot set both 'fields' and 'exclude' options on serializer BrandDetailSerializer.
2025-06-05 12:32:47,723 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/serializers.py changed, reloading.
2025-06-05 12:32:49,792 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 12:34:17,853 django.request WARNING  Bad Request: /api/v1/brands/c8bd190d-8e87-45e9-ab11-1983b0ed0b15/
2025-06-05 13:15:13,003 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/models.py changed, reloading.
2025-06-05 13:15:16,454 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 13:31:56,581 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-05 13:31:59,084 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 13:39:26,500 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/services.py changed, reloading.
2025-06-05 13:39:29,719 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 13:40:01,705 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/services.py changed, reloading.
2025-06-05 13:40:04,502 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 13:44:14,532 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/services.py changed, reloading.
2025-06-05 13:44:17,922 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 13:50:13,934 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/services.py changed, reloading.
2025-06-05 13:50:16,800 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:01:46,831 django.utils.autoreload INFO     /workspaces/apps/categories/models.py changed, reloading.
2025-06-05 14:01:49,998 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:02:46,730 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-05 14:02:49,788 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:03:33,185 django.request WARNING  Not Found: /api/v1/s
2025-06-05 14:05:44,703 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/apps.py changed, reloading.
2025-06-05 14:05:48,408 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:08:39,319 django.utils.autoreload INFO     /workspaces/apps/transactions/signals.py changed, reloading.
2025-06-05 14:08:42,510 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:08:51,725 django.utils.autoreload INFO     /workspaces/apps/transactions/apps.py changed, reloading.
2025-06-05 14:08:57,902 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:09:28,447 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/views.py changed, reloading.
2025-06-05 14:09:31,246 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:13:41,982 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/views.py changed, reloading.
2025-06-05 14:13:44,339 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:13:49,991 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/views.py changed, reloading.
2025-06-05 14:13:52,822 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:14:16,465 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-05 14:14:19,710 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:20:29,648 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/serializers.py changed, reloading.
2025-06-05 14:20:32,546 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:37:05,353 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-05 14:37:08,421 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:37:44,501 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-05 14:37:47,920 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:40:35,843 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-05 14:40:38,718 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:40:50,384 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-05 14:40:52,841 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:41:20,712 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-05 14:41:23,309 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:42:30,837 django.utils.autoreload INFO     /workspaces/apps/transactions/utils/breadcrumbs.py changed, reloading.
2025-06-05 14:42:33,272 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:42:44,533 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-05 14:42:47,388 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:47:25,798 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/views.py changed, reloading.
2025-06-05 14:47:28,778 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:47:46,633 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/views.py changed, reloading.
2025-06-05 14:47:49,260 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:50:52,959 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/urls.py changed, reloading.
2025-06-05 14:50:55,913 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:51:00,401 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/urls.py changed, reloading.
2025-06-05 14:51:03,419 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 14:51:26,584 django.request WARNING  Not Found: /api/v1/breadcrumbs
2025-06-05 14:52:36,076 django.request WARNING  Not Found: /api/v1/breadcrumbs/
2025-06-05 14:53:02,929 django.request WARNING  Not Found: /api/v1/breadcrumbs/
2025-06-05 16:08:27,483 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-05 16:08:30,548 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 16:09:06,965 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/throttling.py", line 92, in get_rate
    return self.THROTTLE_RATES[self.scope]
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'product_list'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 503, in dispatch
    self.initial(request, *args, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 422, in initial
    self.check_throttles(request)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 364, in check_throttles
    for throttle in self.get_throttles():
                    ~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 290, in get_throttles
    return [throttle() for throttle in self.throttle_classes]
            ~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/throttling.py", line 70, in __init__
    self.rate = self.get_rate()
                ~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/throttling.py", line 95, in get_rate
    raise ImproperlyConfigured(msg)
django.core.exceptions.ImproperlyConfigured: No default throttle rate set for 'product_list' scope
2025-06-05 16:09:57,756 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-05 16:10:00,647 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 16:12:04,472 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-05 20:04:34,370 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:04:45,415 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 20:05:16,109 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-05 20:05:17,949 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:07:19,118 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-05 20:07:20,543 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:07:30,383 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-05 20:07:31,867 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:07:38,221 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-05 20:07:40,139 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:13:31,636 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-05 20:13:36,483 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:22:43,637 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/services.py changed, reloading.
2025-06-05 20:22:45,239 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:24:32,114 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/services.py changed, reloading.
2025-06-05 20:24:33,983 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:28:56,087 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/views.py changed, reloading.
2025-06-05 20:28:59,557 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:29:47,544 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 20:29:50,641 django.request ERROR    Internal Server Error: /api/v1/conditions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 188, in list
    return self._list_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 156, in _list_logic
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_condition/views.py", line 54, in get_queryset
    return ProductConditionService.get_active_conditions(include_stats=True)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_condition/services.py", line 42, in get_active_conditions
    queryset = queryset.annotate(
               ~~~~~~~~~~~~~~~~~^
        products_count=Count("product", filter=Q(product__is_active=True)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        avg_price=Avg("product__price", filter=Q(product__is_active=True)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).select_related("created_by")
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^
        annotation,
        ^^^^^^^^^^^
        alias,
        ^^^^^^
        select=select,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 1073, in resolve_expression
    c.source_expressions[pos] = arg.resolve_expression(
                                ~~~~~~~~~~~~~~~~~~~~~~^
        query, allow_joins, reuse, summarize, for_save
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 2010, in resolve_ref
    join_info = self.setup_joins(
        field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1863, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
                                       ~~~~~~~~~~~~~~~~~~^
        names[:pivot],
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        fail_on_missing=True,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'product' into field. Choices are: color_code, created_at, created_by, created_by_id, description, display_order, icon_name, id, is_active, name, price_factor, products, quality_score, slug, updated_at
2025-06-05 20:31:27,175 django.request ERROR    Internal Server Error: /api/v1/conditions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 188, in list
    return self._list_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 156, in _list_logic
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_condition/views.py", line 54, in get_queryset
    return ProductConditionService.get_active_conditions(include_stats=True)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_condition/services.py", line 42, in get_active_conditions
    queryset = queryset.annotate(
               ~~~~~~~~~~~~~~~~~^
        products_count=Count("product", filter=Q(product__is_active=True)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        avg_price=Avg("product__price", filter=Q(product__is_active=True)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ).select_related("created_by")
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^
        annotation,
        ^^^^^^^^^^^
        alias,
        ^^^^^^
        select=select,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 1073, in resolve_expression
    c.source_expressions[pos] = arg.resolve_expression(
                                ~~~~~~~~~~~~~~~~~~~~~~^
        query, allow_joins, reuse, summarize, for_save
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 2010, in resolve_ref
    join_info = self.setup_joins(
        field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1863, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
                                       ~~~~~~~~~~~~~~~~~~^
        names[:pivot],
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        fail_on_missing=True,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'product' into field. Choices are: color_code, created_at, created_by, created_by_id, description, display_order, icon_name, id, is_active, name, price_factor, products, quality_score, slug, updated_at
2025-06-05 20:34:04,567 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/services.py changed, reloading.
2025-06-05 20:34:06,347 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:34:17,346 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/services.py changed, reloading.
2025-06-05 20:34:18,716 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:38:51,948 django.request WARNING  Bad Request: /api/v1/conditions/
2025-06-05 20:39:05,585 django.request ERROR    Internal Server Error: /api/v1/conditions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "product_product_conditions_name_key"
DETAIL:  Key (name)=(New) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 79, in create
    self.perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/apps/products/product_condition/views.py", line 73, in perform_create
    super().perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/mixins.py", line 24, in perform_create
    serializer.save()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_condition/models.py", line 76, in save
    super().save(*args, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1836, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: duplicate key value violates unique constraint "product_product_conditions_name_key"
DETAIL:  Key (name)=(New) already exists.

2025-06-05 20:39:10,261 django.request WARNING  Not Found: /api/v1/products/b5c7b5bd-fae8-4f22-b7ef-f652ab2555fa/
2025-06-05 20:40:00,427 django.request ERROR    Internal Server Error: /api/v1/conditions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "product_product_conditions_name_key"
DETAIL:  Key (name)=(Used - Like New) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 79, in create
    self.perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/apps/products/product_condition/views.py", line 73, in perform_create
    super().perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/mixins.py", line 24, in perform_create
    serializer.save()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_condition/models.py", line 76, in save
    super().save(*args, **kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1836, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: duplicate key value violates unique constraint "product_product_conditions_name_key"
DETAIL:  Key (name)=(Used - Like New) already exists.

2025-06-05 20:46:05,669 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/models.py changed, reloading.
2025-06-05 20:46:09,038 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:46:32,702 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/services.py changed, reloading.
2025-06-05 20:46:35,680 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:46:40,228 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/services.py changed, reloading.
2025-06-05 20:46:43,118 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:46:56,183 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 20:47:04,825 django.request WARNING  Bad Request: /api/v1/conditions/
2025-06-05 20:47:28,459 django.request ERROR    Internal Server Error: /api/v1/conditions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "product_product_conditions_name_key"
DETAIL:  Key (name)=(Used - Good) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 79, in create
    self.perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/apps/products/product_condition/views.py", line 73, in perform_create
    super().perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/mixins.py", line 24, in perform_create
    serializer.save()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1836, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: duplicate key value violates unique constraint "product_product_conditions_name_key"
DETAIL:  Key (name)=(Used - Good) already exists.

2025-06-05 20:50:17,658 django.utils.autoreload INFO     /workspaces/apps/products/product_condition/views.py changed, reloading.
2025-06-05 20:50:20,783 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 20:50:28,823 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-05 20:50:54,751 django.request WARNING  Bad Request: /api/v1/conditions/
2025-06-05 20:51:46,686 django.request ERROR    Internal Server Error: /api/v1/categories/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/categories/views.py", line 61, in create
    category = CategoryService.create_category(
        serializer.validated_data, user=request.user
    )
  File "/workspaces/apps/categories/services.py", line 241, in create_category
    cls._clear_category_caches()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/categories/services.py", line 308, in _clear_category_caches
    for key in cache._cache.keys()
               ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/connection.py", line 15, in __getattr__
    return getattr(self._connections[self._alias], item)
AttributeError: 'RedisCache' object has no attribute '_cache'
2025-06-05 21:01:27,998 django.utils.autoreload INFO     /workspaces/apps/categories/services.py changed, reloading.
2025-06-05 21:01:31,225 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 21:04:58,400 django.utils.autoreload INFO     /workspaces/apps/categories/services.py changed, reloading.
2025-06-05 21:05:00,911 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 21:06:15,366 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-05 21:06:17,993 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 21:30:20,633 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/services.py changed, reloading.
2025-06-05 21:30:23,322 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-05 21:36:09,530 django.utils.autoreload INFO     /workspaces/apps/categories/services.py changed, reloading.
2025-06-05 21:36:12,447 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 21:37:27,129 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/services.py changed, reloading.
2025-06-06 21:37:28,793 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 21:47:04,177 django.utils.autoreload INFO     /workspaces/apps/categories/services.py changed, reloading.
2025-06-06 21:47:05,708 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 21:47:31,492 django.utils.autoreload INFO     /workspaces/apps/categories/views.py changed, reloading.
2025-06-06 21:47:33,159 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 21:48:00,064 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-06 21:48:01,701 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 21:51:56,876 django.utils.autoreload INFO     /workspaces/apps/categories/views.py changed, reloading.
2025-06-06 21:51:58,430 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 21:53:11,661 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-06 21:53:13,132 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 21:53:22,138 django.utils.autoreload INFO     /workspaces/apps/categories/admin.py changed, reloading.
2025-06-06 21:53:23,791 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 21:53:30,959 django.request WARNING  Unauthorized: /api/v1/categories/
2025-06-06 21:53:56,840 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-06 21:54:04,454 django.request ERROR    Internal Server Error: /api/v1/categories/
2025-06-06 21:55:03,841 django.utils.autoreload INFO     /workspaces/apps/categories/services.py changed, reloading.
2025-06-06 21:55:05,452 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 21:56:21,906 django.request WARNING  Bad Request: /api/v1/products/
2025-06-06 21:56:43,912 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-06 22:05:44,675 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-06 22:13:45,248 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-06 22:13:46,955 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 22:13:53,502 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-06 22:13:57,722 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-06 22:15:01,339 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-06 22:15:05,088 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 22:15:09,278 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-06 22:15:31,725 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-06 22:15:34,672 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 22:15:38,975 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-06 22:16:02,297 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-06 22:16:05,485 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 22:16:11,338 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-06 22:16:58,028 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-06 22:17:00,274 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-06 22:17:06,597 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-06 22:17:43,477 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-06 22:17:46,286 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:12:24,023 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 10:12:33,584 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 10:12:36,968 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:12:51,410 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 10:12:53,877 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:12:59,507 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 10:19:31,688 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 10:19:35,143 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:19:42,178 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 10:19:45,252 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:20:16,219 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 78, in create
    serializer.is_valid(raise_exception=True)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 225, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
                           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 444, in run_validation
    value = self.to_internal_value(data)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 497, in to_internal_value
    for field in fields:
                 ^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 380, in _writable_fields
    for field in self.fields.values():
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 375, in fields
    fields[key] = value
    ~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/utils/serializer_helpers.py", line 167, in __setitem__
    field.bind(field_name=key, parent=self.serializer)
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 358, in bind
    assert self.source != field_name, (
           ^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: It is redundant to specify `source='category'` on field 'PrimaryKeyRelatedField' in serializer 'ProductCreateSerializer', because it is the same as the field name. Remove the `source` keyword argument.
2025-06-07 10:21:30,686 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/renderers.py", line 731, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/renderers.py", line 662, in get_context
    raw_data_post_form = self.get_raw_data_form(data, view, 'POST', request)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/renderers.py", line 569, in get_raw_data_form
    data = serializer.data.copy()
           ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 255, in data
    self._data = self.get_initial()
                 ~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 423, in get_initial
    for field in self.fields.values()
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 375, in fields
    fields[key] = value
    ~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/utils/serializer_helpers.py", line 167, in __setitem__
    field.bind(field_name=key, parent=self.serializer)
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 358, in bind
    assert self.source != field_name, (
           ^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: It is redundant to specify `source='category'` on field 'PrimaryKeyRelatedField' in serializer 'ProductCreateSerializer', because it is the same as the field name. Remove the `source` keyword argument.
2025-06-07 10:21:33,039 django.request ERROR    Internal Server Error: /api/v1/products-short-code/kaftan-95pi-cLQSPc-ce9089bb/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 206, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 28, in retrieve_by_shortcode
    logger.info(f"Cache MISS for product detail by shortcode: {cache_key}")
                                                               ^^^^^^^^^
UnboundLocalError: cannot access local variable 'cache_key' where it is not associated with a value
2025-06-07 10:21:35,337 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 220, in _get_response
    response = response.render()
  File "/workspaces/.venv/lib/python3.13/site-packages/django/template/response.py", line 114, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/renderers.py", line 731, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/renderers.py", line 662, in get_context
    raw_data_post_form = self.get_raw_data_form(data, view, 'POST', request)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/renderers.py", line 569, in get_raw_data_form
    data = serializer.data.copy()
           ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 255, in data
    self._data = self.get_initial()
                 ~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 423, in get_initial
    for field in self.fields.values()
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 375, in fields
    fields[key] = value
    ~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/utils/serializer_helpers.py", line 167, in __setitem__
    field.bind(field_name=key, parent=self.serializer)
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 358, in bind
    assert self.source != field_name, (
           ^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: It is redundant to specify `source='category'` on field 'PrimaryKeyRelatedField' in serializer 'ProductCreateSerializer', because it is the same as the field name. Remove the `source` keyword argument.
2025-06-07 10:21:44,811 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 10:21:47,966 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:23:00,252 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 10:23:03,243 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:23:17,416 django.request WARNING  Bad Request: /api/v1/products/
2025-06-07 10:23:41,737 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 10:25:18,203 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 10:25:21,558 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:25:32,720 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 10:25:36,449 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 10:26:17,113 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 10:26:20,539 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:26:26,764 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 10:28:19,217 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 10:28:21,786 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:30:16,523 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 10:30:18,885 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:30:27,878 django.request WARNING  Bad Request: /api/v1/products/
2025-06-07 10:33:47,174 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 10:33:50,629 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:34:08,313 django.request ERROR    Internal Server Error: /api/v1/products/fbb7b36c-3a90-46ec-bb0d-b3624bbafbe3/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 198, in _retrieve_logic
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 100, in get_object
    obj = get_object_or_404(queryset, **filter_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 19, in get_object_or_404
    return _get_object_or_404(queryset, *filter_args, **filter_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/shortcuts.py", line 86, in get_object_or_404
    return queryset.get(*args, **kwargs)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 645, in get
    num = len(clone)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1930, in _fetch_all
    self._prefetch_related_objects()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1320, in _prefetch_related_objects
    prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2355, in prefetch_related_objects
    raise AttributeError(
    ...<7 lines>...
    )
AttributeError: Cannot find 'breadcrumbs' on Product object, 'breadcrumbs' is an invalid parameter to prefetch_related()
2025-06-07 10:36:59,961 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 10:37:03,874 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:37:08,699 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 10:37:13,133 django.request ERROR    Internal Server Error: /api/v1/products/fbb7b36c-3a90-46ec-bb0d-b3624bbafbe3/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 198, in _retrieve_logic
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 100, in get_object
    obj = get_object_or_404(queryset, **filter_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 19, in get_object_or_404
    return _get_object_or_404(queryset, *filter_args, **filter_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/shortcuts.py", line 86, in get_object_or_404
    return queryset.get(*args, **kwargs)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 645, in get
    num = len(clone)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 382, in __len__
    self._fetch_all()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1930, in _fetch_all
    self._prefetch_related_objects()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1320, in _prefetch_related_objects
    prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2355, in prefetch_related_objects
    raise AttributeError(
    ...<7 lines>...
    )
AttributeError: Cannot find 'breadcrumbs' on Product object, 'breadcrumbs__content_type' is an invalid parameter to prefetch_related()
2025-06-07 10:42:45,916 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 10:42:49,014 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:44:05,891 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 10:44:09,014 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:47:19,343 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-07 10:47:22,103 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:52:04,011 django.utils.autoreload INFO     /workspaces/apps/users/models/user_profile.py changed, reloading.
2025-06-07 10:52:06,430 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:52:08,447 django.utils.autoreload INFO     /workspaces/apps/users/models/user_profile.py changed, reloading.
2025-06-07 10:52:11,075 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:52:35,249 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-07 10:52:38,216 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:53:07,748 django.utils.autoreload INFO     /workspaces/apps/disputes/models.py changed, reloading.
2025-06-07 10:53:10,826 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:53:45,034 django.utils.autoreload INFO     /workspaces/apps/comments/models.py changed, reloading.
2025-06-07 10:53:48,133 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:54:22,285 django.utils.autoreload INFO     /workspaces/apps/store/models.py changed, reloading.
2025-06-07 10:54:25,307 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:55:44,255 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:57:15,081 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 10:57:44,644 django.request WARNING  Unauthorized: /api/v1/auth/users/
2025-06-07 10:58:19,292 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 11:02:04,231 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 188, in list
    return self._list_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 165, in _list_logic
    data=serializer.data,
         ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 797, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 716, in to_representation
    self.child.to_representation(item) for item in iterable
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 525, in to_representation
    for field in fields:
                 ^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 386, in _readable_fields
    for field in self.fields.values():
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1177, in get_field_names
    assert field_name in fields, (
           ^^^^^^^^^^^^^^^^^^^^
AssertionError: The field 'brand' was declared on serializer ProductListSerializer, but has not been included in the 'fields' option.
2025-06-07 11:03:26,663 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 11:03:29,833 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 11:03:35,893 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:06:30,212 django.utils.autoreload INFO     /workspaces/apps/products/product_rating/serializers.py changed, reloading.
2025-06-07 11:06:33,553 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 11:06:40,939 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:18:27,401 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 11:18:31,575 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 11:18:55,255 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 11:18:59,136 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 11:19:38,972 django.utils.autoreload INFO     /workspaces/apps/products/product_rating/serializers.py changed, reloading.
2025-06-07 11:19:42,153 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 11:19:59,252 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 11:20:05,458 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 11:20:34,081 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:21:53,650 django.request ERROR    Internal Server Error: /api/v1/products-short-code/kaftan-95pi-cLQSPc-ce9089bb/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 228, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 28, in retrieve_by_shortcode
    logger.info(f"Cache MISS for product detail by shortcode: {cache_key}")
                                                               ^^^^^^^^^
UnboundLocalError: cannot access local variable 'cache_key' where it is not associated with a value
2025-06-07 11:21:55,440 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:22:04,184 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:22:10,880 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 11:22:14,360 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:24:49,231 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 11:24:52,124 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 11:24:58,571 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:27:35,809 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 11:27:42,090 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:27:47,311 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:28:14,356 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 11:28:16,924 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 11:28:23,273 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 11:30:10,921 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 11:30:26,631 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 12:57:10,022 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 12:57:11,501 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 12:57:47,455 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 12:57:48,964 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 12:58:21,590 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 12:58:23,275 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 12:58:35,827 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 188, in list
    return self._list_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 165, in _list_logic
    data=serializer.data,
         ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 797, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 716, in to_representation
    self.child.to_representation(item) for item in iterable
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 525, in to_representation
    for field in fields:
                 ^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 386, in _readable_fields
    for field in self.fields.values():
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1177, in get_field_names
    assert field_name in fields, (
           ^^^^^^^^^^^^^^^^^^^^
AssertionError: The field 'condition' was declared on serializer ProductListSerializer, but has not been included in the 'fields' option.
2025-06-07 12:59:02,747 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 12:59:04,435 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:03:53,258 django.utils.autoreload INFO     /workspaces/apps/core/serializers.py changed, reloading.
2025-06-07 13:03:54,860 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:04:51,730 django.utils.autoreload INFO     /workspaces/apps/core/serializers.py changed, reloading.
2025-06-07 13:04:53,215 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:05:57,314 django.utils.autoreload INFO     /workspaces/apps/products/product_rating/serializers.py changed, reloading.
2025-06-07 13:05:59,153 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:07:19,451 django.utils.autoreload INFO     /workspaces/apps/products/product_base/apps.py changed, reloading.
2025-06-07 13:07:20,864 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:07:43,091 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 13:08:29,922 apps.products.product_base.signals INFO     Generating slug for product 'Balenciaga'
2025-06-07 13:08:29,922 apps.products.product_base.signals INFO     Generated slug: balenciaga-dic0
2025-06-07 13:08:29,922 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 13:08:29,923 apps.products.product_base.signals INFO     Generated short code: balenciaga-dic0-jqdNcV-0fa5197a
2025-06-07 13:08:29,999 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 79, in create
    self.perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/views.py", line 171, in perform_create
    serializer.save()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 73, in create
    return super().create(validated_data)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1013, in save_base
    post_save.send(
    ~~~~~~~~~~~~~~^
        sender=origin,
        ^^^^^^^^^^^^^^
    ...<4 lines>...
        using=using,
        ^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/dispatch/dispatcher.py", line 189, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/apps/products/product_base/signals.py", line 79, in create_or_update_product_breadcrumbs
    BreadcrumbService.generate_breadcrumbs_for_product(instance)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/apps/products/product_breadcrumb/services.py", line 248, in generate_breadcrumbs_for_product
    breadcrumbs_data = BreadcrumbService._generate_product_breadcrumbs(product)
  File "/workspaces/apps/products/product_breadcrumb/services.py", line 235, in _generate_product_breadcrumbs
    "href": product.get_absolute_url(),
            ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/models.py", line 130, in get_absolute_url
    return reverse("product-detail", kwargs={"product_slug": self.slug})
  File "/workspaces/.venv/lib/python3.13/site-packages/django/urls/base.py", line 88, in reverse
    return resolver._reverse_with_prefix(view, prefix, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/urls/resolvers.py", line 831, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'product-detail' with keyword arguments '{'product_slug': 'balenciaga-dic0'}' not found. 2 pattern(s) tried: ['api/v1/products/(?P<pk>[^/.]+)\\.(?P<format>[a-z0-9]+)/?$', 'api/v1/products/(?P<pk>[^/.]+)/$']
2025-06-07 13:08:45,369 django.request ERROR    Internal Server Error: /api/v1/products-short-code/kaftan-95pi-cLQSPc-ce9089bb/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 228, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 28, in retrieve_by_shortcode
    logger.info(f"Cache MISS for product detail by shortcode: {cache_key}")
                                                               ^^^^^^^^^
UnboundLocalError: cannot access local variable 'cache_key' where it is not associated with a value
2025-06-07 13:16:13,961 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 13:16:16,106 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:16:59,847 django.utils.autoreload INFO     /workspaces/apps/products/product_base/urls.py changed, reloading.
2025-06-07 13:17:01,499 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:18:20,510 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-07 13:18:22,133 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:18:38,458 django.request ERROR    Internal Server Error: /api/v1/products-short-code/kaftan-95pi-cLQSPc-ce9089bb/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 230, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 28, in retrieve_by_shortcode
    logger.info(f"Cache MISS for product detail by shortcode: {cache_key}")
                                                               ^^^^^^^^^
UnboundLocalError: cannot access local variable 'cache_key' where it is not associated with a value
2025-06-07 13:19:27,059 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 13:19:39,804 django.request WARNING  Bad Request: /api/v1/products/
2025-06-07 13:21:21,627 django.utils.autoreload INFO     /workspaces/apps/products/product_base/urls.py changed, reloading.
2025-06-07 13:21:23,415 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:21:57,683 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-07 13:21:59,261 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:22:08,453 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 13:22:10,429 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:22:17,969 apps.products.product_base.signals INFO     Generating slug for product 'Air Jordan'
2025-06-07 13:22:17,969 apps.products.product_base.signals INFO     Generated slug: air-jordan-6df3
2025-06-07 13:22:17,969 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 13:22:17,970 apps.products.product_base.signals INFO     Generated short code: air-jordan-6df3-uIKfSi-5df86795
2025-06-07 13:22:18,017 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 13:23:42,886 apps.products.product_base.signals INFO     Generating slug for product 'Apple'
2025-06-07 13:23:42,886 apps.products.product_base.signals INFO     Generated slug: apple-hzam
2025-06-07 13:23:42,886 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 13:23:42,887 apps.products.product_base.signals INFO     Generated short code: apple-hzam-60dMhX-ba95203f
2025-06-07 13:23:42,912 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 13:33:53,327 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/services.py changed, reloading.
2025-06-07 13:33:57,630 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:34:30,809 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 13:34:35,019 apps.products.product_base.signals INFO     Generating slug for product 'Air Jordan Nike'
2025-06-07 13:34:35,019 apps.products.product_base.signals INFO     Generated slug: air-jordan-nike-7rhb
2025-06-07 13:34:35,019 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 13:34:35,021 apps.products.product_base.signals INFO     Generated short code: air-jordan-nike-7rhb-7dlKni-48376f07
2025-06-07 13:34:35,037 breadcrumbs_performance ERROR    Error bulk creating breadcrumbs for product_base.product ID 39fef7d2-30b7-45fd-a6ec-d88aaf9f1c49: integer out of range

2025-06-07 13:34:35,117 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.NumericValueOutOfRange: integer out of range


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/workspaces/apps/products/product_breadcrumb/services.py", line 54, in bulk_create_breadcrumbs
    created_breadcrumbs = Breadcrumb.objects.bulk_create(
        breadcrumbs_to_create
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 818, in bulk_create
    returned_columns = self._batched_insert(
        objs_with_pk,
    ...<4 lines>...
        unique_fields=unique_fields,
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1875, in _batched_insert
    self._insert(
    ~~~~~~~~~~~~^
        item,
        ^^^^^
    ...<5 lines>...
        returning_fields=self.model._meta.db_returning_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1836, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.DataError: integer out of range


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 79, in create
    self.perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/views.py", line 172, in perform_create
    serializer.save()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 73, in create
    return super().create(validated_data)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1013, in save_base
    post_save.send(
    ~~~~~~~~~~~~~~^
        sender=origin,
        ^^^^^^^^^^^^^^
    ...<4 lines>...
        using=using,
        ^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/dispatch/dispatcher.py", line 189, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/apps/products/product_base/signals.py", line 79, in create_or_update_product_breadcrumbs
    BreadcrumbService.generate_breadcrumbs_for_product(instance)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/apps/products/product_breadcrumb/services.py", line 249, in generate_breadcrumbs_for_product
    return BreadcrumbService.bulk_create_breadcrumbs(product, breadcrumbs_data)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_breadcrumb/services.py", line 79, in bulk_create_breadcrumbs
    raise ValidationError(f"Failed to create breadcrumbs: {str(e)}")
django.core.exceptions.ValidationError: ['Failed to create breadcrumbs: integer out of range\n']
2025-06-07 13:46:06,149 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/services.py changed, reloading.
2025-06-07 13:46:10,173 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:46:52,848 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 13:46:57,463 apps.products.product_base.signals INFO     Generating slug for product 'Balenciagarrrr'
2025-06-07 13:46:57,466 apps.products.product_base.signals INFO     Generated slug: balenciagarrrr-xg7x
2025-06-07 13:46:57,466 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 13:46:57,475 apps.products.product_base.signals INFO     Generated short code: balenciagarrrr-xg7x-hbFB98-5ebb91fc
2025-06-07 13:46:57,565 breadcrumbs_performance ERROR    Error bulk creating breadcrumbs for product_base.product ID 404810f5-b519-4344-ad31-aebb59ce37e2: {'object_id': ['Ensure this value is less than or equal to 2147483647.']}
2025-06-07 13:46:58,242 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/apps/products/product_breadcrumb/services.py", line 66, in bulk_create_breadcrumbs
    breadcrumb.full_clean()  # Validate before saving
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1651, in full_clean
    raise ValidationError(errors)
django.core.exceptions.ValidationError: {'object_id': ['Ensure this value is less than or equal to 2147483647.']}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 79, in create
    self.perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/views.py", line 172, in perform_create
    serializer.save()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 73, in create
    return super().create(validated_data)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1013, in save_base
    post_save.send(
    ~~~~~~~~~~~~~~^
        sender=origin,
        ^^^^^^^^^^^^^^
    ...<4 lines>...
        using=using,
        ^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/dispatch/dispatcher.py", line 189, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/apps/products/product_base/signals.py", line 79, in create_or_update_product_breadcrumbs
    BreadcrumbService.generate_breadcrumbs_for_product(instance)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/apps/products/product_breadcrumb/services.py", line 268, in generate_breadcrumbs_for_product
    return BreadcrumbService.bulk_create_breadcrumbs(product, breadcrumbs_data)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_breadcrumb/services.py", line 98, in bulk_create_breadcrumbs
    raise ValidationError(f"Failed to create breadcrumbs: {str(e)}")
django.core.exceptions.ValidationError: ["Failed to create breadcrumbs: {'object_id': ['Ensure this value is less than or equal to 2147483647.']}"]
2025-06-07 13:50:50,281 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/models.py changed, reloading.
2025-06-07 13:50:56,405 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:54:15,450 django.utils.autoreload INFO     /workspaces/apps/products/product_breadcrumb/services.py changed, reloading.
2025-06-07 13:54:18,987 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:54:40,309 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 13:54:45,694 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 13:55:12,806 apps.products.product_base.signals INFO     Generating slug for product 'NB'
2025-06-07 13:55:12,807 apps.products.product_base.signals INFO     Generated slug: nb-i589
2025-06-07 13:55:12,807 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 13:55:12,808 apps.products.product_base.signals INFO     Generated short code: nb-i589-8k8Kxt-44d476ab
2025-06-07 13:55:12,824 breadcrumbs_performance INFO     Bulk created 3 breadcrumbs for product_base.product ID baea30a7-27d2-4c8a-9188-e6c8fa5842a2 in 5.38ms
2025-06-07 13:56:02,138 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 13:56:04,350 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:56:26,292 apps.products.product_base.signals INFO     Generating slug for product 'Puma'
2025-06-07 13:56:26,292 apps.products.product_base.signals INFO     Generated slug: puma-l5et
2025-06-07 13:56:26,293 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 13:56:26,294 apps.products.product_base.signals INFO     Generated short code: puma-l5et-ZLigTw-ca1ecd9f
2025-06-07 13:56:26,312 breadcrumbs_performance INFO     Bulk created 3 breadcrumbs for product_base.product ID f7692223-b465-4eed-8329-a90ddda114dd in 6.28ms
2025-06-07 13:57:37,063 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 13:57:40,550 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:58:00,561 apps.products.product_base.signals INFO     Generating slug for product 'skk'
2025-06-07 13:58:00,561 apps.products.product_base.signals INFO     Generated slug: skk-1nue
2025-06-07 13:58:00,562 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 13:58:00,563 apps.products.product_base.signals INFO     Generated short code: skk-1nue-aehYDZ-fd4578a0
2025-06-07 13:58:00,580 breadcrumbs_performance INFO     Bulk created 3 breadcrumbs for product_base.product ID ab1b7054-c540-4d63-a0b2-80ac254f9931 in 4.96ms
2025-06-07 13:58:18,809 django.request ERROR    Internal Server Error: /api/v1/products/skk-1nue-aehYDZ-fd4578a0/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 201, in _retrieve_logic
    data=serializer.data,
         ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 365, in to_representation
    data = super().to_representation(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 525, in to_representation
    for field in fields:
                 ^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 386, in _readable_fields
    for field in self.fields.values():
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1177, in get_field_names
    assert field_name in fields, (
           ^^^^^^^^^^^^^^^^^^^^
AssertionError: The field 'brand_detail' was declared on serializer ProductDetailSerializer, but has not been included in the 'fields' option.
2025-06-07 13:59:27,339 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 13:59:29,702 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 13:59:51,182 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 13:59:58,874 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:00:07,252 django.request ERROR    Internal Server Error: /api/v1/products/skk-1nue-aehYDZ-fd4578a0/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 201, in _retrieve_logic
    data=serializer.data,
         ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 365, in to_representation
    data = super().to_representation(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 1870, in to_representation
    return method(value)
  File "/workspaces/apps/products/product_base/serializers.py", line 302, in get_variants
    variants = ProductVariantService.get_product_variants(obj.id, with_options=True)
  File "/workspaces/apps/products/product_variant/services.py", line 55, in get_product_variants
    cache_key = CacheKeyManager.make_key(
        "product_variant", product_id=product_id, with_options=with_options
    )
TypeError: CacheKeyManager.make_key() missing 1 required positional argument: 'key_name'
2025-06-07 14:07:51,576 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 14:07:53,526 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:12:49,960 django.utils.autoreload INFO     /workspaces/apps/products/product_variant/services.py changed, reloading.
2025-06-07 14:12:55,657 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:13:03,099 django.request ERROR    Internal Server Error: /api/v1/products/skk-1nue-aehYDZ-fd4578a0/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 198, in _retrieve_logic
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 87, in get_object
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 117, in get_queryset
    queryset = queryset.filter(seller=self.request.user)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-07 14:13:39,579 django.request ERROR    Internal Server Error: /api/v1/products-short-code/skk-1nue-aehYDZ-fd4578a0/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 229, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 28, in retrieve_by_shortcode
    logger.info(f"Cache MISS for product detail by shortcode: {cache_key}")
                                                               ^^^^^^^^^
UnboundLocalError: cannot access local variable 'cache_key' where it is not associated with a value
2025-06-07 14:14:32,773 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-07 14:14:34,540 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:14:38,490 django.request ERROR    Internal Server Error: /api/v1/products-short-code/skk-1nue-aehYDZ-fd4578a0/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 229, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 28, in retrieve_by_shortcode
    logger.info(f"Cache MISS for product detail by shortcode: {cache_key}")
                                                               ^^^^^^^^^
UnboundLocalError: cannot access local variable 'cache_key' where it is not associated with a value
2025-06-07 14:14:40,546 django.request ERROR    Internal Server Error: /api/v1/products-short-code/skk-1nue-aehYDZ-fd4578a0/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 229, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 28, in retrieve_by_shortcode
    logger.info(f"Cache MISS for product detail by shortcode: {cache_key}")
                                                               ^^^^^^^^^
UnboundLocalError: cannot access local variable 'cache_key' where it is not associated with a value
2025-06-07 14:16:26,645 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-07 14:16:28,352 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:16:35,446 django.request ERROR    Internal Server Error: /api/v1/products-short-code/skk-1nue-aehYDZ-fd4578a0/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 437, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 104, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'Product' object has no attribute 'rating'. Did you mean: 'ratings'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 229, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 37, in retrieve_by_shortcode
    serialized_data = serializer.data
                      ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 366, in to_representation
    data = super().to_representation(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 527, in to_representation
    attribute = field.get_attribute(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 470, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `rating` on serializer `ProductRatingsSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `Product` instance.
Original exception text was: 'Product' object has no attribute 'rating'.
2025-06-07 14:17:33,660 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 14:17:35,833 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:17:45,682 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 14:17:50,551 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:17:57,548 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:base:detail_by_shortcode:skk-1nue-aehYDZ-fd4578a0
2025-06-07 14:17:57,549 products_performance INFO     Cached product detail by shortcode: safetrade:base:detail_by_shortcode:skk-1nue-aehYDZ-fd4578a0
2025-06-07 14:19:02,962 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 14:19:04,651 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:19:20,990 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 14:19:22,673 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:42:49,467 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 14:42:59,114 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:44:23,094 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 14:44:26,066 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:45:45,510 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 14:45:48,546 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:46:06,997 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 14:46:10,161 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:47:33,662 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 14:47:36,493 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:47:49,323 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 14:47:52,208 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:48:14,995 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 14:48:17,401 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:48:31,405 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 14:48:34,485 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:49:07,595 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 14:49:10,187 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:49:17,975 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 188, in list
    return self._list_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 156, in _list_logic
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 94, in get_queryset
    queryset = ProductListService.get_cached_product_list(self, queryset)
  File "/workspaces/apps/products/product_base/services/product_list_service.py", line 36, in get_cached_product_list
    cache_key = ProductListService._generate_list_cache_key(viewset.request)
  File "/workspaces/apps/products/product_base/services/product_list_service.py", line 164, in _generate_list_cache_key
    return CacheKeyManager.make_key(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        "product_base", "list", params=params_hash, user=user_info
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/core/utils/cache_key_manager.py", line 55, in make_key
    filled = raw_template.format(**kwargs)
KeyError: 'page'
2025-06-07 14:49:18,343 django.request ERROR    Internal Server Error: /api/v1/products/skk-1nue-aehYDZ-fd4578a0/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 198, in _retrieve_logic
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 87, in get_object
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 101, in get_queryset
    queryset = queryset.filter(seller=self.request.user)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-07 14:49:20,106 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 188, in list
    return self._list_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 156, in _list_logic
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 94, in get_queryset
    queryset = ProductListService.get_cached_product_list(self, queryset)
  File "/workspaces/apps/products/product_base/services/product_list_service.py", line 36, in get_cached_product_list
    cache_key = ProductListService._generate_list_cache_key(viewset.request)
  File "/workspaces/apps/products/product_base/services/product_list_service.py", line 164, in _generate_list_cache_key
    return CacheKeyManager.make_key(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        "product_base", "list", params=params_hash, user=user_info
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/core/utils/cache_key_manager.py", line 55, in make_key
    filled = raw_template.format(**kwargs)
KeyError: 'page'
2025-06-07 14:50:39,307 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-07 14:50:42,322 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 14:50:46,175 products_performance INFO     Cache MISS for product list: safetrade:base:list:bdeae2c90faa:anon
2025-06-07 14:50:46,240 products_performance INFO     Cached product list with 9 items: safetrade:base:list:bdeae2c90faa:anon
2025-06-07 14:51:12,056 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:anon
2025-06-07 14:51:12,152 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 14:51:18,283 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:anon
2025-06-07 14:51:18,427 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 15:08:54,368 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 15:08:57,796 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 15:09:19,982 products_performance INFO     Cache MISS for product list: safetrade:base:list:bdeae2c90faa:anon
2025-06-07 15:09:20,106 products_performance INFO     Cached product list with 9 items: safetrade:base:list:bdeae2c90faa:anon
2025-06-07 15:09:35,104 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:anon
2025-06-07 15:11:57,453 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 15:12:00,865 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 15:12:08,211 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:anon
2025-06-07 15:12:41,800 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 15:12:44,802 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 15:15:57,877 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 15:16:51,838 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:base:detail_by_shortcode:skk-1nue-aehYDZ-fd4578a0
2025-06-07 15:16:51,839 products_performance INFO     Cached product detail by shortcode: safetrade:base:detail_by_shortcode:skk-1nue-aehYDZ-fd4578a0
2025-06-07 15:18:20,593 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-07 15:18:23,483 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 15:19:35,374 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 15:19:37,017 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 15:20:24,666 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 15:20:27,139 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 15:23:13,410 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 15:23:15,094 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 15:23:29,273 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:base:detail_by_shortcode:skk-1nue-aehYDZ-fd4578a0
2025-06-07 15:23:53,737 django.request WARNING  Not Found: /api/v1/products/skk-1nue-aehYDZ-fd4578a0/
2025-06-07 15:24:01,322 products_performance INFO     Cache MISS for product list: safetrade:base:list:bdeae2c90faa:user_8986d141-3892-4ded-aa17-5041d599a353
2025-06-07 15:24:01,336 products_performance INFO     Cached product list with 9 items: safetrade:base:list:bdeae2c90faa:user_8986d141-3892-4ded-aa17-5041d599a353
2025-06-07 21:09:23,404 django.request ERROR    Internal Server Error: /api/v1/products/skk-1nue-aehYDZ-fd4578a0/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 198, in _retrieve_logic
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 87, in get_object
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 98, in get_queryset
    base_queryset = base_queryset.filter(seller=self.request.user)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-07 21:09:24,933 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:base:detail_by_shortcode:skk-1nue-aehYDZ-fd4578a0
2025-06-07 21:09:24,935 products_performance INFO     Cached product detail by shortcode: safetrade:base:detail_by_shortcode:skk-1nue-aehYDZ-fd4578a0
2025-06-07 21:27:13,255 django.utils.autoreload INFO     /workspaces/apps/categories/models.py changed, reloading.
2025-06-07 21:27:15,727 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:27:21,939 django.utils.autoreload INFO     /workspaces/apps/categories/models.py changed, reloading.
2025-06-07 21:27:25,048 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:28:28,457 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/models.py changed, reloading.
2025-06-07 21:28:31,329 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:28:36,126 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/models.py changed, reloading.
2025-06-07 21:28:38,826 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:29:11,507 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-07 21:29:14,707 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:30:15,224 django.utils.autoreload INFO     /workspaces/apps/core/serializers.py changed, reloading.
2025-06-07 21:30:18,759 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:32:44,047 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 21:32:47,139 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:32:57,910 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 21:33:02,010 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:35:12,341 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-07 21:35:15,565 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:38:57,554 django.request ERROR    Internal Server Error: /api/v1/products/stats/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 158, in stats
    return ProductStatsService.get_stats_view(self, request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'ProductStatsService' has no attribute 'get_stats_view'
2025-06-07 21:39:54,941 django.request WARNING  Method Not Allowed: /api/v1/auth/login/
2025-06-07 21:40:04,105 django.request WARNING  Method Not Allowed: /api/v1/auth/refresh/
2025-06-07 21:40:08,278 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 21:40:19,433 django.request WARNING  Not Found: /api/v1/products/skk-1nue-aehYDZ-fd4578a0/
2025-06-07 21:40:20,453 products_performance INFO     Cache MISS for product list: safetrade:base:list:bdeae2c90faa:user_8986d141-3892-4ded-aa17-5041d599a353
2025-06-07 21:40:20,487 products_performance INFO     Cached product list with 9 items: safetrade:base:list:bdeae2c90faa:user_8986d141-3892-4ded-aa17-5041d599a353
2025-06-07 21:43:16,549 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 21:46:38,445 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:46:47,184 django.request WARNING  Method Not Allowed: /api/v1/auth/login/
2025-06-07 21:47:05,076 django.request WARNING  Bad Request: /api/v1/auth/login/
2025-06-07 21:47:32,474 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 21:48:05,196 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 21:48:58,938 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-07 21:49:01,823 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:49:33,005 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-07 21:49:35,303 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:50:17,948 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/urls.py changed, reloading.
2025-06-07 21:50:21,008 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 21:50:55,951 django.request WARNING  Bad Request: /api/v1/brands/search/
2025-06-07 21:54:06,565 products_performance INFO     Cache MISS for product list: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 21:54:06,664 products_performance INFO     Cached product list with 9 items: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 21:54:49,654 django.request ERROR    Internal Server Error: /api/v1/categories/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "categories_slug_key"
DETAIL:  Key (slug)=() already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 79, in create
    self.perform_create(serializer)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/workspaces/apps/categories/views.py", line 58, in perform_create
    category = CategoryService.create_category(
        serializer.validated_data, user=self.request.user
    )
  File "/workspaces/apps/categories/services.py", line 279, in create_category
    category = Category.objects.create(**data)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 998, in save_base
    updated = self._save_table(
        raw,
    ...<4 lines>...
        update_fields,
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1161, in _save_table
    results = self._do_insert(
        cls._base_manager, using, fields, returning_fields, raw
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1202, in _do_insert
    return manager._insert(
           ~~~~~~~~~~~~~~~^
        [self],
        ^^^^^^^
    ...<3 lines>...
        raw=raw,
        ^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1847, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1836, in execute_sql
    cursor.execute(sql, params)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sql, params, many=False, executor=self._execute
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
django.db.utils.IntegrityError: duplicate key value violates unique constraint "categories_slug_key"
DETAIL:  Key (slug)=() already exists.

2025-06-07 22:02:22,683 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-07 22:02:24,629 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:03:08,594 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 22:03:24,069 django.request ERROR    Internal Server Error: /api/v1/categories/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 78, in create
    serializer.is_valid(raise_exception=True)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 225, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
                           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 444, in run_validation
    value = self.to_internal_value(data)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 497, in to_internal_value
    for field in fields:
                 ^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 380, in _writable_fields
    for field in self.fields.values():
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1177, in get_field_names
    assert field_name in fields, (
           ^^^^^^^^^^^^^^^^^^^^
AssertionError: The field 'slug' was declared on serializer CategoryWriteSerializer, but has not been included in the 'fields' option.
2025-06-07 22:05:58,379 django.utils.autoreload INFO     /workspaces/apps/categories/models.py changed, reloading.
2025-06-07 22:06:00,713 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:06:22,336 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-07 22:06:34,486 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:07:44,743 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-07 22:07:46,646 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:08:51,662 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 22:12:02,311 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-07 22:12:05,464 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:12:13,234 products_performance INFO     Cache MISS for product list: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 22:12:13,253 products_performance INFO     Cached product list with 9 items: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 22:12:59,754 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo ThinkPad'
2025-06-07 22:12:59,756 apps.products.product_base.signals INFO     Generated slug: lenevo-thinkpad-jugk
2025-06-07 22:12:59,756 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 22:12:59,762 apps.products.product_base.signals INFO     Generated short code: lenevo-thinkpad-jugk-ODkikx-7bcf7d03
2025-06-07 22:12:59,832 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 22:13:20,272 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 22:13:22,110 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:13:42,843 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 22:13:50,863 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:16:36,259 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo ThinkPad'
2025-06-07 22:16:36,260 apps.products.product_base.signals INFO     Generated slug: lenevo-thinkpad-z3pz
2025-06-07 22:16:36,260 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 22:16:36,262 apps.products.product_base.signals INFO     Generated short code: lenevo-thinkpad-z3pz-cibQxm-fbae3a5b
2025-06-07 22:16:36,277 products_performance INFO     Invalidated product detail cache: safetrade:base:detail_by_shortcode:lenevo-thinkpad-z3pz-cibQxm-fbae3a5b
2025-06-07 22:16:36,277 products_performance WARNING  Failed to invalidate list caches: CacheManager.invalidate_pattern() missing 1 required positional argument: 'key_name'
2025-06-07 22:16:36,277 apps.products.product_base.signals INFO     Invalidated cache for product: lenevo-thinkpad-z3pz-cibQxm-fbae3a5b
2025-06-07 22:16:53,454 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 22:17:45,128 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 22:17:47,906 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 22:20:56,230 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 22:21:11,140 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:21:25,429 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 22:21:32,719 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:21:50,699 django.request WARNING  Unauthorized: /api/v1/products/
2025-06-07 22:21:54,536 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 22:21:57,591 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 22:22:10,422 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo Yoga'
2025-06-07 22:22:10,423 apps.products.product_base.signals INFO     Generated slug: lenevo-yoga-df5z
2025-06-07 22:22:10,423 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 22:22:10,425 apps.products.product_base.signals INFO     Generated short code: lenevo-yoga-df5z-VUuLgV-2158c7e2
2025-06-07 22:22:10,446 apps.products.product_base.signals INFO     Invalidated cache for product: lenevo-yoga-df5z-VUuLgV-2158c7e2
2025-06-07 22:22:15,059 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 22:26:17,421 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 22:26:19,160 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:26:43,243 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo Yoga 360'
2025-06-07 22:26:43,244 apps.products.product_base.signals INFO     Generated slug: lenevo-yoga-360-c0k3
2025-06-07 22:26:43,244 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 22:26:43,245 apps.products.product_base.signals INFO     Generated short code: lenevo-yoga-360-c0k3-dkqa2d-79d111c4
2025-06-07 22:26:43,256 apps.products.product_base.signals INFO     Invalidated cache for product: lenevo-yoga-360-c0k3-dkqa2d-79d111c4
2025-06-07 22:26:46,100 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa:staff_4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-07 22:34:24,031 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 22:34:25,594 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:35:18,543 django.request ERROR    Internal Server Error: /api/v1/products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 188, in list
    return self._list_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 156, in _list_logic
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 101, in get_queryset
    optimized_queryset = ProductListService.get_cached_product_list(
        self, base_queryset
    )
  File "/workspaces/apps/products/product_base/services/product_list_service.py", line 36, in get_cached_product_list
    cache_key = ProductListService._generate_list_cache_key(viewset.request)
  File "/workspaces/apps/products/product_base/services/product_list_service.py", line 157, in _generate_list_cache_key
    return CacheKeyManager.make_key("product_base", "list", params=params_hash)
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/utils/cache_key_manager.py", line 55, in make_key
    filled = raw_template.format(**kwargs)
KeyError: 'user'
2025-06-07 22:35:41,879 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-07 22:35:43,653 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:35:52,870 products_performance INFO     Cache MISS for product list: safetrade:base:list:bdeae2c90faa
2025-06-07 22:35:52,880 products_performance INFO     Cached product list with 13 items: safetrade:base:list:bdeae2c90faa
2025-06-07 22:36:29,203 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 22:36:31,276 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:37:21,965 django.request ERROR    Internal Server Error: /api/v1/products-short-code/lenevo-thinkpad-jugk-ODkikx-7bcf7d03/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 224, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 38, in retrieve_by_shortcode
    serialized_data = serializer.data
                      ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 372, in to_representation
    data = super().to_representation(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 525, in to_representation
    for field in fields:
                 ^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 386, in _readable_fields
    for field in self.fields.values():
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1177, in get_field_names
    assert field_name in fields, (
           ^^^^^^^^^^^^^^^^^^^^
AssertionError: The field 'breadcrumbs' was declared on serializer CategoryDetailSerializer, but has not been included in the 'fields' option.
2025-06-07 22:38:38,172 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-07 22:38:39,852 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:38:44,605 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:base:detail_by_shortcode:lenevo-thinkpad-jugk-ODkikx-7bcf7d03
2025-06-07 22:38:44,606 products_performance INFO     Cached product detail by shortcode: safetrade:base:detail_by_shortcode:lenevo-thinkpad-jugk-ODkikx-7bcf7d03
2025-06-07 22:42:21,102 django.request WARNING  Unauthorized: /api/v1/products/
2025-06-07 22:42:25,705 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 22:42:29,505 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa
2025-06-07 22:42:47,940 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo 234'
2025-06-07 22:42:47,941 apps.products.product_base.signals INFO     Generated slug: lenevo-234-6729
2025-06-07 22:42:47,942 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 22:42:47,946 apps.products.product_base.signals INFO     Generated short code: lenevo-234-6729-6HhY2z-77f9bcc4
2025-06-07 22:42:47,980 apps.products.product_base.signals INFO     Invalidated cache for product: lenevo-234-6729-6HhY2z-77f9bcc4
2025-06-07 22:42:52,093 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa
2025-06-07 22:45:53,166 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa
2025-06-07 22:54:24,980 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 22:54:26,881 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:55:38,932 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 22:55:40,786 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:55:54,807 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo 234'
2025-06-07 22:55:54,807 apps.products.product_base.signals INFO     Generated slug: lenevo-234-f20x
2025-06-07 22:55:54,807 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 22:55:54,809 apps.products.product_base.signals INFO     Generated short code: lenevo-234-f20x-Sojr9i-6f4dcab6
2025-06-07 22:55:54,822 apps.products.product_base.signals INFO     Invalidated cache for product: lenevo-234-f20x-Sojr9i-6f4dcab6
2025-06-07 22:56:00,917 products_performance INFO     Cache MISS for product list: safetrade:base:list:bdeae2c90faa
2025-06-07 22:56:00,932 products_performance INFO     Cached product list with 15 items: safetrade:base:list:bdeae2c90faa
2025-06-07 22:56:10,202 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa
2025-06-07 22:56:39,281 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-07 22:56:43,130 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:56:50,935 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 22:56:55,759 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo'
2025-06-07 22:56:55,759 apps.products.product_base.signals INFO     Generated slug: lenevo-4hh4
2025-06-07 22:56:55,760 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 22:56:55,760 apps.products.product_base.signals INFO     Generated short code: lenevo-4hh4-qAl9Hm-ebe0ab66
2025-06-07 22:56:55,771 apps.products.product_base.signals INFO     Invalidated cache for product: lenevo-4hh4-qAl9Hm-ebe0ab66
2025-06-07 22:56:58,615 products_performance INFO     Cache MISS for product list: safetrade:base:list:bdeae2c90faa*
2025-06-07 22:56:58,629 products_performance INFO     Cached product list with 16 items: safetrade:base:list:bdeae2c90faa*
2025-06-07 22:57:31,837 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 22:57:34,335 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 22:57:44,008 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa*
2025-06-07 22:58:04,625 apps.products.product_base.signals INFO     Generating slug for product 'Yoga'
2025-06-07 22:58:04,630 apps.products.product_base.signals INFO     Generated slug: yoga-t6hg
2025-06-07 22:58:04,632 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 22:58:04,641 apps.products.product_base.signals INFO     Generated short code: yoga-t6hg-PGAnRH-5ed700a9
2025-06-07 22:58:04,721 apps.products.product_base.signals INFO     Invalidated cache for product: yoga-t6hg-PGAnRH-5ed700a9
2025-06-07 22:58:08,772 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa*
2025-06-07 22:58:14,994 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa*
2025-06-07 22:58:42,882 products_performance INFO     Cache HIT for product list: safetrade:base:list:bdeae2c90faa*
2025-06-07 23:15:17,194 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 23:15:19,340 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:15:49,674 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:16:08,792 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:16:26,204 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 23:19:15,687 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:19:21,013 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:19:27,304 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 23:19:30,046 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:20:34,618 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-07 23:20:37,671 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:20:42,839 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:20:46,717 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:20:51,152 django.request WARNING  Method Not Allowed: /api/v1/auth/refresh/
2025-06-07 23:20:54,905 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 23:20:59,779 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 23:21:45,371 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:21:48,117 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:21:54,028 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 23:22:59,427 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:23:02,535 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:23:08,504 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 23:23:10,177 products_performance WARNING  Product not found by shortcode: kaftan-95pi-cLQSPc-ce9089bb
2025-06-07 23:23:10,187 django.request WARNING  Not Found: /api/v1/products-short-code/kaftan-95pi-cLQSPc-ce9089bb/
2025-06-07 23:23:11,374 products_performance WARNING  Product not found by shortcode: kaftan-95pi-cLQSPc-ce9089bb
2025-06-07 23:23:11,385 django.request WARNING  Not Found: /api/v1/products-short-code/kaftan-95pi-cLQSPc-ce9089bb/
2025-06-07 23:23:12,290 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 23:23:13,422 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 23:25:14,353 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:25:29,665 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:25:41,201 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:25:41,263 products_performance INFO     Cached product list with 17 items: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:26:36,183 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo IdeaPad'
2025-06-07 23:26:36,184 apps.products.product_base.signals INFO     Generated slug: lenevo-ideapad-trth
2025-06-07 23:26:36,184 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 23:26:36,185 apps.products.product_base.signals INFO     Generated short code: lenevo-ideapad-trth-Im1LCC-c9b7342e
2025-06-07 23:26:36,198 products_performance INFO     Invalidated specific caches for product: lenevo-ideapad-trth-Im1LCC-c9b7342e
2025-06-07 23:26:36,203 products_performance INFO     Invalidated all product list and catalog caches
2025-06-07 23:26:36,204 apps.products.product_base.signals INFO     Cache invalidated for product: lenevo-ideapad-trth-Im1LCC-c9b7342e (created: True)
2025-06-07 23:26:38,669 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:26:41,286 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:35:25,205 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-07 23:35:28,840 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:37:07,188 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:37:13,366 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:38:02,192 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 23:38:04,488 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:38:43,715 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 23:38:45,840 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:38:53,785 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:39:01,182 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 23:39:05,064 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:39:23,128 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:39:30,836 apps.products.product_base.signals INFO     Generating slug for product 'awarwaro'
2025-06-07 23:39:30,836 apps.products.product_base.signals INFO     Generated slug: awarwaro-b5p5
2025-06-07 23:39:30,837 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 23:39:30,838 apps.products.product_base.signals INFO     Generated short code: awarwaro-b5p5-gZGHBH-10128f4d
2025-06-07 23:39:30,852 products_performance INFO     Invalidated specific caches for product: awarwaro-b5p5-gZGHBH-10128f4d
2025-06-07 23:39:30,853 products_performance INFO     Invalidated all product list and catalog caches
2025-06-07 23:39:30,854 apps.products.product_base.signals INFO     Cache invalidated for product: awarwaro-b5p5-gZGHBH-10128f4d (created: True)
2025-06-07 23:39:33,316 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:43:17,648 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:43:28,654 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:43:59,365 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:44:01,615 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:44:15,725 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 23:44:18,282 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:44:37,528 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 23:44:44,595 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:44:51,847 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 23:45:01,967 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:45:01,989 products_performance INFO     Cached product list with 19 items: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:45:22,508 apps.products.product_base.signals INFO     Generating slug for product 'kjewjrejv'
2025-06-07 23:45:22,510 apps.products.product_base.signals INFO     Generated slug: kjewjrejv-jqu4
2025-06-07 23:45:22,510 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 23:45:22,514 apps.products.product_base.signals INFO     Generated short code: kjewjrejv-jqu4-BJEAGv-d0443010
2025-06-07 23:45:22,543 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-07 23:45:22,543 apps.products.product_base.signals INFO     Product: kjewjrejv-jqu4-BJEAGv-d0443010, Created: True
2025-06-07 23:45:22,544 products_performance INFO     Invalidated specific caches for product: kjewjrejv-jqu4-BJEAGv-d0443010
2025-06-07 23:45:22,545 products_performance INFO     Looking for keys matching pattern: safetrade:product_base:list:*
2025-06-07 23:45:22,546 products_performance WARNING  No list cache keys found matching pattern: safetrade:product_base:list:*
2025-06-07 23:45:22,548 products_performance INFO     === CACHE DEBUG ===
2025-06-07 23:45:22,549 products_performance INFO     Redis key prefix: 'safetrade'
2025-06-07 23:45:22,549 products_performance INFO     Search pattern: 'safetrade:product_base:list:*'
2025-06-07 23:45:22,550 products_performance INFO     Found 0 existing list keys:
2025-06-07 23:45:22,550 products_performance INFO     Looking for keys matching pattern: safetrade:product_base:list:*
2025-06-07 23:45:22,552 products_performance WARNING  No list cache keys found matching pattern: safetrade:product_base:list:*
2025-06-07 23:45:22,553 products_performance INFO     === AFTER INVALIDATION ===
2025-06-07 23:45:22,555 products_performance INFO     === CACHE DEBUG ===
2025-06-07 23:45:22,555 products_performance INFO     Redis key prefix: 'safetrade'
2025-06-07 23:45:22,555 products_performance INFO     Search pattern: 'safetrade:product_base:list:*'
2025-06-07 23:45:22,556 products_performance INFO     Found 0 existing list keys:
2025-06-07 23:45:22,556 products_performance INFO     Successfully deleted 0 cache keys
2025-06-07 23:45:22,556 apps.products.product_base.signals INFO     Cache invalidation completed for product: kjewjrejv-jqu4-BJEAGv-d0443010
2025-06-07 23:45:24,383 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:52:31,335 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-07 23:52:34,814 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:52:56,964 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:53:50,544 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-07 23:53:53,735 apps.products.product_base.signals INFO     Generating slug for product 'sssssss'
2025-06-07 23:53:53,735 apps.products.product_base.signals INFO     Generated slug: sssssss-9cdd
2025-06-07 23:53:53,735 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 23:53:53,736 apps.products.product_base.signals INFO     Generated short code: sssssss-9cdd-EAnMpd-9dd69ae9
2025-06-07 23:53:53,745 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-07 23:53:53,745 apps.products.product_base.signals INFO     Product: sssssss-9cdd-EAnMpd-9dd69ae9, Created: True
2025-06-07 23:53:53,746 products_performance INFO     Deleting list caches with pattern: product_base:list:*
2025-06-07 23:53:53,764 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-07 23:54:10,110 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:54:12,031 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:57:11,418 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-07 23:57:16,265 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:57:49,737 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-07 23:57:51,785 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-07 23:58:06,124 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:58:24,244 apps.products.product_base.signals INFO     Generating slug for product 'sssssss'
2025-06-07 23:58:24,245 apps.products.product_base.signals INFO     Generated slug: sssssss-7tn1
2025-06-07 23:58:24,246 apps.products.product_base.signals INFO     Generating short code for product
2025-06-07 23:58:24,250 apps.products.product_base.signals INFO     Generated short code: sssssss-7tn1-WwYeUt-8724a3b0
2025-06-07 23:58:24,280 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-07 23:58:24,281 apps.products.product_base.signals INFO     Product: sssssss-7tn1-WwYeUt-8724a3b0, Created: True
2025-06-07 23:58:24,281 products_performance INFO     Deleting list caches with pattern: product_base:list:*
2025-06-07 23:58:24,282 products_performance WARNING   No product list cache keys found to delete
2025-06-07 23:58:24,282 apps.products.product_base.signals INFO     Cache invalidation completed for product: sssssss-7tn1-WwYeUt-8724a3b0
2025-06-07 23:58:26,925 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-07 23:58:30,472 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 04:41:22,886 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-08 04:41:26,121 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 04:41:38,488 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 04:41:41,749 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 04:42:03,375 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 04:42:08,004 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:<built-in function hash>
2025-06-08 04:42:08,025 products_performance INFO     Cached product list with 22 items: safetrade:product_base:list:<built-in function hash>
2025-06-08 04:43:41,920 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-08 04:43:45,064 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 04:43:51,682 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 04:43:51,748 products_performance INFO     Cached product list with 22 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 04:45:32,261 django.request WARNING  Bad Request: /api/v1/products/
2025-06-08 04:46:06,631 apps.products.product_base.signals INFO     Generating slug for product 'kaon'
2025-06-08 04:46:06,632 apps.products.product_base.signals INFO     Generated slug: kaon-qwm5
2025-06-08 04:46:06,633 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 04:46:06,635 apps.products.product_base.signals INFO     Generated short code: kaon-qwm5-j8V4sy-10eb6828
2025-06-08 04:46:06,647 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 04:46:06,648 apps.products.product_base.signals INFO     Product: kaon-qwm5-j8V4sy-10eb6828, Created: True
2025-06-08 04:46:06,648 products_performance INFO     Deleting list caches with pattern
2025-06-08 04:46:06,655 products_performance INFO      Deleted {b'safetrade:product_base:list:bdeae2c90faa', b'safetrade:product_base:list:<built-in function hash>'} list cache keys
2025-06-08 04:46:06,656 apps.products.product_base.signals INFO     Cache invalidation completed for product: kaon-qwm5-j8V4sy-10eb6828
2025-06-08 04:46:10,400 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 04:46:55,522 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 04:48:28,649 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 04:48:32,229 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 04:48:41,204 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 04:49:20,154 apps.products.product_base.signals INFO     Generating slug for product 'jajjage'
2025-06-08 04:49:20,155 apps.products.product_base.signals INFO     Generated slug: jajjage-w7d5
2025-06-08 04:49:20,156 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 04:49:20,160 apps.products.product_base.signals INFO     Generated short code: jajjage-w7d5-KgT7mn-b936c272
2025-06-08 04:49:20,190 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 04:49:20,191 apps.products.product_base.signals INFO     Product: jajjage-w7d5-KgT7mn-b936c272, Created: True
2025-06-08 04:49:20,191 products_performance INFO     Deleting list caches with pattern
2025-06-08 04:49:20,199 products_performance INFO      Deleted {b'safetrade:product_base:list:bdeae2c90faa'} list cache keys
2025-06-08 04:49:20,200 apps.products.product_base.signals INFO     Cache invalidation completed for product: jajjage-w7d5-KgT7mn-b936c272
2025-06-08 04:49:20,201 products_performance INFO     Deleting list caches with pattern
2025-06-08 04:49:20,203 products_performance WARNING   No product list cache keys found to delete
2025-06-08 04:49:25,179 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 04:56:13,593 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:00:12,365 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-08 05:00:23,940 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 05:00:33,837 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:main
2025-06-08 05:00:33,930 products_performance INFO     Cached product list with 24 items: safetrade:product_base:list:main
2025-06-08 05:00:51,463 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 05:00:55,733 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:main
2025-06-08 05:01:24,764 apps.products.product_base.signals INFO     Generating slug for product 'abuja'
2025-06-08 05:01:24,769 apps.products.product_base.signals INFO     Generated slug: abuja-f6lf
2025-06-08 05:01:24,773 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 05:01:24,781 apps.products.product_base.signals INFO     Generated short code: abuja-f6lf-3tAVTd-8f7c2e22
2025-06-08 05:01:24,847 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 05:01:24,850 apps.products.product_base.signals INFO     Product: abuja-f6lf-3tAVTd-8f7c2e22, Created: True
2025-06-08 05:01:24,854 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:01:24,855 apps.products.product_base.signals INFO     Cache invalidation completed for product: abuja-f6lf-3tAVTd-8f7c2e22
2025-06-08 05:01:24,868 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:01:28,631 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:main
2025-06-08 05:01:28,713 products_performance INFO     Cached product list with 25 items: safetrade:product_base:list:main
2025-06-08 05:05:54,780 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-08 05:06:21,573 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 05:06:34,054 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:main
2025-06-08 05:08:46,043 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-08 05:09:05,023 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 05:09:49,980 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:09:50,129 products_performance INFO     Cached product list with 25 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:09:53,976 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 05:10:31,951 apps.products.product_base.signals INFO     Generating slug for product 'ximmr39rvb'
2025-06-08 05:10:31,952 apps.products.product_base.signals INFO     Generated slug: ximmr39rvb-0dud
2025-06-08 05:10:31,952 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 05:10:31,954 apps.products.product_base.signals INFO     Generated short code: ximmr39rvb-0dud-jaTA8a-06b97083
2025-06-08 05:10:31,968 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 05:10:31,968 apps.products.product_base.signals INFO     Product: ximmr39rvb-0dud-jaTA8a-06b97083, Created: True
2025-06-08 05:10:31,969 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:10:31,972 products_performance INFO      Deleted {b'safetrade:product_base:list:bdeae2c90faa'} list cache keys
2025-06-08 05:10:31,973 apps.products.product_base.signals INFO     Cache invalidation completed for product: ximmr39rvb-0dud-jaTA8a-06b97083
2025-06-08 05:10:31,974 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:10:31,977 products_performance INFO      Deleted {b'safetrade:product_base:list:bdeae2c90faa'} list cache keys
2025-06-08 05:10:34,812 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:14:45,736 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-08 05:15:03,303 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 05:15:20,589 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:15:20,595 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:15:48,575 apps.products.product_base.signals INFO     Generating slug for product 'lllala'
2025-06-08 05:15:48,575 apps.products.product_base.signals INFO     Generated slug: lllala-7us9
2025-06-08 05:15:48,575 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 05:15:48,577 apps.products.product_base.signals INFO     Generated short code: lllala-7us9-MzcXmc-f9856ecf
2025-06-08 05:15:48,590 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 05:15:48,590 apps.products.product_base.signals INFO     Product: lllala-7us9-MzcXmc-f9856ecf, Created: True
2025-06-08 05:15:48,591 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:15:48,591 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:15:48,592 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 05:15:48,592 apps.products.product_base.signals INFO     Cache invalidation completed for product: lllala-7us9-MzcXmc-f9856ecf
2025-06-08 05:15:48,593 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:15:48,593 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:15:48,594 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 05:15:51,151 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:15:51,154 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:15:51,194 products_performance INFO     Cached product list with 27 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:16:23,465 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:16:23,466 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:16:29,101 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 05:17:26,786 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:1b1fd35b20e0
2025-06-08 05:17:26,787 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:1b1fd35b20e0
2025-06-08 05:17:26,816 products_performance INFO     Cached product list with 27 items: safetrade:product_base:list:1b1fd35b20e0
2025-06-08 05:18:23,970 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:fb2fd8ee169e
2025-06-08 05:18:23,971 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:fb2fd8ee169e
2025-06-08 05:18:24,011 products_performance INFO     Cached product list with 27 items: safetrade:product_base:list:fb2fd8ee169e
2025-06-08 05:18:24,113 django.request WARNING  Bad Request: /api/v1/products/
2025-06-08 05:18:49,200 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:024ce793013c
2025-06-08 05:18:49,201 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:024ce793013c
2025-06-08 05:18:49,245 products_performance INFO     Cached product list with 27 items: safetrade:product_base:list:024ce793013c
2025-06-08 05:18:49,299 django.request WARNING  Bad Request: /api/v1/products/
2025-06-08 05:20:32,724 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:10156b602d47
2025-06-08 05:20:32,725 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:10156b602d47
2025-06-08 05:20:32,745 products_performance INFO     Cached product list with 27 items: safetrade:product_base:list:10156b602d47
2025-06-08 05:21:04,716 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:39f2b2e25aca
2025-06-08 05:21:04,718 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:39f2b2e25aca
2025-06-08 05:21:04,767 products_performance INFO     Cached product list with 27 items: safetrade:product_base:list:39f2b2e25aca
2025-06-08 05:21:04,858 django.request WARNING  Bad Request: /api/v1/products/
2025-06-08 05:22:49,281 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_list_service.py changed, reloading.
2025-06-08 05:22:53,691 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 05:23:08,139 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:39f2b2e25aca
2025-06-08 05:23:08,144 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:39f2b2e25aca
2025-06-08 05:23:08,715 django.request WARNING  Bad Request: /api/v1/products/
2025-06-08 05:23:17,991 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:024ce793013c
2025-06-08 05:23:17,994 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:024ce793013c
2025-06-08 05:23:18,168 django.request WARNING  Bad Request: /api/v1/products/
2025-06-08 05:23:19,598 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:fb2fd8ee169e
2025-06-08 05:23:19,600 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:fb2fd8ee169e
2025-06-08 05:23:19,778 django.request WARNING  Bad Request: /api/v1/products/
2025-06-08 05:23:24,908 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:23:24,911 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:23:47,486 apps.products.product_base.signals INFO     Generating slug for product 'ooeoeoeo'
2025-06-08 05:23:47,488 apps.products.product_base.signals INFO     Generated slug: ooeoeoeo-btyw
2025-06-08 05:23:47,488 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 05:23:47,492 apps.products.product_base.signals INFO     Generated short code: ooeoeoeo-btyw-fWgH97-31670993
2025-06-08 05:23:47,522 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 05:23:47,523 apps.products.product_base.signals INFO     Product: ooeoeoeo-btyw-fWgH97-31670993, Created: True
2025-06-08 05:23:47,526 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:23:47,528 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:23:47,532 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 05:23:47,533 products_performance WARNING   No product list cache keys found to delete
2025-06-08 05:23:47,534 apps.products.product_base.signals INFO     Cache invalidation completed for product: ooeoeoeo-btyw-fWgH97-31670993
2025-06-08 05:23:47,535 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:23:47,537 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:23:47,539 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 05:23:47,540 products_performance WARNING   No product list cache keys found to delete
2025-06-08 05:23:50,210 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:23:50,213 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:23:50,275 products_performance INFO     Cached product list with 28 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:25:54,639 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:25:54,641 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:27:29,261 django.utils.autoreload INFO     /workspaces/apps/products/product_base/utils/product_filters.py changed, reloading.
2025-06-08 05:27:43,224 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 05:27:56,582 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:27:56,584 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:28:06,534 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:28:06,535 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:28:55,190 django.utils.autoreload INFO     /workspaces/apps/products/product_base/utils/product_filters.py changed, reloading.
2025-06-08 05:29:14,810 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 05:29:40,644 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:e32a0cec4dce
2025-06-08 05:29:40,658 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:e32a0cec4dce
2025-06-08 05:29:41,110 products_performance INFO     Cached product list with 0 items: safetrade:product_base:list:e32a0cec4dce
2025-06-08 05:29:47,370 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:e32a0cec4dce
2025-06-08 05:29:47,373 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:e32a0cec4dce
2025-06-08 05:29:59,870 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:e32a0cec4dce
2025-06-08 05:29:59,874 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:e32a0cec4dce
2025-06-08 05:30:30,786 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:30:30,788 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:30:42,903 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:30:42,904 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:30:51,774 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:30:51,775 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:31:02,363 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:31:02,365 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:31:12,967 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:31:12,969 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:31:45,678 django.utils.autoreload INFO     /workspaces/apps/products/product_base/utils/product_filters.py changed, reloading.
2025-06-08 05:31:56,547 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 05:32:16,109 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:32:16,123 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:33:16,546 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:31cb4ed68327
2025-06-08 05:33:16,549 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:31cb4ed68327
2025-06-08 05:33:16,661 products_performance INFO     Cached product list with 1 items: safetrade:product_base:list:31cb4ed68327
2025-06-08 05:33:34,824 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 05:33:34,825 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 05:33:34,874 products_performance INFO     Cached product list with 2 items: safetrade:product_base:list:2bba1962b351
2025-06-08 05:33:42,810 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:dbbf075998f5
2025-06-08 05:33:42,812 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:dbbf075998f5
2025-06-08 05:33:42,944 products_performance INFO     Cached product list with 0 items: safetrade:product_base:list:dbbf075998f5
2025-06-08 05:33:53,758 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:3090279b20d9
2025-06-08 05:33:53,759 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:3090279b20d9
2025-06-08 05:33:53,798 products_performance INFO     Cached product list with 0 items: safetrade:product_base:list:3090279b20d9
2025-06-08 05:34:09,574 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:70034ea25819
2025-06-08 05:34:09,576 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:70034ea25819
2025-06-08 05:34:09,626 products_performance INFO     Cached product list with 1 items: safetrade:product_base:list:70034ea25819
2025-06-08 05:34:58,411 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 05:34:58,412 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 05:35:26,899 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 05:35:29,015 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 05:35:29,017 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 05:36:40,207 apps.products.product_base.signals INFO     Generating slug for product 'cache ddel'
2025-06-08 05:36:40,210 apps.products.product_base.signals INFO     Generated slug: cache-ddel-ih92
2025-06-08 05:36:40,211 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 05:36:40,221 apps.products.product_base.signals INFO     Generated short code: cache-ddel-ih92-A5EtoO-11e3d220
2025-06-08 05:36:40,285 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 05:36:40,286 apps.products.product_base.signals INFO     Product: cache-ddel-ih92-A5EtoO-11e3d220, Created: True
2025-06-08 05:36:40,287 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:36:40,290 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:36:40,291 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 05:36:40,292 products_performance WARNING   No product list cache keys found to delete
2025-06-08 05:36:40,292 apps.products.product_base.signals INFO     Cache invalidation completed for product: cache-ddel-ih92-A5EtoO-11e3d220
2025-06-08 05:36:40,293 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:36:40,294 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:36:40,295 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 05:36:40,296 products_performance WARNING   No product list cache keys found to delete
2025-06-08 05:36:43,614 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 05:36:43,617 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 05:36:53,594 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:36:53,596 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:36:53,634 products_performance INFO     Cached product list with 29 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:37:56,779 apps.products.product_base.signals INFO     Generating slug for product 'wuueur'
2025-06-08 05:37:56,780 apps.products.product_base.signals INFO     Generated slug: wuueur-n0gd
2025-06-08 05:37:56,781 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 05:37:56,785 apps.products.product_base.signals INFO     Generated short code: wuueur-n0gd-GhNl6Z-a585b844
2025-06-08 05:37:56,809 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 05:37:56,810 apps.products.product_base.signals INFO     Product: wuueur-n0gd-GhNl6Z-a585b844, Created: True
2025-06-08 05:37:56,810 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:37:56,812 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:37:56,815 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 05:37:56,819 products_performance WARNING   No product list cache keys found to delete
2025-06-08 05:37:56,820 apps.products.product_base.signals INFO     Cache invalidation completed for product: wuueur-n0gd-GhNl6Z-a585b844
2025-06-08 05:37:56,821 products_performance INFO     Deleting list caches with pattern
2025-06-08 05:37:56,824 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:37:56,826 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 05:37:56,827 products_performance WARNING   No product list cache keys found to delete
2025-06-08 05:37:58,911 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:37:58,914 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:37:58,976 products_performance INFO     Cached product list with 30 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 05:40:36,985 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-4hh4-qAl9Hm-ebe0ab66
2025-06-08 05:40:36,987 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-4hh4-qAl9Hm-ebe0ab66
2025-06-08 10:04:58,787 products_performance WARNING  Product not found by shortcode: lenevo-4hh4-qAl9Hm-ebe0ab66
2025-06-08 10:04:58,856 django.request WARNING  Not Found: /api/v1/products-short-code/lenevo-4hh4-qAl9Hm-ebe0ab66/
2025-06-08 10:05:05,289 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:05:05,291 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:05:05,399 products_performance INFO     Cached product list with 0 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:12:21,111 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-08 10:12:25,307 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:15:31,657 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-08 10:15:38,179 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:16:38,609 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:16:38,610 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:16:38,646 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:16:38,646 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:20:02,050 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 10:20:06,903 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:20:06,904 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:20:06,921 products_performance INFO     Cached product list with 0 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:20:06,981 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:20:06,983 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:20:14,217 products_performance WARNING  Product not found by shortcode: lenevo-4hh4-qAl9Hm-ebe0ab66
2025-06-08 10:20:14,297 django.request WARNING  Not Found: /api/v1/products-short-code/lenevo-4hh4-qAl9Hm-ebe0ab66/
2025-06-08 10:21:00,463 products_performance WARNING  Product not found by shortcode: lenevo-thinkpad-jugk-ODkikx-7bcf7d03
2025-06-08 10:21:00,511 django.request WARNING  Not Found: /api/v1/products-short-code/lenevo-thinkpad-jugk-ODkikx-7bcf7d03/
2025-06-08 10:21:03,052 products_performance WARNING  Product not found by shortcode: lenevo-4hh4-qAl9Hm-ebe0ab66
2025-06-08 10:21:03,129 django.request WARNING  Not Found: /api/v1/products-short-code/lenevo-4hh4-qAl9Hm-ebe0ab66/
2025-06-08 10:24:37,320 django.utils.autoreload INFO     /workspaces/apps/core/pagination.py changed, reloading.
2025-06-08 10:24:40,615 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:24:55,148 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-08 10:24:58,109 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:25:12,210 django.utils.autoreload INFO     /workspaces/apps/products/product_brand/views.py changed, reloading.
2025-06-08 10:25:23,456 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:25:32,355 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo ThinkPad'
2025-06-08 10:25:32,357 apps.products.product_base.signals INFO     Generated slug: lenevo-thinkpad-w857
2025-06-08 10:25:32,358 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 10:25:32,364 apps.products.product_base.signals INFO     Generated short code: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 10:25:32,466 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 10:25:32,467 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-w857-DYKyuA-06d23209, Created: True
2025-06-08 10:25:32,470 products_performance INFO     Deleting list caches with pattern
2025-06-08 10:25:32,486 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:25:32,491 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 10:25:32,492 products_performance WARNING   No product list cache keys found to delete
2025-06-08 10:25:32,493 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 10:25:32,493 products_performance INFO     Deleting list caches with pattern
2025-06-08 10:25:32,496 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:25:32,497 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 10:25:32,498 products_performance WARNING   No product list cache keys found to delete
2025-06-08 10:25:35,687 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:25:35,689 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:25:35,747 products_performance INFO     Cached product list with 1 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:25:35,917 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:25:35,919 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:25:58,580 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 10:25:58,582 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 10:27:22,325 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-08 10:27:26,133 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:27:37,172 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-08 10:27:40,202 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:34:56,503 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-08 10:34:59,891 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:35:26,064 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:36:29,879 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-08 10:36:32,753 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:44:26,192 django.request ERROR    Internal Server Error: /api/v1/products-short-code/lenevo-thinkpad-w857-DYKyuA-06d23209/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 437, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 104, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'Category' object has no attribute 'parent_name'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 222, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 38, in retrieve_by_shortcode
    serialized_data = serializer.data
                      ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 375, in to_representation
    data = super().to_representation(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 527, in to_representation
    attribute = field.get_attribute(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 470, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `parent_name` on serializer `CategorySummarySerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `Category` instance.
Original exception text was: 'Category' object has no attribute 'parent_name'.
2025-06-08 10:45:07,423 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-08 10:45:10,617 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:45:15,665 django.request ERROR    Internal Server Error: /api/v1/products-short-code/lenevo-thinkpad-w857-DYKyuA-06d23209/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 437, in get_attribute
    return get_attribute(instance, self.source_attrs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 104, in get_attribute
    instance = getattr(instance, attr)
AttributeError: 'Category' object has no attribute 'subcategories_count'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 222, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 38, in retrieve_by_shortcode
    serialized_data = serializer.data
                      ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 375, in to_representation
    data = super().to_representation(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 527, in to_representation
    attribute = field.get_attribute(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 470, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `subcategories_count` on serializer `CategorySummarySerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `Category` instance.
Original exception text was: 'Category' object has no attribute 'subcategories_count'.
2025-06-08 10:45:36,089 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-08 10:45:38,639 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:45:56,396 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-08 10:45:59,910 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:46:04,962 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 10:46:04,963 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 10:47:54,054 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-08 10:47:56,863 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:48:16,087 django.utils.autoreload INFO     /workspaces/apps/categories/models.py changed, reloading.
2025-06-08 10:48:19,195 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:48:52,828 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 10:48:58,706 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo ThinkPad Yoga'
2025-06-08 10:48:58,709 apps.products.product_base.signals INFO     Generated slug: lenevo-thinkpad-yoga-t7w2
2025-06-08 10:48:58,709 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 10:48:58,714 apps.products.product_base.signals INFO     Generated short code: lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-08 10:48:58,752 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 10:48:58,753 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496, Created: True
2025-06-08 10:48:58,754 products_performance INFO     Deleting list caches with pattern
2025-06-08 10:48:58,757 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:48:58,761 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 10:48:58,762 products_performance WARNING   No product list cache keys found to delete
2025-06-08 10:48:58,765 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-08 10:48:58,766 products_performance INFO     Deleting list caches with pattern
2025-06-08 10:48:58,769 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:48:58,771 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 10:48:58,773 products_performance WARNING   No product list cache keys found to delete
2025-06-08 10:49:01,437 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:49:01,440 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:49:01,494 products_performance INFO     Cached product list with 2 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:49:01,648 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:49:01,649 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:49:24,455 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-08 10:49:24,457 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-08 10:50:30,311 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-08 10:50:32,021 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:51:20,546 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-08 10:51:22,113 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 10:55:50,049 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 10:55:54,423 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo IdeaPad'
2025-06-08 10:55:54,424 apps.products.product_base.signals INFO     Generated slug: lenevo-ideapad-55wu
2025-06-08 10:55:54,424 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 10:55:54,425 apps.products.product_base.signals INFO     Generated short code: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-08 10:55:54,434 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 10:55:54,434 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: True
2025-06-08 10:55:54,435 products_performance INFO     Deleting list caches with pattern
2025-06-08 10:55:54,435 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:55:54,436 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 10:55:54,436 products_performance WARNING   No product list cache keys found to delete
2025-06-08 10:55:54,436 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-08 10:55:54,436 products_performance INFO     Deleting list caches with pattern
2025-06-08 10:55:54,437 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:55:54,437 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 10:55:54,437 products_performance WARNING   No product list cache keys found to delete
2025-06-08 10:55:56,864 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:55:56,865 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:55:56,873 products_performance INFO     Cached product list with 3 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:55:56,984 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:55:56,984 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 10:56:30,472 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-08 10:56:30,474 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-08 11:27:14,931 django.utils.autoreload INFO     /workspaces/apps/categories/serializers.py changed, reloading.
2025-06-08 11:27:17,395 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:28:09,010 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 11:28:14,230 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo Yoga 360'
2025-06-08 11:28:14,230 apps.products.product_base.signals INFO     Generated slug: lenevo-yoga-360-3ui3
2025-06-08 11:28:14,231 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 11:28:14,232 apps.products.product_base.signals INFO     Generated short code: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 11:28:14,244 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 11:28:14,244 apps.products.product_base.signals INFO     Product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5, Created: True
2025-06-08 11:28:14,244 products_performance INFO     Deleting list caches with pattern
2025-06-08 11:28:14,245 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:28:14,245 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 11:28:14,245 products_performance WARNING   No product list cache keys found to delete
2025-06-08 11:28:14,245 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 11:28:14,246 products_performance INFO     Deleting list caches with pattern
2025-06-08 11:28:14,246 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:28:14,247 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 11:28:14,247 products_performance WARNING   No product list cache keys found to delete
2025-06-08 11:28:39,016 django.utils.autoreload INFO     /workspaces/apps/categories/models.py changed, reloading.
2025-06-08 11:28:41,042 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:28:46,257 django.utils.autoreload INFO     /workspaces/apps/categories/models.py changed, reloading.
2025-06-08 11:28:48,634 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:28:57,738 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-08 11:28:59,482 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:29:24,889 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-08 11:29:31,702 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:29:54,261 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:29:54,261 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:29:54,275 products_performance INFO     Cached product list with 4 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:29:54,328 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:29:54,329 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:30:11,294 apps.products.product_base.signals INFO     Generating slug for product 'Lenevo Yoga A2'
2025-06-08 11:30:11,295 apps.products.product_base.signals INFO     Generated slug: lenevo-yoga-a2-5hur
2025-06-08 11:30:11,295 apps.products.product_base.signals INFO     Generating short code for product
2025-06-08 11:30:11,296 apps.products.product_base.signals INFO     Generated short code: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 11:30:11,309 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 11:30:11,310 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: True
2025-06-08 11:30:11,310 products_performance INFO     Deleting list caches with pattern
2025-06-08 11:30:11,311 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:30:11,312 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 11:30:11,312 products_performance WARNING   No product list cache keys found to delete
2025-06-08 11:30:11,312 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 11:30:11,313 products_performance INFO     Deleting list caches with pattern
2025-06-08 11:30:11,314 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:30:11,314 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 11:30:11,315 products_performance WARNING   No product list cache keys found to delete
2025-06-08 11:30:14,383 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:30:14,384 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:30:14,392 products_performance INFO     Cached product list with 5 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:30:14,437 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:30:14,438 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 11:30:38,299 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 11:30:38,300 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 11:33:25,675 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-08 11:33:28,646 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:33:34,814 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-08 11:33:40,518 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:34:23,035 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-08 11:34:24,590 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:34:47,946 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:35:08,770 django.utils.autoreload INFO     /workspaces/apps/users/models/user_profile.py changed, reloading.
2025-06-08 11:35:10,412 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:35:16,059 django.utils.autoreload INFO     /workspaces/apps/users/models/user_profile.py changed, reloading.
2025-06-08 11:35:18,268 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:35:35,828 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-08 11:35:39,118 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:35:42,920 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-08 11:35:44,931 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:36:21,261 django.utils.autoreload INFO     /workspaces/apps/comments/models.py changed, reloading.
2025-06-08 11:36:23,974 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:36:41,695 django.utils.autoreload INFO     /workspaces/apps/store/models.py changed, reloading.
2025-06-08 11:36:43,265 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:36:54,129 django.utils.autoreload INFO     /workspaces/apps/disputes/models.py changed, reloading.
2025-06-08 11:36:56,913 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:37:12,136 django.utils.autoreload INFO     /workspaces/apps/disputes/models.py changed, reloading.
2025-06-08 11:37:13,493 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:37:45,613 django.utils.autoreload INFO     /workspaces/apps/products/product_base/models.py changed, reloading.
2025-06-08 11:37:47,416 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:38:06,157 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-08 11:38:08,720 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:40:07,258 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:40:33,416 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-08 11:40:35,524 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:41:44,278 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:49:49,542 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-08 11:49:54,745 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:51:05,892 django.utils.autoreload INFO     /workspaces/apps/core/utils/breadcrumbs.py changed, reloading.
2025-06-08 11:51:09,491 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:52:34,467 django.utils.autoreload INFO     /workspaces/apps/core/utils/breadcrumbs.py changed, reloading.
2025-06-08 11:52:38,874 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:53:36,943 django.utils.autoreload INFO     /workspaces/apps/core/utils/breadcrumbs.py changed, reloading.
2025-06-08 11:53:41,254 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:54:32,154 django.utils.autoreload INFO     /workspaces/apps/core/utils/breadcrumbs.py changed, reloading.
2025-06-08 11:54:37,139 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:55:52,486 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-08 11:55:55,941 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 11:57:53,301 django.utils.autoreload INFO     /workspaces/apps/products/product_watchlist/serializers.py changed, reloading.
2025-06-08 11:57:56,015 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 12:02:08,891 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-08 12:02:11,348 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:34:17,292 django.request ERROR    Internal Server Error: /api/v1/products-short-code/lenevo-yoga-a2-5hur-ArmyAx-2681799d/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 222, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 38, in retrieve_by_shortcode
    serialized_data = serializer.data
                      ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 376, in to_representation
    data = super().to_representation(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 1870, in to_representation
    return method(value)
  File "/workspaces/apps/products/product_base/serializers.py", line 342, in get_breadcrumbs
    breadcrumb_data = service.for_product(obj, include_brand=True)
  File "/workspaces/apps/core/utils/breadcrumbs.py", line 22, in for_product
    name=BreadcrumbService.home_name,
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'BreadcrumbService' has no attribute 'home_name'
2025-06-08 16:35:25,894 django.request ERROR    Internal Server Error: /api/v1/products-short-code/lenevo-yoga-a2-5hur-ArmyAx-2681799d/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 222, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 38, in retrieve_by_shortcode
    serialized_data = serializer.data
                      ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 376, in to_representation
    data = super().to_representation(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 1870, in to_representation
    return method(value)
  File "/workspaces/apps/products/product_base/serializers.py", line 342, in get_breadcrumbs
    breadcrumb_data = service.for_product(obj, include_brand=True)
  File "/workspaces/apps/core/utils/breadcrumbs.py", line 22, in for_product
    name=BreadcrumbService.home_name,
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'BreadcrumbService' has no attribute 'home_name'
2025-06-08 16:37:14,331 django.utils.autoreload INFO     /workspaces/apps/core/utils/breadcrumbs.py changed, reloading.
2025-06-08 16:37:16,593 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:38:47,584 django.utils.autoreload INFO     /workspaces/apps/core/utils/breadcrumbs.py changed, reloading.
2025-06-08 16:38:50,244 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:38:58,258 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 16:38:58,259 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 16:39:37,369 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 16:40:53,761 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 16:40:53,764 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 16:40:53,766 products_performance INFO     Deleting list caches with pattern
2025-06-08 16:40:53,772 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 16:40:53,778 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 16:40:53,779 products_performance WARNING   No product list cache keys found to delete
2025-06-08 16:40:53,781 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 16:40:53,784 products_performance INFO     Deleting list caches with pattern
2025-06-08 16:40:53,788 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 16:40:53,796 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 16:40:53,799 products_performance WARNING   No product list cache keys found to delete
2025-06-08 16:45:16,203 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 16:45:17,871 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:45:41,476 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 16:45:41,476 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 16:45:41,476 products_performance INFO     Deleting list caches with pattern
2025-06-08 16:45:41,477 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 16:45:41,477 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 16:45:41,478 products_performance WARNING   No product list cache keys found to delete
2025-06-08 16:45:41,478 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 16:45:41,478 apps.products.product_base.signals INFO     Cache invalidated for deleted product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 16:45:41,478 products_performance INFO     Deleting list caches with pattern
2025-06-08 16:45:41,479 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 16:45:41,479 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 16:45:41,479 products_performance WARNING   No product list cache keys found to delete
2025-06-08 16:47:48,242 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 16:47:50,015 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:48:00,086 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 16:48:01,990 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:48:39,644 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 16:48:39,645 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 16:48:39,645 products_performance INFO     Deleting list caches with pattern
2025-06-08 16:48:39,645 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 16:48:39,646 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 16:48:39,646 products_performance WARNING   No product list cache keys found to delete
2025-06-08 16:48:39,646 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 16:48:39,646 products_performance INFO     Deleting list caches with pattern
2025-06-08 16:48:39,647 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 16:48:39,647 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 16:48:39,647 products_performance WARNING   No product list cache keys found to delete
2025-06-08 16:49:15,825 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 16:49:17,603 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:50:42,217 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 16:50:57,759 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-08 16:50:57,760 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-08 16:55:01,900 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 16:55:05,163 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:55:19,526 django.utils.autoreload INFO     /workspaces/apps/core/utils/breadcrumbs.py changed, reloading.
2025-06-08 16:55:23,140 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:55:48,469 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 16:55:48,471 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 16:56:39,104 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-08 16:56:41,884 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 16:57:07,654 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-08 16:57:10,271 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:00:04,683 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:00:07,568 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:00:57,298 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:01:00,069 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:02:14,441 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:02:17,043 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:02:57,034 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:03:00,154 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:03:22,308 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:03:25,012 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:04:33,404 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-08 17:04:36,473 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:05:01,649 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:05:04,449 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:05:56,781 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:05:56,783 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:05:56,861 products_performance INFO     Cached product list with 5 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:05:57,177 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:05:57,179 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:05:58,566 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 17:05:58,570 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 17:05:58,714 products_performance INFO     Cached product list with 2 items: safetrade:product_base:list:2bba1962b351
2025-06-08 17:05:58,794 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 17:05:58,796 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:2bba1962b351
2025-06-08 17:06:20,801 products_performance INFO     Cached product detail by shortcode: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:06:20,904 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:06:20,906 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:07:56,688 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:07:59,501 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:08:30,140 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:08:33,173 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:09:01,793 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:09:04,770 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:09:08,096 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 17:10:08,121 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:10:08,122 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-w857-DYKyuA-06d23209, Created: False
2025-06-08 17:10:08,122 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:10:08,124 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:10:08,126 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 17:10:08,127 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:10:08,128 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:10:08,183 django.request ERROR    Internal Server Error: /api/v1/products/bc179d30-efb4-46f3-9a95-1b02fe8f7d9b/
2025-06-08 17:11:09,179 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:11:12,533 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:11:40,993 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:11:40,994 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-w857-DYKyuA-06d23209, Created: False
2025-06-08 17:11:40,995 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:11:40,998 products_performance INFO     Deleted single key: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:11:41,001 products_performance INFO      Deleted safetrade:product_base:list:bdeae2c90faa list cache keys
2025-06-08 17:11:41,002 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:11:41,002 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:11:41,034 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:11:41,036 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:12:53,776 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:12:57,172 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:13:05,990 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:13:05,991 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-w857-DYKyuA-06d23209, Created: False
2025-06-08 17:13:05,992 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:13:05,994 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:13:05,994 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:13:05,997 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:13:06,000 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:13:52,107 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:13:56,789 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:14:07,867 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:14:07,868 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-w857-DYKyuA-06d23209, Created: False
2025-06-08 17:14:07,869 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:14:07,871 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:14:07,872 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:14:07,874 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:14:07,876 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:20:24,474 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 17:20:27,879 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:20:57,453 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:21:44,085 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:21:44,086 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-w857-DYKyuA-06d23209, Created: False
2025-06-08 17:21:44,087 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:21:44,089 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:21:44,090 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:21:44,093 apps.products.product_base.signals INFO     Cache invalidated for update product: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:21:44,096 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:21:44,107 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:21:49,401 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:21:49,405 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 17:22:43,127 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:22:46,315 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:22:50,368 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 17:22:59,471 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:22:59,473 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:22:59,487 products_performance INFO     Cached product list with 5 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:22:59,574 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:22:59,575 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:23:02,372 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:23:02,374 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:23:02,815 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:23:02,817 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:24:05,095 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:24:05,097 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:24:43,443 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:24:43,443 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 17:24:43,443 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:24:43,444 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:24:43,444 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:24:43,444 apps.products.product_base.signals INFO     Cache invalidated for update product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:25:33,138 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:25:33,138 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:25:33,236 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:25:33,236 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:26:06,741 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:26:08,545 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:27:31,837 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:27:31,838 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 17:27:31,838 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:27:31,838 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:27:31,838 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:27:31,839 apps.products.product_base.signals INFO     Cache invalidated for update product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:27:31,839 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:27:31,840 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:27:54,916 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:27:54,917 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:27:55,015 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:27:55,015 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:28:39,460 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 17:29:11,629 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:29:11,629 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 17:29:11,629 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:29:11,630 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:29:11,630 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:29:11,630 apps.products.product_base.signals INFO     Cache invalidated for update product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:29:11,631 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:29:11,631 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:29:36,906 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:29:36,907 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:29:37,001 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:29:37,002 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:34:41,902 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:34:43,949 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:34:53,380 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:34:55,284 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:35:34,446 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:35:34,446 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 17:35:34,447 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:35:34,448 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:35:34,448 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:35:34,449 apps.products.product_base.signals INFO     Cache invalidated for update product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:35:34,449 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:35:34,450 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:36:19,287 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:36:19,288 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:36:19,376 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:36:19,377 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:41:08,094 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 17:41:12,139 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:42:18,271 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 17:42:20,036 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:42:30,242 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 17:42:32,453 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:42:37,321 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:42:37,322 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:42:54,704 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 17:42:58,854 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:42:58,854 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:42:58,868 products_performance INFO     Cached product list with 5 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:42:58,993 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:42:58,995 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:43:39,914 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:43:39,915 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 17:43:39,915 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:43:39,915 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:43:39,916 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:43:39,916 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:43:39,916 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:43:39,917 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:44:04,122 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:44:04,122 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:44:04,216 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:44:04,216 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 17:46:04,583 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 17:46:06,121 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 17:46:37,269 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 17:46:37,270 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 17:46:37,270 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:46:37,271 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:46:37,271 products_performance WARNING   No product list cache keys found to delete
2025-06-08 17:46:37,271 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 17:46:37,272 products_performance INFO     Deleting list caches with pattern
2025-06-08 17:46:37,272 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:08:27,280 django.request ERROR    Internal Server Error: /api/v1/products/d09c6fb8-27ff-4297-a09b-dd0fc927fe36/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 198, in _retrieve_logic
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 87, in get_object
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 98, in get_queryset
    base_queryset = base_queryset.filter(seller=self.request.user)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-08 18:08:33,182 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 18:08:35,745 django.request WARNING  Method Not Allowed: /api/v1/auth/refresh/
2025-06-08 18:13:53,144 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 18:13:56,385 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:14:01,706 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 18:14:04,450 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:14:26,714 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 18:14:26,717 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 18:14:36,815 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 18:14:36,816 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 18:14:36,818 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 18:14:36,819 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:14:36,821 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:14:36,822 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 18:14:36,825 products_performance INFO     Deleted data cache key: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 18:14:36,829 products_performance WARNING  No page cache key found to delete!
2025-06-08 18:14:36,830 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:14:36,834 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:21:02,777 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-08 18:21:06,203 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:22:18,774 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 18:22:26,070 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:22:47,921 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 18:22:54,382 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:23:34,539 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 18:24:00,421 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 18:24:00,421 apps.products.product_base.signals INFO     Product: lenevo-yoga-a2-5hur-ArmyAx-2681799d, Created: False
2025-06-08 18:24:00,421 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 18:24:00,422 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:24:00,422 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:24:00,422 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 18:24:00,423 products_performance INFO     Invalidated product cache: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 18:24:00,423 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:24:00,423 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:24:00,423 products_performance INFO     Deleted cache key: safetrade:product_base:detail_by_shortcode:lenevo-yoga-a2-5hur-ArmyAx-2681799d
2025-06-08 18:25:50,126 django.utils.autoreload INFO     /workspaces/apps/core/utils/cache_key_manager.py changed, reloading.
2025-06-08 18:25:51,960 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:26:06,569 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 18:26:06,569 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-08 18:26:13,094 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-08 18:26:13,095 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-08 18:26:14,310 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-08 18:26:14,310 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-08 18:26:17,980 products_performance WARNING  Product not found by shortcode: lenevo-4hh4-qAl9Hm-ebe0ab66
2025-06-08 18:26:17,985 django.request WARNING  Not Found: /api/v1/products-short-code/lenevo-4hh4-qAl9Hm-ebe0ab66/
2025-06-08 18:26:23,737 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 18:26:23,738 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 18:26:23,746 products_performance INFO     Cached product list with 5 items: safetrade:product_base:list:bdeae2c90faa
2025-06-08 18:26:23,858 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 18:26:23,858 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-08 18:26:40,586 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:26:40,587 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:27:50,500 django.request WARNING  Not Found: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c7093/
2025-06-08 18:29:04,009 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-08 18:29:05,740 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:29:28,149 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 18:29:28,150 apps.products.product_base.signals INFO     Product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5, Created: False
2025-06-08 18:29:28,150 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:29:28,150 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:29:28,151 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:29:28,151 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:29:28,152 products_performance INFO     Invalidated product cache: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:29:28,152 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:29:28,152 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:29:28,153 products_performance INFO     Deleted cache key: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:31:31,064 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:32:14,305 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 18:32:14,305 apps.products.product_base.signals INFO     Product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5, Created: False
2025-06-08 18:32:14,306 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:32:14,306 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:32:14,306 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:32:14,307 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:32:14,308 products_performance INFO     Invalidated product cache: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:32:14,308 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:32:14,308 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:32:14,309 products_performance INFO     Deleted cache key: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:35:42,936 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 18:35:44,749 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:35:48,325 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:35:48,325 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:35:50,917 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:35:52,294 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:35:53,238 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:36:14,514 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 18:36:35,469 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 18:36:35,469 apps.products.product_base.signals INFO     Product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5, Created: False
2025-06-08 18:36:35,469 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:36:35,470 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:36:35,470 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:36:35,470 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:36:35,471 products_performance INFO     Invalidated product cache: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:36:35,471 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:36:35,471 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:36:35,471 products_performance INFO     Deleted cache key: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:36:39,810 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:36:39,811 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:37:32,695 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 18:37:34,302 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:38:14,828 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 18:38:16,507 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:39:55,259 django.utils.autoreload INFO     /workspaces/apps/products/product_base/services/product_detail_service.py changed, reloading.
2025-06-08 18:39:57,083 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:40:51,273 django.request WARNING  Bad Request: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
2025-06-08 18:41:07,637 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:41:12,990 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 18:41:12,990 apps.products.product_base.signals INFO     Product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5, Created: False
2025-06-08 18:41:12,991 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:41:12,991 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:41:12,992 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:41:12,992 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:41:12,993 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:41:12,994 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:41:12,995 products_performance INFO     Deleted cache key: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:41:16,907 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:41:16,908 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:42:16,076 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 18:42:18,081 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:42:36,372 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-08 18:42:38,766 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:43:05,473 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-08 18:43:05,473 apps.products.product_base.signals INFO     Product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5, Created: False
2025-06-08 18:43:05,474 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:43:05,474 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:43:05,475 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:43:05,475 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:43:05,475 products_performance INFO     Deleting list caches with pattern
2025-06-08 18:43:05,476 products_performance WARNING   No product list cache keys found to delete
2025-06-08 18:43:05,476 products_performance INFO     Deleted cache key: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:43:11,214 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:43:11,214 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 18:43:58,023 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-08 18:43:59,861 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:48:19,275 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/urls.py changed, reloading.
2025-06-08 18:48:20,906 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 18:49:10,846 django.request ERROR    Internal Server Error: /api/v1/products/my-products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 188, in _view_wrapper
    result = _process_exception(request, e)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 186, in _view_wrapper
    response = view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 146, in my_products
    return ProductMyService.get_my_products(self, request)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/services/product_my_service.py", line 38, in get_my_products
    view.logger.info(f"Cached my products: {cache_key}")
    ^^^^^^^^^^^
AttributeError: 'ProductViewSet' object has no attribute 'logger'
2025-06-08 18:49:22,969 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 18:50:19,424 django.request WARNING  Bad Request: /api/v1/details/
2025-06-08 19:10:14,816 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/models.py changed, reloading.
2025-06-08 19:10:19,248 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:26:10,806 django.request WARNING  Bad Request: /api/v1/details/
2025-06-08 19:37:53,677 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 19:37:58,439 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:38:16,581 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 19:38:19,914 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:42:53,808 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 19:42:56,774 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:43:18,403 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 19:43:21,251 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:43:27,126 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 19:43:30,377 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:44:47,901 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-08 19:44:50,509 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:46:42,911 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/urls.py changed, reloading.
2025-06-08 19:46:49,878 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:47:10,383 django.request WARNING  Not Found: /api/v1/etail-templates/
2025-06-08 19:47:28,717 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 19:55:17,282 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-08 19:55:20,560 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:56:54,108 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/serializers.py changed, reloading.
2025-06-08 19:56:57,256 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 19:57:10,444 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 19:58:53,058 django.request WARNING  Bad Request: /api/v1/detail-templates/
2025-06-08 20:02:19,111 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 20:02:22,792 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 20:06:16,053 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-08 20:06:19,305 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 20:31:23,766 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-08 20:31:27,946 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 20:36:08,003 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 20:36:16,794 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 20:36:35,003 django.request WARNING  Not Found: /api/v1/detail/
2025-06-08 20:36:40,569 django.request WARNING  Bad Request: /api/v1/details/
2025-06-08 20:39:09,795 django.request WARNING  Not Found: /api/v1/detail/
2025-06-08 20:39:23,683 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-08 20:39:27,250 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 20:39:48,070 django.request WARNING  Method Not Allowed: /api/v1/detail-templates/bulk_create/
2025-06-08 20:40:23,261 django.request ERROR    Internal Server Error: /api/v1/detail-templates/bulk_create/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_detail/views.py", line 260, in bulk_create
    templates = ProductDetailService.bulk_create_templates(
        serializer.validated_data["templates"]
    )
  File "/workspaces/apps/products/product_detail/services.py", line 332, in bulk_create_templates
    CacheManager.invalidate(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        "product_detail", "category", category_id=category.id
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: CacheManager.invalidate() takes 1 positional argument but 2 were given
2025-06-08 20:42:45,394 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 20:42:48,986 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 20:42:54,798 django.request WARNING  Method Not Allowed: /api/v1/detail-templates/bulk_create/
2025-06-08 20:43:02,600 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 20:43:07,179 django.request WARNING  Bad Request: /api/v1/detail-templates/bulk_create/
2025-06-08 20:52:27,532 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/models.py changed, reloading.
2025-06-08 20:52:30,764 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 20:55:06,510 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/models.py changed, reloading.
2025-06-08 20:55:09,686 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 20:55:57,771 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 20:56:04,479 django.request WARNING  Bad Request: /api/v1/detail-templates/bulk_create/
2025-06-08 21:01:23,299 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/models.py changed, reloading.
2025-06-08 21:01:27,034 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 21:01:42,515 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 21:01:51,028 django.request WARNING  Bad Request: /api/v1/detail-templates/bulk_create/
2025-06-08 21:03:00,378 django.request WARNING  Not Found: /api/v1/products/4014697c-b177-4523-b12d-b6c6720cd9f5/place-in-escrow/
2025-06-08 21:03:09,758 django.request WARNING  Bad Request: /api/v1/details/
2025-06-08 21:05:11,575 django.request WARNING  Bad Request: /api/v1/details/
2025-06-08 21:05:27,860 django.request WARNING  Bad Request: /api/v1/details/
2025-06-08 22:12:39,273 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/models.py changed, reloading.
2025-06-08 22:12:41,240 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 22:55:01,588 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 22:55:09,354 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 22:58:53,303 django.request WARNING  Bad Request: /api/v1/detail-templates/
2025-06-08 22:59:32,006 django.request WARNING  Bad Request: /api/v1/detail-templates/
2025-06-08 23:00:01,895 django.request WARNING  Bad Request: /api/v1/detail-templates/
2025-06-08 23:01:30,623 django.request WARNING  Method Not Allowed: /api/v1/detail-templates/bulk_create/
2025-06-08 23:01:36,252 django.request WARNING  Bad Request: /api/v1/detail-templates/bulk_create/
2025-06-08 23:01:40,191 django.request WARNING  Method Not Allowed: /api/v1/detail-templates/bulk_create/
2025-06-08 23:01:47,900 django.request WARNING  Method Not Allowed: /api/v1/detail-templates/bulk_create/
2025-06-08 23:01:54,347 django.request WARNING  Bad Request: /api/v1/detail-templates/bulk_create/
2025-06-08 23:02:47,151 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 23:02:53,812 django.request WARNING  Bad Request: /api/v1/detail-templates/bulk_create/
2025-06-08 23:03:29,723 django.request WARNING  Method Not Allowed: /api/v1/detail-templates/bulk_create/
2025-06-08 23:03:53,036 django.request WARNING  Bad Request: /api/v1/detail-templates/bulk_create/
2025-06-08 23:06:50,597 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/models.py changed, reloading.
2025-06-08 23:06:53,056 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:07:28,463 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 23:07:44,693 django.request WARNING  Bad Request: /api/v1/detail-templates/bulk_create/
2025-06-08 23:08:35,590 django.request WARNING  Not Found: /api/v1/detaiS
2025-06-08 23:08:43,278 django.request WARNING  Bad Request: /api/v1/details/
2025-06-08 23:08:56,899 django.request WARNING  Bad Request: /api/v1/details/available_templates/
2025-06-08 23:09:00,654 django.request WARNING  Method Not Allowed: /api/v1/details/bulk_create/
2025-06-08 23:09:04,364 django.request WARNING  Method Not Allowed: /api/v1/details/create_from_template/
2025-06-08 23:09:15,211 django.request WARNING  Bad Request: /api/v1/details/grouped/
2025-06-08 23:09:18,755 django.request WARNING  Bad Request: /api/v1/details/highlighted/
2025-06-08 23:09:22,508 django.request WARNING  Bad Request: /api/v1/details/available_templates/
2025-06-08 23:13:34,613 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/urls.py changed, reloading.
2025-06-08 23:13:36,730 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:14:20,133 django.request WARNING  Not Found: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/
2025-06-08 23:15:56,435 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/urls.py changed, reloading.
2025-06-08 23:15:58,355 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:16:16,202 django.request ERROR    Internal Server Error: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/available_templates/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_detail/views.py", line 121, in available_templates
    available_templates = templates.exclude(id__in=used_template_ids)
                          ^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'exclude'
2025-06-08 23:19:08,153 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-08 23:19:10,800 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:19:16,463 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-08 23:19:18,988 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:19:35,122 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 23:19:44,619 django.request WARNING  Method Not Allowed: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/create_from_template/
2025-06-08 23:20:07,675 django.request WARNING  Method Not Allowed: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/bulk_create/
2025-06-08 23:20:12,439 django.request WARNING  Method Not Allowed: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/create_from_template/
2025-06-08 23:25:27,552 django.request WARNING  Not Found: /api/v1/details/available_templates/
2025-06-08 23:25:31,829 django.request WARNING  Not Found: /api/v1/details/highlighted/
2025-06-08 23:25:33,471 django.request WARNING  Not Found: /api/v1/details/grouped/
2025-06-08 23:25:34,414 django.request WARNING  Not Found: /api/v1/details/create_from_template/
2025-06-08 23:25:35,337 django.request WARNING  Not Found: /api/v1/details/bulk_create/
2025-06-08 23:25:36,956 django.request WARNING  Not Found: /api/v1/details/available_templates/
2025-06-08 23:25:38,078 django.request WARNING  Not Found: /api/v1/details/
2025-06-08 23:26:24,049 django.request WARNING  Bad Request: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/create_from_template/
2025-06-08 23:28:43,993 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/serializers.py changed, reloading.
2025-06-08 23:28:46,379 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:28:50,986 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 23:28:56,990 django.request ERROR    Internal Server Error: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/create_from_template/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_detail/views.py", line 166, in create_from_template
    detail = ProductDetailService.create_from_template(
        product=product,
    ...<2 lines>...
        **serializer.validated_data.get("extra_fields", {})
    )
  File "/workspaces/apps/products/product_detail/services.py", line 207, in create_from_template
    detail = cls(**detail_data)
TypeError: ProductDetailService() takes no arguments
2025-06-08 23:29:07,371 django.request WARNING  Method Not Allowed: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/create_from_template/
2025-06-08 23:32:30,699 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 23:32:33,418 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:32:39,824 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 23:32:41,930 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:35:04,431 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 23:35:04,432 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 23:36:58,775 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 23:37:07,986 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 23:42:32,166 django.request WARNING  Method Not Allowed: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/bulk_create/
2025-06-08 23:44:59,617 django.request WARNING  Method Not Allowed: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/details/bulk_create/
2025-06-08 23:45:13,824 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 23:45:29,909 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-08 23:45:32,302 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:47:15,444 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/serializers.py changed, reloading.
2025-06-08 23:47:17,962 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:47:39,733 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/serializers.py changed, reloading.
2025-06-08 23:47:41,845 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:47:46,158 django.request ERROR    Internal Server Error: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 198, in _retrieve_logic
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 87, in get_object
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 100, in get_queryset
    base_queryset = base_queryset.filter(seller=self.request.user)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-08 23:47:53,649 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-08 23:48:05,512 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 23:49:54,452 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-08 23:49:57,148 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:50:00,825 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-08 23:50:05,997 django.request ERROR    Internal Server Error: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 222, in retrieve
    return self._retrieve_logic(request, *args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/core/views.py", line 201, in _retrieve_logic
    data=serializer.data,
         ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/serializers.py", line 371, in to_representation
    data = super().to_representation(instance)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 525, in to_representation
    for field in fields:
                 ^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 386, in _readable_fields
    for field in self.fields.values():
                 ^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/functional.py", line 47, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 1177, in get_field_names
    assert field_name in fields, (
           ^^^^^^^^^^^^^^^^^^^^
AssertionError: The field 'extra_details' was declared on serializer ProductDetailSerializer, but has not been included in the 'fields' option.
2025-06-08 23:50:27,514 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-08 23:50:29,938 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-08 23:50:41,124 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-08 23:50:44,261 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:04:39,679 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/urls.py changed, reloading.
2025-06-09 13:04:42,529 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:05:00,206 django.request WARNING  Not Found: /api/v1/products-details/42757f29-42d8-40b8-b8d9-858246c70939/
2025-06-09 13:05:24,715 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/urls.py changed, reloading.
2025-06-09 13:05:27,338 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:05:40,347 django.request WARNING  Not Found: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/
2025-06-09 13:06:32,234 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/urls.py changed, reloading.
2025-06-09 13:06:35,463 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:07:42,312 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:07:45,312 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:08:38,204 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:08:41,249 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:18:23,939 django.utils.autoreload INFO     /workspaces/apps/core/views.py changed, reloading.
2025-06-09 13:18:26,344 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:18:35,103 django.utils.autoreload INFO     /workspaces/apps/core/views.py changed, reloading.
2025-06-09 13:18:42,372 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:19:03,967 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:19:05,975 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:20:24,379 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-09 13:20:26,535 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:20:31,706 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-09 13:20:35,074 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:23:41,185 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:23:43,851 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:24:03,988 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:24:06,026 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:24:32,338 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:24:37,058 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:25:36,321 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:25:39,314 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:25:49,888 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:25:53,834 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:30:05,885 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:30:08,217 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:32:11,537 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 13:32:16,845 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:32:48,044 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:32:52,019 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:35:42,719 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 13:35:47,450 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:36:46,050 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 13:36:52,929 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:39:43,580 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 13:39:49,621 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:40:48,090 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 13:40:55,865 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:41:40,519 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 13:41:46,262 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:51:30,650 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 13:51:33,269 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:51:55,906 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 13:53:02,437 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 13:53:02,584 django.request ERROR    Internal Server Error: /api/v1/products-short-code/lenevo-yoga-360-3ui3-6mON1Y-bc8038a5/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 212, in get
    return self.retrieve(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/views.py", line 225, in retrieve
    return ProductDetailService.retrieve_by_shortcode(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, request, *args, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/products/product_base/services/product_detail_service.py", line 44, in retrieve_by_shortcode
    cache.set(cache_key, serialized_data, view.CACHE_TTL)
                                          ^^^^^^^^^^^^^^
AttributeError: 'ProductDetailByShortCode' object has no attribute 'CACHE_TTL'
2025-06-09 13:53:47,008 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 13:54:25,579 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-09 13:54:28,105 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 13:54:45,067 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 13:54:45,085 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 13:55:26,272 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 13:56:01,820 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 13:57:13,118 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 13:57:17,603 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:00:33,276 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 14:00:44,960 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:01:04,557 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 14:01:12,889 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:13:55,049 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 14:13:57,295 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:14:04,795 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 14:14:07,848 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:14:14,698 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 14:14:14,700 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 14:14:42,688 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 14:16:24,292 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 14:16:32,295 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:16:40,976 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-09 14:17:46,508 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 14:25:42,275 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 14:25:45,240 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:27:03,313 django.request WARNING  Not Found: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/f/
2025-06-09 14:27:46,125 django.request WARNING  Not Found: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/delete-detail/
2025-06-09 14:27:59,930 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/delete-detail/ea5a80ca-7a83-4b14-b387-f9889966cc40/
2025-06-09 14:28:27,546 django.request WARNING  Not Found: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/delete-detail/
2025-06-09 14:29:52,775 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 14:29:55,115 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:31:46,721 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 14:32:26,998 django.request WARNING  Bad Request: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 14:35:09,401 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 14:36:00,224 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 14:36:03,872 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:37:37,720 django.utils.autoreload INFO     /workspaces/apps/core/utils/cache_manager.py changed, reloading.
2025-06-09 14:37:42,528 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:38:45,404 django.utils.autoreload INFO     /workspaces/apps/core/utils/cache_manager.py changed, reloading.
2025-06-09 14:38:47,576 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:40:10,059 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-09 14:40:15,403 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:41:22,735 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-09 14:41:27,513 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:43:56,859 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 14:44:03,469 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 14:55:31,383 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 14:55:38,085 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:12:55,922 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-09 15:12:59,721 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:14:19,560 django.utils.autoreload INFO     /workspaces/apps/core/utils/cache_manager.py changed, reloading.
2025-06-09 15:14:22,464 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:16:10,765 django.utils.autoreload INFO     /workspaces/apps/core/utils/cache_manager.py changed, reloading.
2025-06-09 15:16:14,169 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:17:45,067 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:17:48,464 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:17:54,935 django.request ERROR    Internal Server Error: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_detail/views.py", line 75, in list
    details = ProductDetailService.get_product_details(
        product_id=product_id, detail_type=detail_type, highlighted_only=highlighted
    )
  File "/workspaces/apps/products/product_detail/services.py", line 47, in get_product_details
    print(f"Key exists: {exists}")
                         ^^^^^^
UnboundLocalError: cannot access local variable 'exists' where it is not associated with a value
2025-06-09 15:18:19,606 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:18:22,889 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:19:22,745 django.request WARNING  Not Found: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/dbb289b-3df2-4e95-9fb2-8414b7ccd683/
2025-06-09 15:19:26,349 django.request ERROR    Internal Server Error: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/dbb289b-3df2-4e95-9fb2-8414b7ccd683/
2025-06-09 15:21:27,898 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:21:30,414 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:21:41,403 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:21:44,385 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:21:57,961 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:22:00,965 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:22:08,907 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:22:43,270 django.request WARNING  Bad Request: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:22:52,464 django.request WARNING  Bad Request: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:23:26,238 django.request WARNING  Not Found: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/0e3f9284-c605-4d85-9a5b-ed5b8dbc41f2/
2025-06-09 15:23:31,660 django.request ERROR    Internal Server Error: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/0e3f9284-c605-4d85-9a5b-ed5b8dbc41f2/
2025-06-09 15:25:31,477 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x73ac1963c190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x73ac196452b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-09 15:25:32,149 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7d1a59730190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7d1a597392b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-09 15:29:07,940 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:29:55,959 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:35:59,472 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:36:05,716 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:36:13,176 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:36:15,322 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:36:58,892 django.request WARNING  Bad Request: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:40:05,401 django.request WARNING  Not Found: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/4158aca3-d0e1-49e8-ba09-cd766931aa10/
2025-06-09 15:41:21,247 django.request WARNING  Not Found: /api/v1/product-details/
2025-06-09 15:41:26,387 django.request WARNING  Not Found: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/4158aca3-d0e1-49e8-ba09-cd766931aa10/
2025-06-09 15:41:46,026 django.request WARNING  Not Found: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/c32cddb7-357a-47cb-84d0-9ef14cb167d6/
2025-06-09 15:44:55,852 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:44:59,384 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:47:44,346 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:47:47,962 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:48:30,061 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:50:12,677 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:50:15,817 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:51:01,749 apps.core.permissions WARNING  Unauthenticated access attempt to EscrowTransactionViewSet
2025-06-09 15:51:01,752 apps.core.permissions WARNING  Unauthenticated access attempt to EscrowTransactionViewSet
2025-06-09 15:51:01,763 apps.core.permissions WARNING  Unauthenticated access attempt to EscrowTransactionViewSet
2025-06-09 15:51:01,763 apps.core.permissions WARNING  Unauthenticated access attempt to EscrowTransactionViewSet
2025-06-09 15:51:01,777 django.request WARNING  Unauthorized: /api/v1/transactions/67ba83c9-82ca-4a18-9acf-cbf8b6aeb6e7/update-status/
2025-06-09 15:51:09,931 django.request WARNING  Method Not Allowed: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:53:15,916 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:53:19,051 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:53:23,926 django.request WARNING  Bad Request: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:55:21,568 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:55:25,305 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:55:34,317 django.request ERROR    Internal Server Error: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_detail/views.py", line 75, in list
    details = ProductDetailService.get_product_details(
        product_id=product_id, detail_type=detail_type, highlighted_only=highlighted
    )
  File "/workspaces/apps/products/product_detail/services.py", line 55, in get_product_details
    cache_key = CacheKeyManager.make_key(
        "product_detail", "list", product_id=product_id
    )
  File "/workspaces/apps/core/utils/cache_key_manager.py", line 55, in make_key
    filled = raw_template.format(**kwargs)
KeyError: 'detail_type'
2025-06-09 15:56:10,754 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-09 15:56:14,266 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:56:19,325 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:56:24,736 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:57:11,492 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 15:57:11,495 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 15:58:40,675 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 15:58:44,306 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 15:58:51,397 django.request WARNING  Bad Request: /api/v1/product-details/42757f29-42d8-40b8-b8d9-858246c70939/create_from_template/
2025-06-09 15:59:34,081 apps.core.permissions WARNING  Unauthenticated access attempt to EscrowTransactionViewSet
2025-06-09 15:59:34,127 apps.core.permissions WARNING  Unauthenticated access attempt to EscrowTransactionViewSet
2025-06-09 15:59:34,135 django.request WARNING  Unauthorized: /api/v1/transactions/track/TRK-C55CF36D-780526-698C3C/
2025-06-09 15:59:55,556 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 16:03:06,312 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 16:03:09,514 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:03:36,467 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 16:03:58,314 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-09 16:04:01,657 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:07:32,065 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 16:07:35,311 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:08:52,878 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 16:08:52,879 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-09 16:11:47,342 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 16:11:51,175 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:12:22,954 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 16:12:26,119 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:13:17,595 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 16:13:19,940 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:13:49,820 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 16:13:53,966 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:14:23,768 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/views.py changed, reloading.
2025-06-09 16:14:26,882 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:17:10,355 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 16:17:13,164 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:19:00,981 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 16:19:03,946 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:20:49,083 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 16:20:51,839 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:22:00,235 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 16:22:03,450 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 16:22:44,551 django.utils.autoreload INFO     /workspaces/apps/products/product_detail/services.py changed, reloading.
2025-06-09 16:22:48,116 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 20:05:09,335 django.utils.autoreload INFO     /workspaces/apps/products/product_image/serializers.py changed, reloading.
2025-06-09 20:05:11,405 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 20:09:13,403 django.utils.autoreload INFO     /workspaces/apps/products/product_image/serializers.py changed, reloading.
2025-06-09 20:09:15,300 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 20:11:27,539 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-09 20:11:34,091 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 20:20:06,491 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-09 20:20:10,883 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 20:20:30,799 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-09 20:20:35,067 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 20:31:56,052 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-09 20:31:58,561 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 20:32:17,662 django.utils.autoreload INFO     /workspaces/apps/products/product_image/views.py changed, reloading.
2025-06-09 20:32:28,718 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 20:32:47,918 django.utils.autoreload INFO     /workspaces/apps/products/product_image/views.py changed, reloading.
2025-06-09 21:05:39,387 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:06:10,624 django.utils.autoreload INFO     /workspaces/apps/products/product_image/views.py changed, reloading.
2025-06-09 21:06:12,522 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:17:43,180 django.request WARNING  Method Not Allowed: /api/v1/images/upload_image/
2025-06-09 21:17:54,054 django.request WARNING  Bad Request: /api/v1/images/variants/
2025-06-09 21:17:58,159 django.request WARNING  Method Not Allowed: /api/v1/images/upload_image/
2025-06-09 21:18:00,767 django.request WARNING  Method Not Allowed: /api/v1/images/bulk_upload/
2025-06-09 21:18:05,027 django.request WARNING  Method Not Allowed: /api/v1/images/bulk_create/
2025-06-09 21:18:12,539 django.request WARNING  Method Not Allowed: /api/v1/images/upload_image/
2025-06-09 21:20:35,148 django.utils.autoreload INFO     /workspaces/apps/products/product_image/views.py changed, reloading.
2025-06-09 21:20:37,073 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:25:16,339 django.utils.autoreload INFO     /workspaces/apps/products/product_image/urls.py changed, reloading.
2025-06-09 21:25:18,467 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:25:53,931 django.utils.autoreload INFO     /workspaces/apps/products/product_image/variant_views.py changed, reloading.
2025-06-09 21:25:56,055 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:26:22,111 django.utils.autoreload INFO     /workspaces/apps/products/product_image/urls.py changed, reloading.
2025-06-09 21:26:24,311 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:29:07,709 django.utils.autoreload INFO     /workspaces/apps/products/product_image/views.py changed, reloading.
2025-06-09 21:29:13,038 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:29:31,462 django.utils.autoreload INFO     /workspaces/apps/products/product_image/urls.py changed, reloading.
2025-06-09 21:29:33,651 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:29:48,987 django.request WARNING  Unauthorized: /api/v1/image-variants/
2025-06-09 21:29:55,770 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-09 21:30:21,805 django.request WARNING  Bad Request: /api/v1/image-variants/
2025-06-09 21:33:41,207 django.utils.autoreload INFO     /workspaces/apps/products/product_image/admin.py changed, reloading.
2025-06-09 21:33:42,898 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:33:46,355 django.utils.autoreload INFO     /workspaces/apps/products/product_image/admin.py changed, reloading.
2025-06-09 21:33:48,786 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 21:57:29,008 django.utils.autoreload INFO     /workspaces/apps/products/product_image/views.py changed, reloading.
2025-06-09 21:57:30,858 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-09 22:27:16,673 django.utils.autoreload INFO     /workspaces/apps/products/product_image/serializers.py changed, reloading.
2025-06-09 22:27:20,522 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 05:50:14,871 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 05:50:16,956 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 05:52:35,114 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 05:52:35,116 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 06:01:09,020 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 06:01:12,532 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:12:24,596 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 06:12:27,573 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:12:43,161 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 06:12:43,167 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 06:26:45,548 django.utils.autoreload INFO     /workspaces/apps/products/product_image/views.py changed, reloading.
2025-06-10 06:26:48,712 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:31:54,071 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x7a1b8c174190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x7a1b8c17d2b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-10 06:31:54,401 celery.utils.dispatch.signal ERROR    Signal handler <promise@0x785c4bf88190 --> <bound method Celery._autodiscover_tasks of <Celery conf at 0x785c4bf912b0>>> raised: ModuleNotFoundError("No module named 'monitoring'")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/utils/dispatch/signal.py", line 276, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 161, in __call__
    return self.throw()
           ~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/vine/promises.py", line 158, in __call__
    retval = fun(*final_args, **final_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 694, in _autodiscover_tasks
    return self._autodiscover_tasks_from_fixups(related_name)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 703, in _autodiscover_tasks_from_fixups
    return self._autodiscover_tasks_from_names([
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
        pkg for fixup in self._fixups
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        if hasattr(fixup, 'autodiscover_tasks')
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        for pkg in fixup.autodiscover_tasks()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ], related_name=related_name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/base.py", line 698, in _autodiscover_tasks_from_names
    return self.loader.autodiscover_tasks(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        packages() if callable(packages) else packages, related_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 220, in autodiscover_tasks
    mod.__name__ for mod in autodiscover_tasks(packages or (),
                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
                                               related_name) if mod)
                                               ^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 246, in autodiscover_tasks
    return [find_related_module(pkg, related_name) for pkg in packages]
            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 278, in find_related_module
    raise e
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/loaders/base.py", line 270, in find_related_module
    return importlib.import_module(module_name)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/workspaces/apps/monitoring/tasks.py", line 4, in <module>
    from monitoring.utils import check_database_performance, check_cache_hit_ratio
ModuleNotFoundError: No module named 'monitoring'
2025-06-10 06:35:30,161 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:38:27,380 django.request ERROR    Internal Server Error: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 186, in retrieve
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 87, in get_object
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 100, in get_queryset
    base_queryset = base_queryset.filter(seller=self.request.user)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-10 06:40:26,195 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:40:26,196 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:40:26,230 products_performance INFO     Cached product list with 4 items: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:40:26,336 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-10 06:45:46,319 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:45:46,323 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:45:46,497 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-10 06:48:54,111 django.utils.autoreload INFO     /workspaces/apps/products/product_image/views.py changed, reloading.
2025-06-10 06:48:57,617 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:49:53,438 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 06:49:56,951 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:53:40,384 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-10 06:53:44,512 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:53:49,322 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:53:49,324 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:53:49,475 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-10 06:55:47,193 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-10 06:55:50,990 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:55:56,896 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:55:56,897 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:55:56,919 products_performance INFO     Cached product list with 4 items: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:55:56,989 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-10 06:56:49,372 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-10 06:56:53,471 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:56:57,412 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:56:57,415 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:56:57,723 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-10 06:58:08,435 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 06:58:11,027 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:58:16,567 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:58:16,569 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:58:16,890 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-10 06:59:10,883 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 06:59:14,424 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 06:59:19,382 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:59:19,385 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 06:59:19,688 django.request ERROR    Internal Server Error: /api/v1/products/
2025-06-10 07:00:31,817 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-10 07:00:34,969 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:00:41,992 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:00:41,996 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:00:42,332 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:00:42,334 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:03:01,592 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-10 07:03:04,244 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:04:08,782 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 07:04:08,786 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 07:09:35,346 django.utils.autoreload INFO     /workspaces/apps/products/product_image/serializers.py changed, reloading.
2025-06-10 07:09:39,685 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:10:07,621 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 07:10:45,990 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 07:10:51,622 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:10:51,625 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:10:52,138 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:10:52,139 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:14:47,257 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 07:14:50,583 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:15:51,206 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 07:15:54,782 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:16:45,789 django.utils.autoreload INFO     /workspaces/apps/products/product_base/signals.py changed, reloading.
2025-06-10 07:16:49,085 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:22:18,324 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 07:22:21,468 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:24:22,548 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 07:24:25,102 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:25:36,286 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 07:25:39,074 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:25:56,446 django.utils.autoreload INFO     /workspaces/apps/products/product_image/services.py changed, reloading.
2025-06-10 07:25:58,880 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:26:27,752 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:26:27,755 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:26:27,817 products_performance INFO     Cached product list with 4 items: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:26:28,119 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:26:28,121 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:26:32,623 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 07:26:32,626 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-10 07:27:10,711 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 07:27:10,713 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 07:47:05,838 django.utils.autoreload INFO     /workspaces/apps/products/product_image/tasks.py changed, reloading.
2025-06-10 07:47:10,042 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 07:48:32,239 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 07:48:32,243 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 07:49:28,752 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:49:28,754 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:49:28,816 products_performance INFO     Cached product list with 4 items: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:49:29,107 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 07:49:29,118 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 09:11:18,660 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 09:26:46,433 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-10 09:26:48,654 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 20:17:46,284 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-10 20:19:12,548 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 20:19:12,549 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 20:19:12,676 products_performance INFO     Cached product list with 5 items: safetrade:product_base:list:bdeae2c90faa
2025-06-10 20:19:13,465 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 20:19:13,470 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 20:19:16,758 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:19:16,760 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:20:08,622 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 20:20:08,624 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 20:20:08,842 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 20:20:08,844 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-10 20:20:21,684 django.request ERROR    Internal Server Error: /api/v1/products/my-products/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/utils/decorators.py", line 48, in _wrapper
    return bound_method(*args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/vary.py", line 31, in _view_wrapper
    response = func(request, *args, **kwargs)
  File "/workspaces/apps/products/product_base/views.py", line 145, in my_products
    return ProductMyService.get_my_products(self, request)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/apps/products/product_base/services/product_my_service.py", line 38, in get_my_products
    view.logger.info(f"Cached my products: {cache_key}")
    ^^^^^^^^^^^
AttributeError: 'ProductViewSet' object has no attribute 'logger'
2025-06-10 20:21:38,318 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-10 20:21:42,203 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 20:21:46,711 products_performance INFO     Cache HIT for my products: safetrade:product_base:my_products:4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-10 20:22:59,768 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-10 20:25:54,641 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/serializers.py changed, reloading.
2025-06-10 20:25:57,741 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 20:26:33,048 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 20:26:40,112 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-10 20:26:42,196 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-10 20:26:51,555 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-10 20:28:39,189 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-10 20:28:39,191 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-10 20:28:39,234 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:28:39,236 products_performance INFO     Deleting list caches with pattern
2025-06-10 20:28:39,246 products_performance WARNING   No product list cache keys found to delete
2025-06-10 20:28:39,248 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:29:04,677 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:29:04,680 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:30:26,894 django.request WARNING  Method Not Allowed: /api/v1/inventory/activate/
2025-06-10 20:30:47,494 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-10 20:30:47,495 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-10 20:30:47,496 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:30:47,497 products_performance INFO     Deleting list caches with pattern
2025-06-10 20:30:47,498 products_performance WARNING   No product list cache keys found to delete
2025-06-10 20:30:47,498 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:30:53,295 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:30:53,298 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:31:16,940 django.request WARNING  Method Not Allowed: /api/v1/inventory/deduct/
2025-06-10 20:33:28,253 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-10 20:33:31,933 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 20:33:41,783 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-10 20:33:52,909 django.request WARNING  Method Not Allowed: /api/v1/inventory/deduct/
2025-06-10 20:33:56,847 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-10 20:34:27,460 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-10 20:34:30,674 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 20:34:37,423 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-10 20:34:40,123 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-10 20:34:48,624 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-10 20:34:56,609 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-10 20:45:04,734 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-10 20:45:07,752 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 20:45:17,161 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-10 20:45:30,106 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-10 20:45:30,107 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-10 20:45:30,109 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:45:30,109 products_performance INFO     Deleting list caches with pattern
2025-06-10 20:45:30,111 products_performance WARNING   No product list cache keys found to delete
2025-06-10 20:45:30,111 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:45:49,810 django.request WARNING  Method Not Allowed: /api/v1/inventory/escrow/
2025-06-10 20:49:07,723 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-10 20:49:10,430 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-10 20:49:16,639 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-10 20:49:16,641 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-11 09:10:47,509 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 09:22:34,203 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-11 09:22:44,610 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 09:29:22,379 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-11 09:29:36,733 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 09:42:53,808 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-11 09:43:05,406 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:04:02,893 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:04:09,541 django.request WARNING  Method Not Allowed: /api/v1/auth/refresh/
2025-06-11 14:04:13,773 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-11 14:04:27,476 django.request WARNING  Method Not Allowed: /api/v1/inventory/escrow/
2025-06-11 14:06:45,627 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 14:06:49,173 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:09:09,009 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-11 14:10:17,423 django.request WARNING  Forbidden: /api/v1/inventory/escrow/
2025-06-11 14:21:23,128 django.utils.autoreload INFO     /workspaces/apps/core/permissions.py changed, reloading.
2025-06-11 14:21:26,780 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:36:46,691 django.utils.autoreload INFO     /workspaces/apps/core/permissions.py changed, reloading.
2025-06-11 14:36:49,909 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:38:42,325 django.utils.autoreload INFO     /workspaces/apps/core/permissions.py changed, reloading.
2025-06-11 14:38:46,074 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:41:27,382 django.utils.autoreload INFO     /workspaces/apps/users/views.py changed, reloading.
2025-06-11 14:41:30,800 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:41:54,278 django.utils.autoreload INFO     /workspaces/apps/users/views.py changed, reloading.
2025-06-11 14:41:57,440 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:42:31,957 django.utils.autoreload INFO     /workspaces/apps/disputes/views.py changed, reloading.
2025-06-11 14:42:35,119 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:42:43,582 django.utils.autoreload INFO     /workspaces/apps/disputes/views.py changed, reloading.
2025-06-11 14:42:46,662 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:42:54,681 django.request WARNING  Method Not Allowed: /api/v1/auth/refresh/
2025-06-11 14:42:58,269 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-11 14:43:03,260 django.request WARNING  Method Not Allowed: /api/v1/inventory/escrow/
2025-06-11 14:43:13,373 django.request WARNING  Forbidden: /api/v1/inventory/escrow/
2025-06-11 14:43:22,389 django.request WARNING  Method Not Allowed: /api/v1/inventory/escrow/
2025-06-11 14:43:30,982 django.request WARNING  Method Not Allowed: /api/v1/inventory/escrow/
2025-06-11 14:48:32,130 django.utils.autoreload INFO     /workspaces/apps/core/permissions.py changed, reloading.
2025-06-11 14:48:36,418 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:49:35,312 django.utils.autoreload INFO     /workspaces/apps/core/permissions.py changed, reloading.
2025-06-11 14:49:38,698 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:52:48,193 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 14:52:51,319 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:53:23,392 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 14:53:26,766 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:53:52,762 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-11 14:54:09,575 django.request WARNING  Not Found: /api/v1/inventory/escrow/
2025-06-11 14:54:13,329 django.request WARNING  Not Found: /api/v1/inventory/escrow/
2025-06-11 14:54:21,231 django.request WARNING  Method Not Allowed: /api/v1/inventory/escrow/place-in-escrow/
2025-06-11 14:55:29,991 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 14:55:33,902 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:55:38,927 django.request WARNING  Not Found: /api/v1/inventory/escrow/
2025-06-11 14:55:40,234 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-11 14:55:44,189 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-11 14:55:50,201 django.request WARNING  Forbidden: /api/v1/inventory/place-in-escrow/
2025-06-11 14:55:56,689 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-11 14:56:13,574 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:59:20,391 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 14:59:23,617 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 14:59:38,682 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-11 14:59:38,731 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-11 14:59:48,576 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-11 14:59:52,946 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-11 14:59:52,947 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-11 14:59:52,954 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-11 14:59:52,955 products_performance INFO     Deleting list caches with pattern
2025-06-11 14:59:52,957 products_performance WARNING   No product list cache keys found to delete
2025-06-11 14:59:52,958 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-11 14:59:53,167 django.request ERROR    Internal Server Error: /api/v1/inventory/place-in-escrow/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_inventory/views.py", line 181, in place_in_escrow
    result = InventoryService.place_in_escrow(
        product=product, quantity=quantity, buyer=request.user, notes=notes
    )
  File "/usr/local/lib/python3.13/contextlib.py", line 85, in inner
    return func(*args, **kwds)
  File "/workspaces/apps/products/product_inventory/services.py", line 190, in place_in_escrow
    tracking_id=InventoryService.generate_tracking_id(product, buyer, seller),
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'InventoryService' has no attribute 'generate_tracking_id'
2025-06-11 15:16:56,433 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/services.py changed, reloading.
2025-06-11 15:16:59,945 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:17:21,823 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 15:17:25,207 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:17:30,482 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 15:17:33,630 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:20:48,767 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 15:20:52,232 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:21:16,998 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 15:21:20,118 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:21:30,228 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-11 15:21:33,742 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-11 15:21:36,756 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-11 15:21:40,547 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-11 15:21:48,431 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 15:21:51,456 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:21:56,305 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-11 15:22:14,292 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 15:22:17,974 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:22:24,894 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-11 15:22:24,895 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-11 15:22:24,909 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-11 15:22:24,910 products_performance INFO     Deleting list caches with pattern
2025-06-11 15:22:24,912 products_performance WARNING   No product list cache keys found to delete
2025-06-11 15:22:24,915 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-11 15:22:25,065 django.request ERROR    Internal Server Error: /api/v1/inventory/place-in-escrow/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_inventory/views.py", line 196, in place_in_escrow
    result = InventoryService.place_in_escrow(
        product=product, quantity=quantity, buyer=request.user, notes=notes
    )
  File "/usr/local/lib/python3.13/contextlib.py", line 85, in inner
    return func(*args, **kwds)
  File "/workspaces/apps/products/product_inventory/services.py", line 191, in place_in_escrow
    tracking_id=generate_tracking_id(product, buyer, seller),
                ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/utils/tracking_id.py", line 22, in generate_tracking_id
    timestamp = str(int(timezone.now().timestamp()))[-6:]
                        ^^^^^^^^^^^^
AttributeError: type object 'datetime.timezone' has no attribute 'now'
2025-06-11 15:23:12,467 django.utils.autoreload INFO     /workspaces/apps/transactions/utils/tracking_id.py changed, reloading.
2025-06-11 15:23:15,948 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:24:48,114 django.utils.autoreload INFO     /workspaces/apps/transactions/utils/tracking_id.py changed, reloading.
2025-06-11 15:24:51,475 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:24:56,636 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-11 15:25:01,691 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-11 15:25:01,692 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-11 15:25:01,701 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-11 15:25:01,701 products_performance INFO     Deleting list caches with pattern
2025-06-11 15:25:01,703 products_performance WARNING   No product list cache keys found to delete
2025-06-11 15:25:01,703 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-11 15:25:01,801 django.request ERROR    Internal Server Error: /api/v1/inventory/place-in-escrow/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_inventory/views.py", line 196, in place_in_escrow
    result = InventoryService.place_in_escrow(
        product=product, quantity=quantity, buyer=request.user, notes=notes
    )
  File "/usr/local/lib/python3.13/contextlib.py", line 85, in inner
    return func(*args, **kwds)
  File "/workspaces/apps/products/product_inventory/services.py", line 181, in place_in_escrow
    escrow_transaction = EscrowTransaction.objects.create(
        product=product,
    ...<9 lines>...
        notes=notes,
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/models.py", line 91, in save
    orig = EscrowTransaction.objects.get(pk=self.pk)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 649, in get
    raise self.model.DoesNotExist(
        "%s matching query does not exist." % self.model._meta.object_name
    )
apps.transactions.models.EscrowTransaction.DoesNotExist: EscrowTransaction matching query does not exist.
2025-06-11 15:28:03,657 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-11 15:28:06,832 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:28:43,009 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-11 15:28:46,960 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-11 15:28:56,065 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-11 15:28:56,066 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-11 15:28:56,069 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-11 15:28:56,069 products_performance INFO     Deleting list caches with pattern
2025-06-11 15:28:56,072 products_performance WARNING   No product list cache keys found to delete
2025-06-11 15:28:56,073 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-11 15:29:15,992 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-11 15:29:19,465 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:29:53,015 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-11 15:29:56,470 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-11 15:31:45,691 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 96, in list
    ordering = self.get_ordering()
               ^^^^^^^^^^^^^^^^^
AttributeError: 'EscrowTransactionViewSet' object has no attribute 'get_ordering'
                                                                                                                                                                                                                         2025-06-12 04:31:21,854 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 04:32:42,137 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 91, in list
    queryset = self.get_queryset()
  File "/workspaces/apps/transactions/views.py", line 69, in get_queryset
    return EscrowTransaction.objects.filter(Q(buyer=user) | Q(seller=user))
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1468, in build_filter
    return self._add_q(
           ~~~~~~~~~~~^
        filter_expr,
        ^^^^^^^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-12 04:32:46,121 django.request WARNING  Not Found: /favicon.ico
2025-06-12 04:36:56,062 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-12 04:37:07,315 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 04:39:43,572 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 04:39:55,229 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 04:40:09,949 django.request WARNING  Method Not Allowed: /api/v1/auth/refresh/
2025-06-12 04:40:19,102 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 04:40:30,797 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 96, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user, queryset=queryset, status_filter=status_filter
    )
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 140, in get_user_all_transactions
    return cls.get_transaction_list(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        user=user,
        ^^^^^^^^^^
    ...<2 lines>...
        cache_key_suffix="all",
        ^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 63, in get_transaction_list
    params_str = json.dumps(params, sort_keys=True)
  File "/usr/local/lib/python3.13/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ~~~~~~^^^^^
  File "/usr/local/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/usr/local/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type UUID is not JSON serializable
2025-06-12 04:42:52,778 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 04:42:56,501 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 04:43:04,877 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 96, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user, queryset=queryset, status_filter=status_filter
    )
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 139, in get_user_all_transactions
    return cls.get_transaction_list(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        user=user,
        ^^^^^^^^^^
    ...<2 lines>...
        cache_key_suffix="all",
        ^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 99, in get_transaction_list
    transactions = list(optimized_queryset)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 400, in __iter__
    self._fetch_all()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1930, in _fetch_all
    self._prefetch_related_objects()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1320, in _prefetch_related_objects
    prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2355, in prefetch_related_objects
    raise AttributeError(
    ...<7 lines>...
    )
AttributeError: Cannot find 'transactionhistory_set' on EscrowTransaction object, 'transactionhistory_set' is an invalid parameter to prefetch_related()
2025-06-12 04:44:43,018 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 04:44:50,291 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 04:45:06,748 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 96, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user, queryset=queryset, status_filter=status_filter
    )
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 139, in get_user_all_transactions
    return cls.get_transaction_list(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        user=user,
        ^^^^^^^^^^
    ...<2 lines>...
        cache_key_suffix="all",
        ^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 99, in get_transaction_list
    transactions = list(optimized_queryset)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 400, in __iter__
    self._fetch_all()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1930, in _fetch_all
    self._prefetch_related_objects()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1320, in _prefetch_related_objects
    prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2380, in prefetch_related_objects
    obj_list, additional_lookups = prefetch_one_level(
                                   ~~~~~~~~~~~~~~~~~~^
        obj_to_fetch,
        ^^^^^^^^^^^^^
    ...<2 lines>...
        level,
        ^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2629, in prefetch_one_level
    qs = manager._apply_rel_filters(lookup.queryset)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_descriptors.py", line 716, in _apply_rel_filters
    queryset = queryset.filter(**self.core_filters)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1488, in _filter_or_exclude
    raise TypeError("Cannot filter a query once a slice has been taken.")
TypeError: Cannot filter a query once a slice has been taken.
2025-06-12 04:45:10,305 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 96, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user, queryset=queryset, status_filter=status_filter
    )
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 139, in get_user_all_transactions
    return cls.get_transaction_list(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        user=user,
        ^^^^^^^^^^
    ...<2 lines>...
        cache_key_suffix="all",
        ^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 99, in get_transaction_list
    transactions = list(optimized_queryset)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 400, in __iter__
    self._fetch_all()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1930, in _fetch_all
    self._prefetch_related_objects()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1320, in _prefetch_related_objects
    prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2380, in prefetch_related_objects
    obj_list, additional_lookups = prefetch_one_level(
                                   ~~~~~~~~~~~~~~~~~~^
        obj_to_fetch,
        ^^^^^^^^^^^^^
    ...<2 lines>...
        level,
        ^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2629, in prefetch_one_level
    qs = manager._apply_rel_filters(lookup.queryset)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_descriptors.py", line 716, in _apply_rel_filters
    queryset = queryset.filter(**self.core_filters)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1488, in _filter_or_exclude
    raise TypeError("Cannot filter a query once a slice has been taken.")
TypeError: Cannot filter a query once a slice has been taken.
2025-06-12 04:46:16,614 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 04:46:22,315 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 04:46:32,273 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 96, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user, queryset=queryset, status_filter=status_filter
    )
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 139, in get_user_all_transactions
    return cls.get_transaction_list(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        user=user,
        ^^^^^^^^^^
    ...<2 lines>...
        cache_key_suffix="all",
        ^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 101, in get_transaction_list
    serialized_data = serializer.data
                      ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 797, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 716, in to_representation
    self.child.to_representation(item) for item in iterable
                                                   ^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 400, in __iter__
    self._fetch_all()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1930, in _fetch_all
    self._prefetch_related_objects()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1320, in _prefetch_related_objects
    prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2380, in prefetch_related_objects
    obj_list, additional_lookups = prefetch_one_level(
                                   ~~~~~~~~~~~~~~~~~~^
        obj_to_fetch,
        ^^^^^^^^^^^^^
    ...<2 lines>...
        level,
        ^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2629, in prefetch_one_level
    qs = manager._apply_rel_filters(lookup.queryset)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_descriptors.py", line 716, in _apply_rel_filters
    queryset = queryset.filter(**self.core_filters)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1488, in _filter_or_exclude
    raise TypeError("Cannot filter a query once a slice has been taken.")
TypeError: Cannot filter a query once a slice has been taken.
2025-06-12 04:46:42,977 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 04:46:47,746 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 04:58:09,003 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 04:58:12,435 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 04:58:23,054 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 92, in list
    queryset = self.get_queryset()
  File "/workspaces/apps/transactions/views.py", line 70, in get_queryset
    return EscrowTransaction.objects.filter(Q(buyer=user) | Q(seller=user))
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1468, in build_filter
    return self._add_q(
           ~~~~~~~~~~~^
        filter_expr,
        ^^^^^^^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-12 04:58:31,749 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 04:58:37,749 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 98, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user,
    ...<5 lines>...
        limit=int(limit),
    )
TypeError: TransactionListService.get_user_all_transactions() got an unexpected keyword argument 'search_query'
2025-06-12 04:59:17,219 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 04:59:20,600 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:00:17,029 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 05:00:25,550 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:00:59,179 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 05:01:02,316 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:01:57,411 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 05:02:08,416 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:02:37,869 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 98, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user,
    ...<5 lines>...
        limit=int(limit),
    )
TypeError: TransactionListService.get_user_all_transactions() got an unexpected keyword argument 'search_query'
2025-06-12 05:05:49,632 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 05:05:53,103 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:05:59,635 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 98, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user,
    ...<5 lines>...
        limit=int(limit),
    )
TypeError: TransactionListService.get_user_all_transactions() got an unexpected keyword argument 'ordering'
2025-06-12 05:06:52,184 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 05:06:55,323 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:07:02,232 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 98, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user,
    ...<5 lines>...
        limit=int(limit),
    )
TypeError: TransactionListService.get_user_all_transactions() got an unexpected keyword argument 'ordering'
2025-06-12 05:07:05,870 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 98, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user,
    ...<5 lines>...
        limit=int(limit),
    )
TypeError: TransactionListService.get_user_all_transactions() got an unexpected keyword argument 'ordering'
2025-06-12 05:08:53,234 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 05:08:56,439 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:08:59,857 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 98, in list
    result = TransactionListService.get_user_all_transactions(
        user=request.user,
    ...<5 lines>...
        limit=int(limit),
    )
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 143, in get_user_all_transactions
    return cls.get_transaction_list(
           ~~~~~~~~~~~~~~~~~~~~~~~~^
        user=user,
        ^^^^^^^^^^
    ...<6 lines>...
        cache_key_suffix="all",
        ^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 94, in get_transaction_list
    transactions = list(page_qs)  # now guaranteed small
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 400, in __iter__
    self._fetch_all()
    ~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1930, in _fetch_all
    self._prefetch_related_objects()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1320, in _prefetch_related_objects
    prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2380, in prefetch_related_objects
    obj_list, additional_lookups = prefetch_one_level(
                                   ~~~~~~~~~~~~~~~~~~^
        obj_to_fetch,
        ^^^^^^^^^^^^^
    ...<2 lines>...
        level,
        ^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 2629, in prefetch_one_level
    qs = manager._apply_rel_filters(lookup.queryset)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_descriptors.py", line 716, in _apply_rel_filters
    queryset = queryset.filter(**self.core_filters)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1488, in _filter_or_exclude
    raise TypeError("Cannot filter a query once a slice has been taken.")
TypeError: Cannot filter a query once a slice has been taken.
2025-06-12 05:12:36,441 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 05:12:41,840 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:13:20,478 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 05:13:25,047 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:20:37,592 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 05:20:46,819 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:21:07,242 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 05:21:10,070 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-12 05:21:11,912 transactions_performance INFO     Fetched 1 transactions (all) for user 8986d141-3892-4ded-aa17-5041d599a353 in 148.11ms
2025-06-12 05:22:09,440 transactions_performance INFO     Cache hit for user 8986d141-3892-4ded-aa17-5041d599a353 transactions (purchases) in 7.86ms
2025-06-12 05:22:16,235 transactions_performance INFO     Cache hit for user 8986d141-3892-4ded-aa17-5041d599a353 transactions (sales) in 5.57ms
2025-06-12 05:22:26,243 transactions_performance INFO     Cache hit for user 8986d141-3892-4ded-aa17-5041d599a353 transactions (sales) in 3.85ms
2025-06-12 05:22:58,112 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 05:23:01,270 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:23:15,554 transactions_performance INFO     Cache hit for user 8986d141-3892-4ded-aa17-5041d599a353 transactions (sales) in 1.36ms
2025-06-12 05:23:22,605 transactions_performance INFO     Cache hit for user 8986d141-3892-4ded-aa17-5041d599a353 transactions (purchases) in 1.20ms
2025-06-12 05:23:25,638 transactions_performance INFO     Cache hit for user 8986d141-3892-4ded-aa17-5041d599a353 transactions (sales) in 1.94ms
2025-06-12 05:23:27,908 transactions_performance INFO     Cache hit for user 8986d141-3892-4ded-aa17-5041d599a353 transactions (sales) in 2.50ms
2025-06-12 05:28:36,477 django.request WARNING  Bad Request: /api/v1/auth/users/
2025-06-12 05:28:37,861 django.request WARNING  Not Found: /favicon.ico
2025-06-12 05:29:17,304 django.request WARNING  Method Not Allowed: /api/v1/auth/login/
2025-06-12 05:29:47,107 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 05:29:51,414 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 28.88ms
2025-06-12 05:29:57,332 transactions_performance INFO     Fetched 0 transactions (purchases) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 42.84ms
2025-06-12 05:30:01,162 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 15.75ms
2025-06-12 05:30:33,624 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-12 05:31:06,498 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:31:06,499 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:31:34,137 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 05:31:34,139 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 05:31:34,143 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:31:34,145 products_performance INFO     Deleting list caches with pattern
2025-06-12 05:31:34,150 products_performance WARNING   No product list cache keys found to delete
2025-06-12 05:31:34,151 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:31:41,901 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:31:41,905 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:31:48,164 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 39.19ms
2025-06-12 05:31:53,405 transactions_performance INFO     Fetched 1 transactions (purchases) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 90.72ms
2025-06-12 05:31:57,163 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (sales) in 4.25ms
2025-06-12 05:32:05,823 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 5.36ms
2025-06-12 05:32:25,282 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 1.78ms
2025-06-12 05:33:11,259 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (all) in 2.14ms
2025-06-12 05:33:56,933 django.request ERROR    Internal Server Error: /api/v1/transactions/a99611e6-fb3b-4e09-b7e8-87cedf360225/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 189, in retrieve
    data=serializer.data,
         ^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 1870, in to_representation
    return method(value)
  File "/workspaces/apps/transactions/serializers.py", line 173, in get_breadcrumbs
    breadcrumb_data = BreadcrumbService.generate_store_breadcrumbs(obj)
  File "/workspaces/apps/core/utils/breadcrumbs.py", line 264, in generate_store_breadcrumbs
    {"id": str(store.id), "name": store.name, "href": None, "order": order}
                                  ^^^^^^^^^^
AttributeError: 'EscrowTransaction' object has no attribute 'name'
2025-06-12 05:35:57,278 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 05:36:00,402 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:42:20,084 django.utils.autoreload INFO     /workspaces/apps/core/permissions.py changed, reloading.
2025-06-12 05:42:22,828 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:42:45,576 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 05:42:48,853 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:42:56,847 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 05:43:18,083 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 40.87ms
2025-06-12 05:43:22,212 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 22.51ms
2025-06-12 05:43:24,834 transactions_performance INFO     Fetched 1 transactions (purchases) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 72.43ms
2025-06-12 05:43:28,061 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (sales) in 3.66ms
2025-06-12 05:43:31,461 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 3.46ms
2025-06-12 05:43:37,313 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (sales) in 3.53ms
2025-06-12 05:43:42,485 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 2.43ms
2025-06-12 05:45:06,122 django.utils.autoreload INFO     /workspaces/apps/core/permissions.py changed, reloading.
2025-06-12 05:45:09,456 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:45:33,571 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 05:45:36,748 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:45:42,570 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 1.32ms
2025-06-12 05:45:45,064 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (sales) in 4.10ms
2025-06-12 05:45:47,785 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (sales) in 3.49ms
2025-06-12 05:45:54,748 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (sales) in 5.91ms
2025-06-12 05:45:55,123 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (sales) in 1.40ms
2025-06-12 05:45:56,570 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (sales) in 1.43ms
2025-06-12 05:46:59,164 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 05:46:59,165 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 05:46:59,169 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:46:59,171 products_performance INFO     Deleting list caches with pattern
2025-06-12 05:46:59,173 products_performance WARNING   No product list cache keys found to delete
2025-06-12 05:46:59,174 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:47:06,253 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (sales) in 1.55ms
2025-06-12 05:47:12,323 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 3.38ms
2025-06-12 05:47:21,654 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (all) in 2.80ms
2025-06-12 05:50:07,874 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 05:50:10,489 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:50:15,394 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user:05b2d4af-ba3c-4723-ab2c-65ec48e6219e 
2025-06-12 05:50:15,472 transactions_performance INFO     Fetched 2 transactions (all) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 78.57ms
2025-06-12 05:51:22,221 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-12 05:51:25,758 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:51:38,885 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 05:51:43,575 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:bf6ee2afd182 
2025-06-12 05:51:43,721 transactions_performance INFO     Fetched 2 transactions (all) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 147.66ms
2025-06-12 05:52:48,679 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-12 05:52:52,087 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:53:07,734 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:bf6ee2afd182 
2025-06-12 05:53:07,774 transactions_performance INFO     Fetched 2 transactions (all) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 40.09ms
2025-06-12 05:53:19,249 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:bf6ee2afd182 
2025-06-12 05:53:19,252 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (all) in 4.55ms
2025-06-12 05:53:40,178 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:0f0953afcd45 
2025-06-12 05:53:40,286 transactions_performance INFO     Fetched 2 transactions (purchases) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 108.81ms
2025-06-12 05:53:44,982 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:2f4912cc09af 
2025-06-12 05:53:45,028 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 46.53ms
2025-06-12 05:53:48,638 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:0f0953afcd45 
2025-06-12 05:53:48,645 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 7.58ms
2025-06-12 05:53:51,078 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:2f4912cc09af 
2025-06-12 05:53:51,146 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 70.30ms
2025-06-12 05:53:54,265 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:2f4912cc09af 
2025-06-12 05:53:54,311 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 46.39ms
2025-06-12 05:53:57,020 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:0f0953afcd45 
2025-06-12 05:53:57,022 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 3.69ms
2025-06-12 05:54:00,057 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:2f4912cc09af 
2025-06-12 05:54:00,144 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 88.81ms
2025-06-12 05:54:03,662 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:2f4912cc09af 
2025-06-12 05:54:03,707 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 46.01ms
2025-06-12 05:54:48,944 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 05:54:48,945 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 05:54:48,947 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:54:48,948 products_performance INFO     Deleting list caches with pattern
2025-06-12 05:54:48,949 products_performance WARNING   No product list cache keys found to delete
2025-06-12 05:54:48,951 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 05:54:57,942 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:0f0953afcd45 
2025-06-12 05:54:57,946 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 5.12ms
2025-06-12 05:55:05,658 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:bf6ee2afd182 
2025-06-12 05:55:05,660 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (all) in 1.86ms
2025-06-12 05:55:11,191 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:user_id:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:params:bf6ee2afd182 
2025-06-12 05:55:11,192 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (all) in 1.71ms
2025-06-12 05:56:57,461 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-12 05:57:00,519 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 05:57:13,676 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:bf6ee2afd182 
2025-06-12 05:57:13,732 transactions_performance INFO     Fetched 3 transactions (all) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 56.36ms
2025-06-12 05:57:20,207 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:0f0953afcd45 
2025-06-12 05:57:20,345 transactions_performance INFO     Fetched 3 transactions (purchases) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 138.77ms
2025-06-12 05:57:22,922 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:2f4912cc09af 
2025-06-12 05:57:22,951 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 29.62ms
2025-06-12 06:00:08,810 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 06:00:11,130 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 06:00:25,891 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 06:00:35,523 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:bf6ee2afd182 
2025-06-12 06:00:35,528 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (all) in 5.33ms
2025-06-12 06:00:51,029 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:bf6ee2afd182 
2025-06-12 06:00:51,033 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (all) in 5.05ms
2025-06-12 06:00:56,592 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:0f0953afcd45 
2025-06-12 06:00:56,594 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 2.86ms
2025-06-12 06:01:00,704 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:0f0953afcd45 
2025-06-12 06:01:00,707 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (purchases) in 3.19ms
2025-06-12 06:01:03,236 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:2f4912cc09af 
2025-06-12 06:01:03,302 transactions_performance INFO     Fetched 0 transactions (sales) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 66.38ms
2025-06-12 06:01:15,927 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:bf6ee2afd182 
2025-06-12 06:01:15,931 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (all) in 4.51ms
2025-06-12 06:01:26,412 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 06:01:26,413 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 06:01:26,418 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:01:26,419 products_performance INFO     Deleting list caches with pattern
2025-06-12 06:01:26,420 products_performance WARNING   No product list cache keys found to delete
2025-06-12 06:01:26,422 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:01:33,480 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:bf6ee2afd182 
2025-06-12 06:01:33,486 transactions_performance INFO     Cache hit for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e transactions (all) in 7.24ms
2025-06-12 06:02:53,959 django.utils.autoreload INFO     /workspaces/apps/transactions/apps.py changed, reloading.
2025-06-12 06:02:57,026 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 06:03:03,757 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:05b2d4af-ba3c-4723-ab2c-65ec48e6219e:bf6ee2afd182 
2025-06-12 06:03:03,796 transactions_performance INFO     Fetched 4 transactions (all) for user 05b2d4af-ba3c-4723-ab2c-65ec48e6219e in 39.06ms
2025-06-12 06:03:17,257 django.request ERROR    Internal Server Error: /api/v1/inventory/place-in-escrow/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_inventory/views.py", line 202, in place_in_escrow
    "total": product_result.total_inventory,
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'total_inventory'
2025-06-12 06:03:23,790 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-12 06:03:30,832 django.request WARNING  Method Not Allowed: /api/v1/inventory/activate/
2025-06-12 06:03:40,752 django.request WARNING  Forbidden: /api/v1/inventory/activate/
2025-06-12 06:04:12,710 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 06:04:18,315 django.request WARNING  Method Not Allowed: /api/v1/inventory/activate/
2025-06-12 06:04:34,633 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 06:04:34,633 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 06:04:34,634 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:04:34,634 products_performance INFO     Deleting list caches with pattern
2025-06-12 06:04:34,635 products_performance WARNING   No product list cache keys found to delete
2025-06-12 06:04:34,636 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:04:40,281 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-12 06:04:48,565 django.request WARNING  Forbidden: /api/v1/inventory/place-in-escrow/
2025-06-12 06:04:54,147 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-12 06:04:59,499 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:4b45ecbe-a627-41c7-a12c-b9242018c14e:bf6ee2afd182 
2025-06-12 06:04:59,654 transactions_performance INFO     Fetched 5 transactions (all) for user 4b45ecbe-a627-41c7-a12c-b9242018c14e in 155.49ms
2025-06-12 06:05:11,067 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:4b45ecbe-a627-41c7-a12c-b9242018c14e:0f0953afcd45 
2025-06-12 06:05:11,108 transactions_performance INFO     Fetched 0 transactions (purchases) for user 4b45ecbe-a627-41c7-a12c-b9242018c14e in 41.80ms
2025-06-12 06:05:13,635 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:4b45ecbe-a627-41c7-a12c-b9242018c14e:2f4912cc09af 
2025-06-12 06:05:13,732 transactions_performance INFO     Fetched 5 transactions (sales) for user 4b45ecbe-a627-41c7-a12c-b9242018c14e in 97.88ms
2025-06-12 06:05:45,789 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 06:05:51,674 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:2f4912cc09af 
2025-06-12 06:05:51,735 transactions_performance INFO     Fetched 0 transactions (sales) for user 8986d141-3892-4ded-aa17-5041d599a353 in 62.11ms
2025-06-12 06:05:55,358 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:0f0953afcd45 
2025-06-12 06:05:55,452 transactions_performance INFO     Fetched 1 transactions (purchases) for user 8986d141-3892-4ded-aa17-5041d599a353 in 96.15ms
2025-06-12 06:06:06,220 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-12 06:06:12,404 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 06:06:12,405 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 06:06:12,406 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:06:12,406 products_performance INFO     Deleting list caches with pattern
2025-06-12 06:06:12,407 products_performance WARNING   No product list cache keys found to delete
2025-06-12 06:06:12,407 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:06:12,490 django.request ERROR    Internal Server Error: /api/v1/inventory/place-in-escrow/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_inventory/views.py", line 192, in place_in_escrow
    result = InventoryService.place_in_escrow(
        product=product, quantity=quantity, buyer=request.user, notes=notes
    )
  File "/usr/local/lib/python3.13/contextlib.py", line 85, in inner
    return func(*args, **kwds)
  File "/workspaces/apps/products/product_inventory/services.py", line 181, in place_in_escrow
    escrow_transaction = EscrowTransaction.objects.create(
        product=product,
    ...<9 lines>...
        notes=notes,
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1013, in save_base
    post_save.send(
    ~~~~~~~~~~~~~~^
        sender=origin,
        ^^^^^^^^^^^^^^
    ...<4 lines>...
        using=using,
        ^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/dispatch/dispatcher.py", line 189, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/apps/transactions/signals.py", line 38, in invalidate_transaction_caches
    TransactionListService.invalidate_transaction_caches(transaction=instance)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 326, in invalidate_transaction_caches
    cls.invalidate_user_transaction_caches(transaction.buyer.id)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 290, in invalidate_user_transaction_caches
    user_keys = [key for key in decoded_keys if user_id in key]
                                                ^^^^^^^^^^^^^^
TypeError: 'in <string>' requires string as left operand, not UUID
2025-06-12 06:06:16,996 django.request WARNING  Method Not Allowed: /api/v1/inventory/activate/
2025-06-12 06:07:17,782 django.utils.autoreload INFO     /workspaces/apps/transactions/services/transaction_list_service.py changed, reloading.
2025-06-12 06:07:20,761 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 06:07:30,430 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:0f0953afcd45 
2025-06-12 06:07:30,431 transactions_performance INFO     Cache hit for user 8986d141-3892-4ded-aa17-5041d599a353 transactions (purchases) in 2.04ms
2025-06-12 06:07:39,265 django.request WARNING  Forbidden: /api/v1/inventory/activate/
2025-06-12 06:07:50,357 django.request WARNING  Method Not Allowed: /api/v1/inventory/activate/
2025-06-12 06:07:53,390 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-12 06:07:57,698 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 06:07:57,699 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 06:07:57,702 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:07:57,702 products_performance INFO     Deleting list caches with pattern
2025-06-12 06:07:57,703 products_performance WARNING   No product list cache keys found to delete
2025-06-12 06:07:57,704 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:07:57,848 transactions_performance INFO     Deleting 3 cache keys for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 06:07:57,850 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:0f0953afcd45
2025-06-12 06:07:57,852 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:2f4912cc09af
2025-06-12 06:07:57,854 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:user:8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 06:07:57,855 transactions_performance INFO     Deleting 3 cache keys for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 06:07:57,857 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:4b45ecbe-a627-41c7-a12c-b9242018c14e:bf6ee2afd182
2025-06-12 06:07:57,859 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:4b45ecbe-a627-41c7-a12c-b9242018c14e:2f4912cc09af
2025-06-12 06:07:57,861 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:4b45ecbe-a627-41c7-a12c-b9242018c14e:0f0953afcd45
2025-06-12 06:07:57,862 transactions_performance INFO     Invalidated caches for transaction e586f9c3-5eed-4be0-ad93-58f0d200cdff (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 06:07:57,877 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 06:07:57,879 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 06:07:57,880 transactions_performance INFO     Invalidated caches for transaction e586f9c3-5eed-4be0-ad93-58f0d200cdff (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 06:07:57,983 django.request ERROR    Internal Server Error: /api/v1/inventory/place-in-escrow/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_inventory/views.py", line 192, in place_in_escrow
    result = InventoryService.place_in_escrow(
        product=product, quantity=quantity, buyer=request.user, notes=notes
    )
  File "/usr/local/lib/python3.13/contextlib.py", line 85, in inner
    return func(*args, **kwds)
  File "/workspaces/apps/products/product_inventory/services.py", line 181, in place_in_escrow
    escrow_transaction = EscrowTransaction.objects.create(
        product=product,
    ...<9 lines>...
        notes=notes,
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1013, in save_base
    post_save.send(
    ~~~~~~~~~~~~~~^
        sender=origin,
        ^^^^^^^^^^^^^^
    ...<4 lines>...
        using=using,
        ^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/dispatch/dispatcher.py", line 189, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/apps/transactions/signals.py", line 70, in handle_escrow_status_changes
    instance.save(
    ~~~~~~~~~~~~~^
        update_fields=["status_changed_at", "is_auto_transition_scheduled"]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1013, in save_base
    post_save.send(
    ~~~~~~~~~~~~~~^
        sender=origin,
        ^^^^^^^^^^^^^^
    ...<4 lines>...
        using=using,
        ^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/dispatch/dispatcher.py", line 189, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/apps/transactions/signals.py", line 36, in invalidate_transaction_caches
    transaction=instance, tracking_id=instance.tracking
                                      ^^^^^^^^^^^^^^^^^
AttributeError: 'EscrowTransaction' object has no attribute 'tracking'. Did you mean: 'tracking_id'?
2025-06-12 06:08:35,448 django.utils.autoreload INFO     /workspaces/apps/transactions/signals.py changed, reloading.
2025-06-12 06:08:38,384 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 06:08:49,220 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-12 06:08:54,274 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 06:08:54,275 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 06:08:54,285 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:08:54,285 products_performance INFO     Deleting list caches with pattern
2025-06-12 06:08:54,287 products_performance WARNING   No product list cache keys found to delete
2025-06-12 06:08:54,287 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:08:54,376 django.request ERROR    Internal Server Error: /api/v1/inventory/place-in-escrow/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/products/product_inventory/views.py", line 192, in place_in_escrow
    result = InventoryService.place_in_escrow(
        product=product, quantity=quantity, buyer=request.user, notes=notes
    )
  File "/usr/local/lib/python3.13/contextlib.py", line 85, in inner
    return func(*args, **kwds)
  File "/workspaces/apps/products/product_inventory/services.py", line 181, in place_in_escrow
    escrow_transaction = EscrowTransaction.objects.create(
        product=product,
    ...<9 lines>...
        notes=notes,
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 679, in create
    obj.save(force_insert=True, using=self.db)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 892, in save
    self.save_base(
    ~~~~~~~~~~~~~~^
        using=using,
        ^^^^^^^^^^^^
    ...<2 lines>...
        update_fields=update_fields,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/base.py", line 1013, in save_base
    post_save.send(
    ~~~~~~~~~~~~~~^
        sender=origin,
        ^^^^^^^^^^^^^^
    ...<4 lines>...
        using=using,
        ^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/dispatch/dispatcher.py", line 189, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/workspaces/apps/transactions/signals.py", line 36, in invalidate_transaction_caches
    transaction=instance, tracking_id=instance.tracking
                                      ^^^^^^^^^^^^^^^^^
AttributeError: 'EscrowTransaction' object has no attribute 'tracking'. Did you mean: 'tracking_id'?
2025-06-12 06:09:27,068 django.utils.autoreload INFO     /workspaces/apps/transactions/signals.py changed, reloading.
2025-06-12 06:09:29,913 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 06:09:40,604 django.request WARNING  Method Not Allowed: /api/v1/inventory/place-in-escrow/
2025-06-12 06:09:45,846 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 06:09:45,847 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 06:09:45,864 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:09:45,864 products_performance INFO     Deleting list caches with pattern
2025-06-12 06:09:45,866 products_performance WARNING   No product list cache keys found to delete
2025-06-12 06:09:45,868 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:09:45,899 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 06:09:45,902 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 06:09:45,903 transactions_performance INFO     Invalidated caches for transaction 0652e7ab-2fbf-481e-8f3e-dbeb556aef29 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 06:09:45,919 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 06:09:45,922 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 06:09:45,922 transactions_performance INFO     Invalidated caches for transaction 0652e7ab-2fbf-481e-8f3e-dbeb556aef29 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 06:09:45,931 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 06:09:45,936 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 06:09:45,937 transactions_performance INFO     Invalidated caches for transaction 0652e7ab-2fbf-481e-8f3e-dbeb556aef29 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 06:09:51,279 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:0f0953afcd45 
2025-06-12 06:09:51,322 transactions_performance INFO     Fetched 2 transactions (purchases) for user 8986d141-3892-4ded-aa17-5041d599a353 in 43.43ms
2025-06-12 06:10:44,036 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 06:10:44,036 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 06:10:44,041 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:10:44,041 products_performance INFO     Deleting list caches with pattern
2025-06-12 06:10:44,043 products_performance WARNING   No product list cache keys found to delete
2025-06-12 06:10:44,044 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:10:44,069 transactions_performance INFO     Deleting 1 cache keys for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 06:10:44,073 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:0f0953afcd45
2025-06-12 06:10:44,076 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 06:10:44,078 transactions_performance INFO     Invalidated caches for transaction 21438470-96a6-4e02-adf5-d4bb51bde0ba (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 06:10:44,092 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 06:10:44,095 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 06:10:44,096 transactions_performance INFO     Invalidated caches for transaction 21438470-96a6-4e02-adf5-d4bb51bde0ba (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 06:10:44,110 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 06:10:44,114 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 06:10:44,115 transactions_performance INFO     Invalidated caches for transaction 21438470-96a6-4e02-adf5-d4bb51bde0ba (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 06:10:47,640 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:0f0953afcd45 
2025-06-12 06:10:47,757 transactions_performance INFO     Fetched 3 transactions (purchases) for user 8986d141-3892-4ded-aa17-5041d599a353 in 117.67ms
2025-06-12 06:10:52,594 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:0f0953afcd45 
2025-06-12 06:10:52,600 transactions_performance INFO     Cache hit for user 8986d141-3892-4ded-aa17-5041d599a353 transactions (purchases) in 6.63ms
2025-06-12 06:11:03,225 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:bf6ee2afd182 
2025-06-12 06:11:03,303 transactions_performance INFO     Fetched 3 transactions (all) for user 8986d141-3892-4ded-aa17-5041d599a353 in 78.47ms
2025-06-12 06:11:12,974 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 06:11:12,975 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 19:40:17,820 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 19:40:17,821 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 19:40:17,854 products_performance INFO     Cached product list with 4 items: safetrade:product_base:list:bdeae2c90faa
2025-06-12 19:40:17,975 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 19:40:17,975 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 19:40:24,341 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 19:40:24,342 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 19:40:24,438 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 19:40:24,439 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 19:41:48,188 django.request ERROR    Internal Server Error: /api/v1/transactions/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 97, in list
    queryset = self.get_queryset()
  File "/workspaces/apps/transactions/views.py", line 75, in get_queryset
    return EscrowTransaction.objects.filter(Q(buyer=user) | Q(seller=user))
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1468, in build_filter
    return self._add_q(
           ~~~~~~~~~~~^
        filter_expr,
        ^^^^^^^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-12 19:45:27,326 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 19:45:29,267 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 19:46:05,128 django.request WARNING  Unauthorized: /api/v1/transactions/
2025-06-12 19:46:10,681 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 19:46:15,372 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:bf6ee2afd182 
2025-06-12 19:46:15,398 transactions_performance INFO     Fetched 3 transactions (all) for user 8986d141-3892-4ded-aa17-5041d599a353 in 26.69ms
2025-06-12 19:47:04,410 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:2f4912cc09af 
2025-06-12 19:47:04,429 transactions_performance INFO     Fetched 0 transactions (sales) for user 8986d141-3892-4ded-aa17-5041d599a353 in 19.24ms
2025-06-12 19:47:50,809 transactions_performance INFO     Track cache MISS for TRK-888AFC5C-708644-077C49 in 15.5ms
2025-06-12 19:58:23,641 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 19:58:26,118 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 19:59:02,365 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 19:59:04,993 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 19:59:09,406 transactions_performance INFO     Track cache MISS for TRK-888AFC5C-708644-077C49 in 13.3ms
2025-06-12 20:00:09,500 django.utils.autoreload INFO     /workspaces/apps/transactions/models.py changed, reloading.
2025-06-12 20:00:11,569 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:04:23,946 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 20:04:25,867 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:04:30,255 django.request WARNING  Unauthorized: /api/v1/transactions/track/TRK-888AFC5C-708644-077C49/
2025-06-12 20:04:39,212 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 20:04:43,527 transactions_performance INFO     Track cache MISS for TRK-888AFC5C-708644-077C49 in 15.8ms
2025-06-12 20:05:31,049 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 20:05:33,195 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:05:39,958 transactions_performance INFO     Track cache HIT for TRK-888AFC5C-708644-077C49 in 0.7ms
2025-06-12 20:06:24,821 transactions_performance INFO     Track cache HIT for TRK-888AFC5C-708644-077C49 in 0.8ms
2025-06-12 20:08:21,621 transactions_performance INFO     Track cache MISS for TRK-888AFC5C-708644-077C49 in 20.3ms
2025-06-12 20:10:54,187 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 20:10:56,277 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:11:01,959 django.request ERROR    Internal Server Error: /api/v1/transactions/track/TRK-888AFC5C-708644-077C49/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 190, in track
    data, from_cache = TransactionListService.get_tracking(
                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tracking_id, request.user
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/apps/transactions/services/transaction_list_service.py", line 252, in get_tracking
    tx_data = EscrowTransactionTrackingSerializer(tx).data
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/fields.py", line 1869, in to_representation
    method = getattr(self.parent, self.method_name)
AttributeError: 'EscrowTransactionTrackingSerializer' object has no attribute 'get_image_url'
2025-06-12 20:11:32,002 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 20:11:33,771 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:11:36,729 transactions_performance INFO     Track cache MISS for TRK-888AFC5C-708644-077C49 in 12.2ms
2025-06-12 20:12:42,000 django.utils.autoreload INFO     /workspaces/apps/products/product_base/serializers.py changed, reloading.
2025-06-12 20:12:43,637 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:12:48,257 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 20:12:48,258 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 20:12:51,282 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 20:12:51,282 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 20:12:51,292 products_performance INFO     Cached product list with 4 items: safetrade:product_base:list:bdeae2c90faa
2025-06-12 20:12:51,341 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 20:12:51,341 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 20:13:27,484 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-12 20:13:27,484 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-12 20:13:27,486 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 20:13:27,486 products_performance INFO     Deleting list caches with pattern
2025-06-12 20:13:27,486 products_performance WARNING   No product list cache keys found to delete
2025-06-12 20:13:27,486 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 20:13:27,572 transactions_performance INFO     Deleting 3 cache keys for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 20:13:27,573 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:2f4912cc09af
2025-06-12 20:13:27,574 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:bf6ee2afd182
2025-06-12 20:13:27,575 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:0f0953afcd45
2025-06-12 20:13:27,576 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 20:13:27,576 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 20:13:27,579 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 20:13:27,579 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 20:13:27,580 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 20:13:27,581 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 20:13:27,582 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 20:13:27,582 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 20:13:31,532 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 20:13:31,532 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 20:13:31,605 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 20:13:31,605 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 20:13:45,860 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 20:13:45,861 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 20:21:31,728 django.request WARNING  Unauthorized: /api/v1/transactions/
2025-06-12 20:21:36,175 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 20:21:43,031 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:bf6ee2afd182 
2025-06-12 20:21:43,053 transactions_performance INFO     Fetched 4 transactions (all) for user 8986d141-3892-4ded-aa17-5041d599a353 in 22.47ms
2025-06-12 20:21:51,229 django.request WARNING  Not Found: /api/v1/transactions/update-status/
2025-06-12 20:22:46,708 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 20:22:49,066 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:23:01,053 django.request WARNING  Method Not Allowed: /api/v1/transactions/update-status/
2025-06-12 20:38:18,934 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 20:38:22,806 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:39:15,205 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 20:39:18,430 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:43:38,042 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-12 20:43:41,641 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 20:48:26,730 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 20:48:30,277 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 21:00:30,313 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 21:00:36,356 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 21:36:16,143 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 21:36:20,100 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 21:36:26,098 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 21:36:29,326 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 21:36:33,145 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 21:36:39,953 django.request WARNING  Not Found: /api/v1/transactions/update-status/
2025-06-12 21:36:47,775 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:bf6ee2afd182 
2025-06-12 21:36:47,944 transactions_performance INFO     Fetched 4 transactions (all) for user 8986d141-3892-4ded-aa17-5041d599a353 in 175.44ms
2025-06-12 21:37:34,435 django.request WARNING  Method Not Allowed: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 21:40:04,561 transactions_performance ERROR    Failed to update transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status to payment_received: ["Permission denied: Cannot transition from 'initiated' to 'payment_received' as buyer"]
2025-06-12 21:40:04,657 django.request ERROR    Internal Server Error: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
Traceback (most recent call last):
  File "/workspaces/apps/transactions/views.py", line 232, in update_status
    EscrowTransactionService.update_escrow_transaction_status(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        escrow_transaction=transaction,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        shipping_carrier=shipping_carrier,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/contextlib.py", line 85, in inner
    return func(*args, **kwds)
  File "/workspaces/apps/transactions/services/escrow_services.py", line 157, in update_escrow_transaction_status
    raise ValidationError(f"Permission denied: {permission_reason}")
django.core.exceptions.ValidationError: ["Permission denied: Cannot transition from 'initiated' to 'payment_received' as buyer"]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 256, in update_status
    return self.error_response(
           ~~~~~~~~~~~~~~~~~~~^
        message=str(e),
        ^^^^^^^^^^^^^^^
        status=status.HTTP_400_BAD_REQUEST,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: BaseResponseMixin.error_response() got an unexpected keyword argument 'status'
2025-06-12 21:40:14,631 django.request WARNING  Method Not Allowed: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 21:40:56,528 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 21:40:59,314 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 21:41:06,426 transactions_performance ERROR    Failed to update transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status to payment_received: ["Permission denied: Cannot transition from 'initiated' to 'payment_received' as buyer"]
2025-06-12 21:41:06,610 django.request WARNING  Bad Request: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 21:41:48,619 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 21:42:26,077 transactions_performance INFO     Deleting 1 cache keys for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 21:42:26,081 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:bf6ee2afd182
2025-06-12 21:42:26,090 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 21:42:26,091 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 21:42:26,098 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 21:42:26,102 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 21:42:26,104 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 21:42:26,178 transactions_performance ERROR    Failed to update transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status to payment_received: TransactionHistory() got unexpected keyword arguments: 'previous_status', 'new_status'
2025-06-12 21:42:26,181 transactions_performance ERROR    Unexpected error updating transaction status: TransactionHistory() got unexpected keyword arguments: 'previous_status', 'new_status'
2025-06-12 21:42:26,262 django.request ERROR    Internal Server Error: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 21:48:47,222 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-12 21:48:50,295 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 21:57:37,490 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 21:57:40,275 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:08:41,864 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 22:08:44,784 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:09:27,699 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 22:09:30,124 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:12:34,557 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 22:12:37,278 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:12:49,421 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-12 22:12:52,264 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:18:54,410 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/services.py changed, reloading.
2025-06-12 22:18:57,177 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:19:05,106 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/services.py changed, reloading.
2025-06-12 22:19:07,846 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:20:41,360 django.utils.autoreload INFO     /workspaces/apps/transactions/admin.py changed, reloading.
2025-06-12 22:20:44,618 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:21:36,924 django.utils.autoreload INFO     /workspaces/apps/transactions/admin.py changed, reloading.
2025-06-12 22:21:39,452 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:23:42,712 django.utils.autoreload INFO     /workspaces/apps/transactions/admin.py changed, reloading.
2025-06-12 22:23:45,448 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:24:33,668 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 22:24:37,413 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 22:24:37,418 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:24:37,419 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 22:24:37,425 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 22:24:37,427 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:24:37,428 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 22:24:37,520 transactions_performance INFO     Transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status updated from initiated to payment_received by user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:24:37,546 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 22:24:37,554 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:24:37,555 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 22:24:37,644 transactions_performance ERROR    Unexpected error updating transaction status: Field name `status` is not valid for model `TransactionHistory` in `apps.transactions.serializers.TransactionHistorySerializer`.
2025-06-12 22:24:37,701 django.request ERROR    Internal Server Error: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 22:26:00,559 django.utils.autoreload INFO     /workspaces/apps/transactions/serializers.py changed, reloading.
2025-06-12 22:26:03,503 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:26:10,139 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 22:26:10,143 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:26:10,143 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 22:26:10,146 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 22:26:10,147 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:26:10,148 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 22:26:10,151 transactions_performance INFO     Transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status updated from payment_received to payment_received by user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:26:10,158 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 22:26:10,159 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:26:10,160 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 22:27:02,133 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 22:27:02,138 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:27:02,139 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 22:27:02,144 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 22:27:02,146 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:27:02,148 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 22:27:02,156 transactions_performance INFO     Transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status updated from payment_received to payment_received by user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:27:02,167 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 22:27:02,170 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 22:27:02,171 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 22:27:43,457 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-12 22:27:46,757 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 22:29:08,754 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-12 22:29:12,112 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:22:39,243 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 23:22:41,401 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:23:50,467 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 23:23:57,565 transactions_performance ERROR    Unexpected error updating transaction status: BaseResponseMixin.error_response() got an unexpected keyword argument 'status'
2025-06-12 23:23:57,582 django.request ERROR    Internal Server Error: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:24:45,793 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 23:24:47,845 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:24:53,125 django.request WARNING  Bad Request: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:25:07,016 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 23:25:08,802 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:25:14,093 django.request WARNING  Bad Request: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:25:48,149 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-12 23:25:50,197 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:27:40,962 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 23:28:48,160 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 23:29:00,570 django.request WARNING  Method Not Allowed: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:29:13,546 transactions_performance ERROR    Failed to update transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status to shipped: ["Validation failed: Tracking number is required when updating status to 'shipped'"]
2025-06-12 23:29:13,556 django.request WARNING  Bad Request: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:32:27,329 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:32:27,335 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:32:27,336 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:32:27,341 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:32:27,342 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:32:27,343 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:32:27,367 transactions_performance INFO     Transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status updated from payment_received to shipped by user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:32:27,371 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:32:27,371 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:32:27,372 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:32:48,804 django.request WARNING  Bad Request: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:33:23,256 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 23:33:56,906 django.request WARNING  Method Not Allowed: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/validate-action/
2025-06-12 23:34:03,608 django.request WARNING  Method Not Allowed: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:34:08,734 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:34:08,735 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:34:08,735 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:34:08,736 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:34:08,737 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:34:08,737 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:34:08,739 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:34:08,740 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:34:08,740 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:34:08,741 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:34:08,742 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:34:08,742 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:34:08,742 transactions_performance ERROR    Failed to update transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status to delivered: schedule_auto_inspection() takes 1 positional argument but 2 were given
2025-06-12 23:34:08,743 transactions_performance ERROR    Unexpected error updating transaction status: schedule_auto_inspection() takes 1 positional argument but 2 were given
2025-06-12 23:34:08,762 django.request ERROR    Internal Server Error: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:35:31,020 django.request WARNING  Method Not Allowed: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:35:55,227 django.request WARNING  Method Not Allowed: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/update-status/
2025-06-12 23:36:25,303 django.utils.autoreload INFO     /workspaces/apps/transactions/signals.py changed, reloading.
2025-06-12 23:36:27,361 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:36:59,032 django.utils.autoreload INFO     /workspaces/apps/transactions/signals.py changed, reloading.
2025-06-12 23:37:04,200 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:37:19,429 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:37:19,429 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:37:19,429 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:37:19,431 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:37:19,431 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:37:19,431 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:37:19,433 transactions_performance INFO     Transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b status updated from shipped to delivered by user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:37:19,437 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-12 23:37:19,438 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-12 23:37:19,438 transactions_performance INFO     Invalidated caches for transaction 84eaec81-0a8c-42ed-b5af-63b5c8064b8b (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-12 23:38:18,091 django.request WARNING  Method Not Allowed: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/validate-action/
2025-06-12 23:39:26,295 django.request ERROR    Internal Server Error: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/validate-action/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/parsers.py", line 66, in parse
    return json.load(decoded_stream, parse_constant=parse_constant)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/utils/json.py", line 31, in load
    return json.load(*args, **kwargs)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/local/lib/python3.13/json/__init__.py", line 359, in loads
    return cls(**kw).decode(s)
           ~~~~~~~~~~~~~~~~^^^
  File "/usr/local/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Illegal trailing comma before end of object: line 2 column 26 (char 27)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/apps/transactions/views.py", line 407, in validate_action
    proposed_status = request.data.get("status")
                      ^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/request.py", line 221, in data
    self._load_data_and_files()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/request.py", line 284, in _load_data_and_files
    self._data, self._files = self._parse()
                              ~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/request.py", line 359, in _parse
    parsed = parser.parse(stream, media_type, self.parser_context)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/parsers.py", line 68, in parse
    raise ParseError('JSON parse error - %s' % str(exc))
rest_framework.exceptions.ParseError: JSON parse error - Illegal trailing comma before end of object: line 2 column 26 (char 27)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 441, in validate_action
    return self.error_response(
           ~~~~~~~~~~~~~~~~~~~^
        message=f"Error validating action: {str(e)}",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        status=status.HTTP_500_INTERNAL_SERVER_ERROR,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: BaseResponseMixin.error_response() got an unexpected keyword argument 'status'
2025-06-12 23:39:41,302 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 23:39:43,581 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:39:52,565 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 23:40:00,152 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:40:10,769 django.request WARNING  Method Not Allowed: /api/v1/transactions/84eaec81-0a8c-42ed-b5af-63b5c8064b8b/validate-action/
2025-06-12 23:41:06,013 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:bf6ee2afd182 
2025-06-12 23:41:06,053 transactions_performance INFO     Fetched 4 transactions (all) for user 8986d141-3892-4ded-aa17-5041d599a353 in 41.11ms
2025-06-12 23:41:09,242 django.request ERROR    Internal Server Error: /api/v1/transactions/my-transactions-actions/
Traceback (most recent call last):
  File "/workspaces/apps/transactions/views.py", line 368, in my_transactions_actions
    "other_party": self._get_other_party_info(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'EscrowTransactionViewSet' object has no attribute '_get_other_party_info'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/transactions/views.py", line 389, in my_transactions_actions
    return self.error_response(
           ~~~~~~~~~~~~~~~~~~~^
        message=f"Error fetching user transactions: {str(e)}",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        status=status.HTTP_500_INTERNAL_SERVER_ERROR,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: BaseResponseMixin.error_response() got an unexpected keyword argument 'status'
2025-06-12 23:41:37,536 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 23:41:40,028 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:41:44,537 django.request ERROR    Internal Server Error: /api/v1/transactions/my-transactions-actions/
2025-06-12 23:42:14,176 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-12 23:42:18,339 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:49:13,753 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 23:49:13,754 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-12 23:51:31,617 django.request ERROR    Internal Server Error: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 186, in retrieve
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 87, in get_object
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 102, in get_queryset
    base_queryset = base_queryset.filter(seller=self.request.user)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-12 23:51:37,629 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-12 23:51:42,416 django.request WARNING  Not Found: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
2025-06-12 23:53:02,934 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 23:53:02,935 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 23:53:02,945 products_performance INFO     Cached product list with 4 items: safetrade:product_base:list:bdeae2c90faa
2025-06-12 23:53:03,004 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 23:53:03,005 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-12 23:53:21,857 django.request WARNING  Not Found: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
2025-06-12 23:54:19,414 django.request WARNING  Not Found: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
2025-06-12 23:55:11,859 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-12 23:55:11,860 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-12 23:55:31,002 django.request WARNING  Not Found: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
2025-06-12 23:56:39,179 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-12 23:56:44,021 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:56:50,128 django.request WARNING  Not Found: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
2025-06-12 23:56:52,940 django.request WARNING  Not Found: /api/v1/products/42757f29-42d8-40b8-b8d9-858246c70939/
2025-06-12 23:57:11,624 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-12 23:57:18,253 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-12 23:57:50,343 django.request WARNING  Not Found: /api/v1/products/42c3aa40-10e2-48f5-bc7c-844936fbbfc4/
2025-06-12 23:58:03,758 django.request WARNING  Not Found: /api/v1/products/h/
2025-06-12 23:58:12,540 django.request WARNING  Not Found: /api/v1/product
2025-06-12 23:58:57,059 django.request WARNING  Not Found: /api/v1/products/h/
2025-06-12 23:58:58,483 django.request WARNING  Not Found: /api/v1/products/42c3aa40-10e2-48f5-bc7c-844936fbbfc4/
2025-06-12 23:59:13,306 django.request WARNING  Not Found: /api/v1/products/bc179d30-efb4-46f3-9a95-1b02fe8f7d9b/
2025-06-13 00:05:18,307 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-13 00:05:26,811 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-13 00:05:34,443 django.request WARNING  Method Not Allowed: /api/v1/auth/refresh/
2025-06-13 00:05:35,977 django.request WARNING  Method Not Allowed: /api/v1/auth/refresh/
2025-06-13 00:05:39,290 django.request WARNING  Not Found: /api/v1/products/bc179d30-efb4-46f3-9a95-1b02fe8f7d9b/
2025-06-13 00:06:41,847 django.request WARNING  Method Not Allowed: /api/v1/products/bc179d30-efb4-46f3-9a95-1b02fe8f7d9b/toggle-featured/
2025-06-13 00:06:46,454 django.request WARNING  Method Not Allowed: /api/v1/products/bc179d30-efb4-46f3-9a95-1b02fe8f7d9b/toggle-featured/
2025-06-13 00:06:52,878 django.request WARNING  Forbidden: /api/v1/products/bc179d30-efb4-46f3-9a95-1b02fe8f7d9b/watchers/
2025-06-13 00:06:58,664 django.request WARNING  Method Not Allowed: /api/v1/products/bc179d30-efb4-46f3-9a95-1b02fe8f7d9b/toggle-featured/
2025-06-13 00:08:02,311 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-13 00:08:02,311 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-w857-DYKyuA-06d23209, Created: False
2025-06-13 00:08:02,312 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-13 00:08:02,313 products_performance INFO     Deleting list caches with pattern
2025-06-13 00:08:02,314 products_performance WARNING   No product list cache keys found to delete
2025-06-13 00:08:02,314 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-w857-DYKyuA-06d23209
2025-06-13 10:16:24,527 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/services.py changed, reloading.
2025-06-13 10:16:32,480 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-13 10:37:28,861 django.utils.autoreload INFO     /workspaces/apps/transactions/signals.py changed, reloading.
2025-06-13 10:37:30,594 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-13 10:47:17,227 django.utils.autoreload INFO     /workspaces/apps/transactions/models/transaction_history.py changed, reloading.
2025-06-13 10:47:20,130 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 14:14:36,074 django.utils.autoreload INFO     /workspaces/apps/transactions/models/timeout.py changed, reloading.
2025-06-14 14:14:39,150 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 14:45:47,854 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-14 14:45:49,711 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 14:46:58,514 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-14 14:47:00,626 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 14:51:01,148 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-14 14:51:03,696 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 14:52:32,804 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-14 14:52:34,594 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 14:53:44,242 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-14 14:53:55,171 transactions_performance INFO     Track cache MISS for TRK-888AFC5C-708644-077C49 in 33.1ms
2025-06-14 14:54:07,106 transactions_performance INFO     cache key:safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:bf6ee2afd182 
2025-06-14 14:54:07,143 transactions_performance INFO     Fetched 4 transactions (all) for user 8986d141-3892-4ded-aa17-5041d599a353 in 37.57ms
2025-06-14 14:54:43,830 django.request WARNING  Method Not Allowed: /api/v1/transactions/4adb4348-0859-4266-a11d-d1305efe1a55/update-status/
2025-06-14 15:11:32,470 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-14 15:16:30,591 transactions_performance ERROR    Failed to update transaction 4adb4348-0859-4266-a11d-d1305efe1a55 status to payment_receive: ["Permission denied: Cannot transition from 'initiated' to 'payment_receive' as buyer"]
2025-06-14 15:16:30,742 django.request WARNING  Bad Request: /api/v1/transactions/4adb4348-0859-4266-a11d-d1305efe1a55/update-status/
2025-06-14 15:17:03,478 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-14 15:17:11,343 transactions_performance INFO     Deleting 1 cache keys for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:17:11,349 transactions_performance INFO      Deleted cache key: safetrade:escrow:transaction:list:8986d141-3892-4ded-aa17-5041d599a353:bf6ee2afd182
2025-06-14 15:17:11,357 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:17:11,358 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:17:11,368 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:17:11,374 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:17:11,376 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:17:11,395 transactions_performance INFO     Transaction 4adb4348-0859-4266-a11d-d1305efe1a55 status updated from initiated to payment_receive by user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:17:11,408 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:17:11,414 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:17:11,415 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:17:24,478 django.request WARNING  Bad Request: /api/v1/transactions/4adb4348-0859-4266-a11d-d1305efe1a55/update-status/
2025-06-14 15:19:39,560 django.utils.autoreload INFO     /workspaces/apps/transactions/services/escrow_services.py changed, reloading.
2025-06-14 15:19:42,840 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 15:19:59,120 django.utils.autoreload INFO     /workspaces/apps/transactions/views.py changed, reloading.
2025-06-14 15:20:02,072 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 15:20:09,329 django.request WARNING  Bad Request: /api/v1/transactions/4adb4348-0859-4266-a11d-d1305efe1a55/update-status/
2025-06-14 15:20:17,295 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-14 15:20:35,449 transactions_performance ERROR    Failed to update transaction 4adb4348-0859-4266-a11d-d1305efe1a55 status to shipped: ["Validation failed: Tracking number is required when updating status to 'shipped'"]
2025-06-14 15:20:35,502 django.request WARNING  Bad Request: /api/v1/transactions/4adb4348-0859-4266-a11d-d1305efe1a55/update-status/
2025-06-14 15:22:29,586 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:22:29,589 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:22:29,589 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:22:29,593 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:22:29,594 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:22:29,595 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:22:29,598 transactions_performance INFO     Transaction 4adb4348-0859-4266-a11d-d1305efe1a55 status updated from payment_receive to shipped by user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:22:29,604 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:22:29,606 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:22:29,606 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:23:14,369 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:23:14,375 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:23:14,376 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:23:14,381 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:23:14,383 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:23:14,383 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:23:14,389 transactions_performance INFO     Transaction 4adb4348-0859-4266-a11d-d1305efe1a55 status updated from shipped to delivered by user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:23:14,398 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:23:14,401 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:23:14,401 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:23:26,268 django.request WARNING  Bad Request: /api/v1/transactions/4adb4348-0859-4266-a11d-d1305efe1a55/update-status/
2025-06-14 15:23:57,051 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-14 15:24:21,842 django.request WARNING  Method Not Allowed: /api/v1/transactions/4adb4348-0859-4266-a11d-d1305efe1a55/update-status/
2025-06-14 15:26:03,090 django.request WARNING  Method Not Allowed: /api/v1/transactions/4adb4348-0859-4266-a11d-d1305efe1a55/update-status/
2025-06-14 15:26:08,232 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:26:08,234 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:26:08,235 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:26:08,241 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:26:08,243 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:26:08,245 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:26:08,253 transactions_performance INFO     Transaction 4adb4348-0859-4266-a11d-d1305efe1a55 status updated from delivered to inspection by user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:26:08,264 transactions_performance WARNING   No transaction cache keys found for user 8986d141-3892-4ded-aa17-5041d599a353
2025-06-14 15:26:08,268 transactions_performance WARNING   No transaction cache keys found for user 4b45ecbe-a627-41c7-a12c-b9242018c14e
2025-06-14 15:26:08,269 transactions_performance INFO     Invalidated caches for transaction 4adb4348-0859-4266-a11d-d1305efe1a55 (buyer: 8986d141-3892-4ded-aa17-5041d599a353, seller: 4b45ecbe-a627-41c7-a12c-b9242018c14e)
2025-06-14 15:26:38,625 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-14 15:26:38,629 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-14 15:27:24,021 django.request WARNING  Method Not Allowed: /api/v1/products/bc179d30-efb4-46f3-9a95-1b02fe8f7d9b/toggle-featured/
2025-06-14 15:27:31,547 django.request WARNING  Not Found: /api/v1/products/bc179d30-efb4-46f3-9a95-1b02fe8f7d9b/
2025-06-14 15:27:36,308 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 15:27:36,309 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 15:27:36,324 products_performance INFO     Cached product list with 4 items: safetrade:product_base:list:bdeae2c90faa
2025-06-14 15:27:36,432 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 15:27:36,432 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 15:28:17,920 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-14 15:28:17,923 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-14 15:37:22,642 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-14 15:37:25,947 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 15:39:18,244 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-14 15:39:22,429 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-14 15:39:33,391 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-14 15:39:37,385 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-14 15:39:43,246 django.request WARNING  Forbidden: /api/v1/inventory/add/
2025-06-14 15:40:20,244 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-14 15:40:53,827 django.request WARNING  Method Not Allowed: /api/v1/inventory/add/
2025-06-14 15:40:58,189 django.request WARNING  Bad Request: /api/v1/inventory/add/
2025-06-14 15:55:55,665 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-14 15:55:59,316 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 15:56:20,673 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-14 15:56:24,046 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 15:56:54,842 django.request ERROR    Internal Server Error: /api/v1/products/c27f290f-803f-4504-8a4c-bc3a98f9802d/
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2761, in to_python
    return uuid.UUID(**{input_form: value})
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/uuid.py", line 178, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'AnonymousUser' object has no attribute 'replace'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/workspaces/apps/core/views.py", line 186, in retrieve
    instance = self.get_object()
  File "/workspaces/.venv/lib/python3.13/site-packages/rest_framework/generics.py", line 87, in get_object
    queryset = self.filter_queryset(self.get_queryset())
                                    ~~~~~~~~~~~~~~~~~^^
  File "/workspaces/apps/products/product_base/views.py", line 88, in get_queryset
    base_queryset = base_queryset.filter(seller=self.request.user)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1476, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1501, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1555, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1385, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 30, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 156, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2745, in get_prep_value
    return self.to_python(value)
           ~~~~~~~~~~~~~~^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2763, in to_python
    raise exceptions.ValidationError(
    ...<3 lines>...
    )
django.core.exceptions.ValidationError: ['AnonymousUser is not a valid UUID.']
2025-06-14 15:57:01,150 apps.core.utils.cookie_set INFO     Authentication cookies set successfully
2025-06-14 15:57:10,525 django.request WARNING  Method Not Allowed: /api/v1/products/c27f290f-803f-4504-8a4c-bc3a98f9802d/update-product-status/
2025-06-14 16:00:40,853 django.utils.autoreload INFO     /workspaces/apps/products/product_base/views.py changed, reloading.
2025-06-14 16:00:44,407 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 16:00:50,356 django.utils.autoreload INFO     /workspaces/apps/products/product_inventory/views.py changed, reloading.
2025-06-14 16:00:56,341 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 16:01:02,227 django.request WARNING  Method Not Allowed: /api/v1/auth/refresh/
2025-06-14 16:01:09,223 django.request WARNING  Method Not Allowed: /api/v1/products/c27f290f-803f-4504-8a4c-bc3a98f9802d/update-product-status/
2025-06-14 16:01:42,627 django.request WARNING  Bad Request: /api/v1/products/c27f290f-803f-4504-8a4c-bc3a98f9802d/update-product-status/
2025-06-14 16:01:48,270 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-14 16:01:48,271 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-14 16:01:48,272 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-14 16:01:48,272 products_performance INFO     Deleting list caches with pattern
2025-06-14 16:01:48,273 products_performance WARNING   No product list cache keys found to delete
2025-06-14 16:01:48,273 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-14 16:02:18,468 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-14 16:02:18,469 apps.products.product_base.signals INFO     Product: lenevo-ideapad-55wu-5AZFlP-483e6fdf, Created: False
2025-06-14 16:02:18,475 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-14 16:02:18,476 products_performance INFO     Deleting list caches with pattern
2025-06-14 16:02:18,479 products_performance WARNING   No product list cache keys found to delete
2025-06-14 16:02:18,480 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-14 16:02:36,126 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-14 16:02:36,129 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-14 16:02:38,648 products_performance INFO     Cache MISS for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-14 16:02:38,650 products_performance INFO     Cached product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-yoga-360-3ui3-6mON1Y-bc8038a5
2025-06-14 16:02:43,112 products_performance INFO     Cache HIT for product detail by shortcode: safetrade:product_base:detail_by_shortcode:lenevo-ideapad-55wu-5AZFlP-483e6fdf
2025-06-14 16:02:54,241 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 16:02:54,243 products_performance INFO     Cache MISS for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 16:02:54,275 products_performance INFO     Cached product list with 5 items: safetrade:product_base:list:bdeae2c90faa
2025-06-14 16:02:54,488 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 16:02:54,490 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 16:03:52,914 django.request WARNING  Bad Request: /api/v1/inventory/add/
2025-06-14 16:04:12,197 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 16:04:12,198 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 16:04:12,451 products_performance INFO     Generated cache key for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 16:04:12,452 products_performance INFO     Cache HIT for product list: safetrade:product_base:list:bdeae2c90faa
2025-06-14 16:04:38,032 django.request WARNING  Method Not Allowed: /api/v1/products/42c3aa40-10e2-48f5-bc7c-844936fbbfc4/update-product-status/
2025-06-14 16:05:03,660 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-14 16:05:03,661 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496, Created: False
2025-06-14 16:05:03,664 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-14 16:05:03,665 products_performance INFO     Deleting list caches with pattern
2025-06-14 16:05:03,667 products_performance WARNING   No product list cache keys found to delete
2025-06-14 16:05:03,668 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-14 16:05:12,211 apps.products.product_base.signals INFO     === CACHE INVALIDATION TRIGGERED ===
2025-06-14 16:05:12,211 apps.products.product_base.signals INFO     Product: lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496, Created: False
2025-06-14 16:05:12,213 apps.products.product_base.signals INFO     Queued cache invalidation for product lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-14 16:05:12,214 products_performance INFO     Deleting list caches with pattern
2025-06-14 16:05:12,214 products_performance WARNING   No product list cache keys found to delete
2025-06-14 16:05:12,215 apps.products.product_base.signals INFO     Cache invalidation completed for product: lenevo-thinkpad-yoga-t7w2-eDrUGZ-b4e81496
2025-06-14 21:32:28,819 django.utils.autoreload INFO     /workspaces/conf/settings/dev.py changed, reloading.
2025-06-14 21:32:30,959 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 21:34:33,709 django.utils.autoreload INFO     /workspaces/manage.py changed, reloading.
2025-06-14 21:34:35,679 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 21:34:38,474 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-14 21:34:40,992 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 21:43:43,372 django.utils.autoreload INFO     /workspaces/conf/settings/base.py changed, reloading.
2025-06-14 21:43:45,296 django.utils.autoreload INFO     Watching for file changes with StatReloader
2025-06-14 22:21:51,551 celery.beat  INFO     beat: Starting...
2025-06-14 22:21:52,805 django_celery_beat.schedulers INFO     DatabaseScheduler: Schedule changed.
2025-06-14 22:21:55,844 celery.worker.consumer.connection INFO     Connected to redis://localhost:6379//
2025-06-14 22:21:55,865 celery.worker.consumer.mingle INFO     mingle: searching for neighbors
2025-06-14 22:21:56,913 celery.worker.consumer.mingle INFO     mingle: all alone
2025-06-14 22:21:57,023 celery.apps.worker INFO     default_worker@3d4835f6a4f3 ready.
2025-06-14 22:22:00,077 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:24:00,037 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:25:00,249 celery.beat  INFO     Scheduler: Sending due task check-expired-transactions-dev (apps.transactions.tasks.transitions_tasks.check_expired_transactions)
2025-06-14 22:25:00,361 celery.beat  INFO     Scheduler: Sending due task validate-timeout-consistency-dev (apps.transactions.tasks.periodic_migration.validate_timeout_consistency)
2025-06-14 22:26:00,065 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:28:00,104 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:28:14,779 flower.command INFO     Visit me at http://0.0.0.0:5555
2025-06-14 22:28:14,966 flower.command INFO     Broker: redis://localhost:6379//
2025-06-14 22:28:15,002 flower.command INFO     Registered tasks: 
['apps.core.tasks.test_task',
 'apps.monitoring.tasks.periodic_performance_check',
 'apps.notifications.tasks.send_auto_transition_reminders',
 'apps.notifications.tasks.send_status_change_notification',
 'apps.products.product_brand.tasks.auto_generate_variants_for_new_brands',
 'apps.products.product_brand.tasks.bulk_update_brand_stats',
 'apps.products.product_brand.tasks.notify_brand_request_approved',
 'apps.products.product_brand.tasks.notify_brand_request_rejected',
 'apps.products.product_brand.tasks.sync_variant_data_with_parent',
 'apps.products.product_brand.tasks.update_brand_stats',
 'apps.products.product_image.tasks.upload_product_image_task',
 'apps.products.product_inventory.tasks.cleanup_old_inventory_transactions',
 'apps.products.product_inventory.tasks.generate_inventory_report',
 'apps.products.product_inventory.tasks.send_low_inventory_alert',
 'apps.products.product_rating.tasks.bulk_update_rating_aggregates_task',
 'apps.products.product_rating.tasks.debounced_rating_aggregate_update',
 'apps.products.product_rating.tasks.update_product_rating_aggregates_task',
 'apps.products.product_variant.tasks.bulk_create_product_variants_task',
 'apps.products.product_variant.tasks.create_product_variants_task',
 'apps.products.product_variant.tasks.generate_variant_combinations_task',
 'apps.products.product_variant.tasks.update_product_variant_cache_task',
 'celery.accumulate',
 'celery.backend_cleanup',
 'celery.chain',
 'celery.chord',
 'celery.chord_unlock',
 'celery.chunks',
 'celery.group',
 'celery.map',
 'celery.starmap']
2025-06-14 22:28:15,081 kombu.mixins INFO     Connected to redis://localhost:6379//
2025-06-14 22:28:20,021 celery.worker.control INFO     Events of group {task} enabled by remote.
2025-06-14 22:30:00,035 celery.beat  INFO     Scheduler: Sending due task auto-fix-timeout-issues-dev (apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues)
2025-06-14 22:30:00,093 celery.beat  INFO     Scheduler: Sending due task generate-timeout-health-report-dev (apps.transactions.tasks.periodic_migration.generate_timeout_health_report)
2025-06-14 22:30:00,141 celery.beat  INFO     Scheduler: Sending due task check-expired-transactions-dev (apps.transactions.tasks.transitions_tasks.check_expired_transactions)
2025-06-14 22:30:00,192 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:30:00,237 celery.beat  INFO     Scheduler: Sending due task validate-timeout-consistency-dev (apps.transactions.tasks.periodic_migration.validate_timeout_consistency)
2025-06-14 22:32:00,239 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:33:32,194 celery.worker.consumer.connection INFO     Connected to redis://localhost:6379//
2025-06-14 22:33:32,203 celery.worker.consumer.mingle INFO     mingle: searching for neighbors
2025-06-14 22:33:33,224 celery.worker.consumer.mingle INFO     mingle: all alone
2025-06-14 22:33:33,297 celery.apps.worker INFO     default_worker@3d4835f6a4f3 ready.
2025-06-14 22:33:35,019 celery.worker.control INFO     Events of group {task} enabled by remote.
2025-06-14 22:34:00,043 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:35:00,062 celery.beat  INFO     Scheduler: Sending due task check-expired-transactions-dev (apps.transactions.tasks.transitions_tasks.check_expired_transactions)
2025-06-14 22:35:00,133 celery.beat  INFO     Scheduler: Sending due task validate-timeout-consistency-dev (apps.transactions.tasks.periodic_migration.validate_timeout_consistency)
2025-06-14 22:36:00,061 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:38:00,063 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:40:00,077 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:40:00,176 celery.beat  INFO     Scheduler: Sending due task check-expired-transactions-dev (apps.transactions.tasks.transitions_tasks.check_expired_transactions)
2025-06-14 22:40:00,208 celery.beat  INFO     Scheduler: Sending due task auto-fix-timeout-issues-dev (apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues)
2025-06-14 22:40:00,230 celery.beat  INFO     Scheduler: Sending due task validate-timeout-consistency-dev (apps.transactions.tasks.periodic_migration.validate_timeout_consistency)
2025-06-14 22:42:00,100 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:44:00,045 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:45:00,024 celery.beat  INFO     Scheduler: Sending due task validate-timeout-consistency-dev (apps.transactions.tasks.periodic_migration.validate_timeout_consistency)
2025-06-14 22:45:00,056 celery.beat  INFO     Scheduler: Sending due task check-expired-transactions-dev (apps.transactions.tasks.transitions_tasks.check_expired_transactions)
2025-06-14 22:45:13,133 celery.worker.consumer.connection INFO     Connected to redis://localhost:6379//
2025-06-14 22:45:13,148 celery.worker.consumer.mingle INFO     mingle: searching for neighbors
2025-06-14 22:45:13,163 celery.worker.control INFO     sync with celery@3d4835f6a4f3
2025-06-14 22:45:14,174 celery.worker.consumer.mingle INFO     mingle: sync with 1 nodes
2025-06-14 22:45:14,175 celery.worker.consumer.mingle INFO     mingle: sync complete
2025-06-14 22:45:14,279 celery.apps.worker INFO     celery@3d4835f6a4f3 ready.
2025-06-14 22:45:14,306 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.generate_timeout_health_report[07ef949d-8e2d-4b4c-a021-df22c1bfa5ba] received
2025-06-14 22:45:14,313 periodic_migration INFO     Generating timeout system health report
2025-06-14 22:45:14,322 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[d3d35dc0-e1e7-43be-88e4-9dd725f2ae4d] received
2025-06-14 22:45:14,335 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,445 periodic_migration INFO     Timeout health report generated: {'timestamp': '2025-06-14T22:45:14.317696+00:00', 'active_timeouts': 0, 'executed_last_7_days': 0, 'cancelled_last_7_days': 0, 'upcoming_24h': 0, 'overdue': 0, 'timeout_breakdown': {'inspection_start': {'active': 0, 'executed_last_7_days': 0}, 'inspection_end': {'active': 0, 'executed_last_7_days': 0}, 'dispute_refund': {'active': 0, 'executed_last_7_days': 0}, 'shipping': {'active': 0, 'executed_last_7_days': 0}}, 'health_status': 'healthy'}
2025-06-14 22:45:14,451 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.generate_timeout_health_report[07ef949d-8e2d-4b4c-a021-df22c1bfa5ba] succeeded in 0.13990878299955511s: {'timestamp': '2025-06-14T22:45:14.317696+00:00', 'active_timeouts': 0, 'executed_last_7_days': 0, 'cancelled_last_7_days': 0, 'upcoming_24h': 0, 'overdue': 0, 'timeout_breakdown': {'inspection_start': {'active': 0, 'executed_last_7_days': 0}, 'inspection_end': {'active': 0, 'executed_last_7_days': 0}, 'dispute_refund': {'active': 0, 'executed_last_7_days': 0}, 'shipping': {'active': 0, 'executed_last_7_days': 0}}, 'health_status': 'healthy'}
2025-06-14 22:45:14,458 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[9aa823e3-668f-4e2d-af5e-41d9a03b542b] received
2025-06-14 22:45:14,459 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:14,461 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:14,461 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,468 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[d3d35dc0-e1e7-43be-88e4-9dd725f2ae4d] succeeded in 0.13987197700043907s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,485 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[43302a08-5499-4a1c-aa34-3ab164e7297d] received
2025-06-14 22:45:14,486 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,518 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[9aa823e3-668f-4e2d-af5e-41d9a03b542b] retry: Retry in 5s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:14,527 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[c2c5cc49-aa55-42ca-ac1f-36593e0d1f83] received
2025-06-14 22:45:14,527 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,528 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 22:45:14,529 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[43302a08-5499-4a1c-aa34-3ab164e7297d] succeeded in 0.0428371150046587s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,529 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:14,533 celery.worker.strategy INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[c8e6ca9d-000b-49b1-9209-0d3c9a025c33] received
2025-06-14 22:45:14,548 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[c2c5cc49-aa55-42ca-ac1f-36593e0d1f83] retry: Retry in 0s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:14,549 transition_tasks INFO     Processed 0 expired timeouts
2025-06-14 22:45:14,551 celery.app.trace INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[c8e6ca9d-000b-49b1-9209-0d3c9a025c33] succeeded in 0.016381743997044396s: {'processed_count': 0, 'results': []}
2025-06-14 22:45:14,553 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e43394a-f126-4246-81d2-3f1934740b36] received
2025-06-14 22:45:14,555 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:14,556 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:14,558 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[36decdf5-8eb5-46cf-b433-eeb655c4bb68] received
2025-06-14 22:45:14,560 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,569 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e43394a-f126-4246-81d2-3f1934740b36] retry: Retry in 3s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:14,578 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e39eb30-aca2-4068-9d22-261f151355b9] received
2025-06-14 22:45:14,580 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:14,581 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:14,589 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,591 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[36decdf5-8eb5-46cf-b433-eeb655c4bb68] succeeded in 0.031044111005030572s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,592 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e39eb30-aca2-4068-9d22-261f151355b9] retry: Retry in 3s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:14,596 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[c643822b-19d9-4816-8ee6-65966131e352] received
2025-06-14 22:45:14,599 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,602 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[adec0935-3e84-4887-bef2-754676d05f0a] received
2025-06-14 22:45:14,604 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 22:45:14,606 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:14,641 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[adec0935-3e84-4887-bef2-754676d05f0a] retry: Retry in 0s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:14,646 celery.worker.strategy INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[d4877a07-eb10-4ccb-9434-a3025fb2b2ab] received
2025-06-14 22:45:14,647 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,650 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[c643822b-19d9-4816-8ee6-65966131e352] succeeded in 0.050829705003707204s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,654 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[fa6c61a1-0182-4632-ae15-82b4f5c1721f] received
2025-06-14 22:45:14,656 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:14,657 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:14,668 transition_tasks INFO     Processed 0 expired timeouts
2025-06-14 22:45:14,670 celery.app.trace INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[d4877a07-eb10-4ccb-9434-a3025fb2b2ab] succeeded in 0.02253563799604308s: {'processed_count': 0, 'results': []}
2025-06-14 22:45:14,674 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[fa6c61a1-0182-4632-ae15-82b4f5c1721f] retry: Retry in 5s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:14,677 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[6eab9d35-8b03-42f0-89c9-b27e823798ea] received
2025-06-14 22:45:14,680 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,683 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f97e31ef-541d-48f2-978f-9b0143417c9a] received
2025-06-14 22:45:14,685 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:14,686 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:14,702 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f97e31ef-541d-48f2-978f-9b0143417c9a] retry: Retry in 2s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:14,710 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[dd03de98-4437-4f6d-bc81-a339ab1b9147] received
2025-06-14 22:45:14,711 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,711 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,713 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[6eab9d35-8b03-42f0-89c9-b27e823798ea] succeeded in 0.03330577599990647s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,718 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[9aa823e3-668f-4e2d-af5e-41d9a03b542b] received
2025-06-14 22:45:14,721 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[c2b56619-3dcd-4667-86f4-7490785cd490] received
2025-06-14 22:45:14,722 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,739 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,741 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[dd03de98-4437-4f6d-bc81-a339ab1b9147] succeeded in 0.029475857998477295s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,745 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[c2c5cc49-aa55-42ca-ac1f-36593e0d1f83] received
2025-06-14 22:45:14,747 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 22:45:14,748 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:14,754 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,757 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[c2b56619-3dcd-4667-86f4-7490785cd490] succeeded in 0.0344416590014589s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,761 celery.worker.strategy INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[36aaebf7-0017-46c2-8a8f-3e54d4e1d42c] received
2025-06-14 22:45:14,762 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[c2c5cc49-aa55-42ca-ac1f-36593e0d1f83] retry: Retry in 2s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:14,771 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e43394a-f126-4246-81d2-3f1934740b36] received
2025-06-14 22:45:14,774 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[190dbc1a-c17d-4b2c-af1d-39393abd2faa] received
2025-06-14 22:45:14,775 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,780 transition_tasks INFO     Processed 0 expired timeouts
2025-06-14 22:45:14,799 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,802 celery.app.trace INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[36aaebf7-0017-46c2-8a8f-3e54d4e1d42c] succeeded in 0.03845720699609956s: {'processed_count': 0, 'results': []}
2025-06-14 22:45:14,802 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[190dbc1a-c17d-4b2c-af1d-39393abd2faa] succeeded in 0.027155684001627378s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,807 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e39eb30-aca2-4068-9d22-261f151355b9] received
2025-06-14 22:45:14,811 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[16dc96b3-80eb-4b46-9637-39983f55f858] received
2025-06-14 22:45:14,815 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[adec0935-3e84-4887-bef2-754676d05f0a] received
2025-06-14 22:45:14,816 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,817 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 22:45:14,818 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:14,828 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[adec0935-3e84-4887-bef2-754676d05f0a] retry: Retry in 5s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:14,836 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[30c3e455-975d-44b3-9ac2-f63a361ea822] received
2025-06-14 22:45:14,838 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,842 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,844 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[16dc96b3-80eb-4b46-9637-39983f55f858] succeeded in 0.028425688993593212s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,849 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[fa6c61a1-0182-4632-ae15-82b4f5c1721f] received
2025-06-14 22:45:14,855 celery.worker.strategy INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[39e4482d-0582-4c41-a8a9-4250e4778ee9] received
2025-06-14 22:45:14,873 transition_tasks INFO     Processed 0 expired timeouts
2025-06-14 22:45:14,875 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,875 celery.app.trace INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[39e4482d-0582-4c41-a8a9-4250e4778ee9] succeeded in 0.01915059200109681s: {'processed_count': 0, 'results': []}
2025-06-14 22:45:14,878 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[30c3e455-975d-44b3-9ac2-f63a361ea822] succeeded in 0.03932934899785323s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,885 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f97e31ef-541d-48f2-978f-9b0143417c9a] received
2025-06-14 22:45:14,888 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[f4aaf681-d120-4bab-91a2-3d4d0ee16c1d] received
2025-06-14 22:45:14,890 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,892 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[c2c5cc49-aa55-42ca-ac1f-36593e0d1f83] received
2025-06-14 22:45:14,896 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[f8548643-3183-4daf-9613-72aebdc1ae43] received
2025-06-14 22:45:14,897 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 22:45:14,926 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,927 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[f4aaf681-d120-4bab-91a2-3d4d0ee16c1d] succeeded in 0.03722630899574142s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,930 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 22:45:14,931 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[adec0935-3e84-4887-bef2-754676d05f0a] received
2025-06-14 22:45:14,932 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[f8548643-3183-4daf-9613-72aebdc1ae43] succeeded in 0.03504305599926738s: 'Periodic timeout scheduling completed'
2025-06-14 22:45:14,936 celery.worker.strategy INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[fc7572cc-8b4c-4cb6-af6a-8a9ce721ad6e] received
2025-06-14 22:45:14,950 transition_tasks INFO     Processed 0 expired timeouts
2025-06-14 22:45:14,952 celery.app.trace INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[fc7572cc-8b4c-4cb6-af6a-8a9ce721ad6e] succeeded in 0.01316262500040466s: {'processed_count': 0, 'results': []}
2025-06-14 22:45:15,022 celery.worker.control INFO     Events of group {task} enabled by remote.
2025-06-14 22:45:16,694 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:16,696 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:16,705 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f97e31ef-541d-48f2-978f-9b0143417c9a] received
2025-06-14 22:45:16,737 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f97e31ef-541d-48f2-978f-9b0143417c9a] retry: Retry in 3s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:16,754 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 22:45:16,757 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:16,772 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[c2c5cc49-aa55-42ca-ac1f-36593e0d1f83] received
2025-06-14 22:45:16,798 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[c2c5cc49-aa55-42ca-ac1f-36593e0d1f83] retry: Retry in 1s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:17,562 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:17,564 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:17,580 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e43394a-f126-4246-81d2-3f1934740b36] received
2025-06-14 22:45:17,590 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:17,592 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:17,608 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e43394a-f126-4246-81d2-3f1934740b36] retry: Retry in 1s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:17,631 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e39eb30-aca2-4068-9d22-261f151355b9] received
2025-06-14 22:45:17,635 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e39eb30-aca2-4068-9d22-261f151355b9] retry: Retry in 7s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:17,763 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 22:45:17,766 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:17,796 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[c2c5cc49-aa55-42ca-ac1f-36593e0d1f83] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 131, in auto_fix_timeout_issues
    transactions_with_multiple_timeouts = EscrowTransaction.objects.annotate(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        active_timeout_count=Count(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        )
        ^
    ).filter(active_timeout_count__gt=1)
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^
        annotation,
        ^^^^^^^^^^^
        alias,
        ^^^^^^
        select=select,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 1073, in resolve_expression
    c.source_expressions[pos] = arg.resolve_expression(
                                ~~~~~~~~~~~~~~~~~~~~~~^
        query, allow_joins, reuse, summarize, for_save
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 2010, in resolve_ref
    join_info = self.setup_joins(
        field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1863, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
                                       ~~~~~~~~~~~~~~~~~~^
        names[:pivot],
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        fail_on_missing=True,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:18,572 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:18,573 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:18,583 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e43394a-f126-4246-81d2-3f1934740b36] received
2025-06-14 22:45:18,604 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e43394a-f126-4246-81d2-3f1934740b36] retry: Retry in 18s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:19,468 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:19,470 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:19,480 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[9aa823e3-668f-4e2d-af5e-41d9a03b542b] received
2025-06-14 22:45:19,497 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[9aa823e3-668f-4e2d-af5e-41d9a03b542b] retry: Retry in 5s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:19,663 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:19,665 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:19,679 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[fa6c61a1-0182-4632-ae15-82b4f5c1721f] received
2025-06-14 22:45:19,703 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:19,705 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:19,708 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[fa6c61a1-0182-4632-ae15-82b4f5c1721f] retry: Retry in 2s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:19,742 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f97e31ef-541d-48f2-978f-9b0143417c9a] received
2025-06-14 22:45:19,770 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f97e31ef-541d-48f2-978f-9b0143417c9a] retry: Retry in 17s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:19,820 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 22:45:19,821 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:19,825 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[adec0935-3e84-4887-bef2-754676d05f0a] received
2025-06-14 22:45:19,835 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[adec0935-3e84-4887-bef2-754676d05f0a] retry: Retry in 16s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:21,677 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:21,678 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:21,685 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[fa6c61a1-0182-4632-ae15-82b4f5c1721f] received
2025-06-14 22:45:21,698 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[fa6c61a1-0182-4632-ae15-82b4f5c1721f] retry: Retry in 3s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:24,475 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:24,478 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:24,488 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[9aa823e3-668f-4e2d-af5e-41d9a03b542b] received
2025-06-14 22:45:24,510 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[9aa823e3-668f-4e2d-af5e-41d9a03b542b] retry: Retry in 13s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:24,598 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:24,600 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:24,613 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e39eb30-aca2-4068-9d22-261f151355b9] received
2025-06-14 22:45:24,633 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e39eb30-aca2-4068-9d22-261f151355b9] retry: Retry in 8s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 22:45:24,684 periodic_migration INFO     Running timeout consistency validation
2025-06-14 22:45:24,686 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:24,723 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[fa6c61a1-0182-4632-ae15-82b4f5c1721f] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 60, in validate_timeout_consistency
    .exclude(
     ~~~~~~~^
        escrowtimeout__is_executed=False, escrowtimeout__is_cancelled=False
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1484, in exclude
    return self._filter_or_exclude(True, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1499, in _filter_or_exclude_inplace
    self._query.add_q(~Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1491, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)
                                        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1303, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
                                ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 22:45:31,856 celery.redirected WARNING  Restoring 5 unacknowledged message(s)
2025-06-14 22:46:00,023 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:46:44,999 celery.beat  INFO     beat: Starting...
2025-06-14 22:46:45,398 django_celery_beat.schedulers INFO     DatabaseScheduler: Schedule changed.
2025-06-14 22:46:56,634 celery.worker.consumer.connection INFO     Connected to redis://localhost:6379//
2025-06-14 22:46:56,639 celery.worker.consumer.mingle INFO     mingle: searching for neighbors
2025-06-14 22:46:57,660 celery.worker.consumer.mingle INFO     mingle: all alone
2025-06-14 22:46:57,752 celery.apps.worker INFO     default_worker@3d4835f6a4f3 ready.
2025-06-14 22:47:00,021 celery.worker.control INFO     Events of group {task} enabled by remote.
2025-06-14 22:47:15,531 flower.command INFO     Visit me at http://0.0.0.0:5555
2025-06-14 22:47:15,590 flower.command INFO     Broker: redis://localhost:6379//
2025-06-14 22:47:15,609 flower.command INFO     Registered tasks: 
['apps.core.tasks.test_task',
 'apps.monitoring.tasks.periodic_performance_check',
 'apps.notifications.tasks.send_auto_transition_reminders',
 'apps.notifications.tasks.send_status_change_notification',
 'apps.products.product_brand.tasks.auto_generate_variants_for_new_brands',
 'apps.products.product_brand.tasks.bulk_update_brand_stats',
 'apps.products.product_brand.tasks.notify_brand_request_approved',
 'apps.products.product_brand.tasks.notify_brand_request_rejected',
 'apps.products.product_brand.tasks.sync_variant_data_with_parent',
 'apps.products.product_brand.tasks.update_brand_stats',
 'apps.products.product_image.tasks.upload_product_image_task',
 'apps.products.product_inventory.tasks.cleanup_old_inventory_transactions',
 'apps.products.product_inventory.tasks.generate_inventory_report',
 'apps.products.product_inventory.tasks.send_low_inventory_alert',
 'apps.products.product_rating.tasks.bulk_update_rating_aggregates_task',
 'apps.products.product_rating.tasks.debounced_rating_aggregate_update',
 'apps.products.product_rating.tasks.update_product_rating_aggregates_task',
 'apps.products.product_variant.tasks.bulk_create_product_variants_task',
 'apps.products.product_variant.tasks.create_product_variants_task',
 'apps.products.product_variant.tasks.generate_variant_combinations_task',
 'apps.products.product_variant.tasks.update_product_variant_cache_task',
 'apps.transactions.tasks.cleanup_tasks.check_stalled_transactions',
 'apps.transactions.tasks.cleanup_tasks.clean_old_completed_transactions',
 'apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues',
 'apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling',
 'apps.transactions.tasks.periodic_migration.generate_timeout_health_report',
 'apps.transactions.tasks.periodic_migration.validate_timeout_consistency',
 'apps.transactions.tasks.transitions_tasks.auto_refund_disputed_transaction',
 'apps.transactions.tasks.transitions_tasks.check_expired_transactions',
 'apps.transactions.tasks.transitions_tasks.cleanup_completed_timeouts',
 'apps.transactions.tasks.transitions_tasks.process_payment_received',
 'apps.transactions.tasks.transitions_tasks.schedule_auto_completion',
 'apps.transactions.tasks.transitions_tasks.schedule_auto_inspection',
 'apps.transactions.tasks.transitions_tasks.schedule_shipping_timeout',
 'celery.accumulate',
 'celery.backend_cleanup',
 'celery.chain',
 'celery.chord',
 'celery.chord_unlock',
 'celery.chunks',
 'celery.group',
 'celery.map',
 'celery.starmap']
2025-06-14 22:47:15,638 kombu.mixins INFO     Connected to redis://localhost:6379//
2025-06-14 22:48:00,076 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:50:00,056 celery.beat  INFO     Scheduler: Sending due task auto-fix-timeout-issues-dev (apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues)
2025-06-14 22:50:00,136 celery.beat  INFO     Scheduler: Sending due task validate-timeout-consistency-dev (apps.transactions.tasks.periodic_migration.validate_timeout_consistency)
2025-06-14 22:50:00,214 celery.beat  INFO     Scheduler: Sending due task check-expired-transactions-dev (apps.transactions.tasks.transitions_tasks.check_expired_transactions)
2025-06-14 22:50:00,263 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:52:00,065 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:54:00,075 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:55:00,064 celery.beat  INFO     Scheduler: Sending due task validate-timeout-consistency-dev (apps.transactions.tasks.periodic_migration.validate_timeout_consistency)
2025-06-14 22:55:00,147 celery.beat  INFO     Scheduler: Sending due task check-expired-transactions-dev (apps.transactions.tasks.transitions_tasks.check_expired_transactions)
2025-06-14 22:56:00,196 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 22:58:00,050 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 23:00:00,079 celery.beat  INFO     Scheduler: Sending due task generate-timeout-health-report-dev (apps.transactions.tasks.periodic_migration.generate_timeout_health_report)
2025-06-14 23:00:00,148 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 23:00:00,169 celery.beat  INFO     Scheduler: Sending due task validate-timeout-consistency-dev (apps.transactions.tasks.periodic_migration.validate_timeout_consistency)
2025-06-14 23:00:00,190 celery.beat  INFO     Scheduler: Sending due task check-expired-transactions-dev (apps.transactions.tasks.transitions_tasks.check_expired_transactions)
2025-06-14 23:00:00,208 celery.beat  INFO     Scheduler: Sending due task auto-fix-timeout-issues-dev (apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues)
2025-06-14 23:02:00,073 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 23:03:11,556 celery.worker.consumer.connection INFO     Connected to redis://localhost:6379//
2025-06-14 23:03:11,630 celery.worker.consumer.mingle INFO     mingle: searching for neighbors
2025-06-14 23:03:12,715 celery.worker.consumer.mingle INFO     mingle: all alone
2025-06-14 23:03:13,111 celery.apps.worker INFO     default_worker@3d4835f6a4f3 ready.
2025-06-14 23:03:13,148 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.generate_timeout_health_report[19187d99-d50e-4f57-aff8-733f8f6a4146] received
2025-06-14 23:03:13,169 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[1dc757df-909b-4423-9370-351cb85e6199] received
2025-06-14 23:03:13,183 periodic_migration INFO     Generating timeout system health report
2025-06-14 23:03:13,191 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e39eb30-aca2-4068-9d22-261f151355b9] received
2025-06-14 23:03:13,188 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 23:03:13,204 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[8e1bc94c-8579-40d1-b441-e803a5088124] received
2025-06-14 23:03:13,213 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:13,253 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:13,556 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 23:03:13,532 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e39eb30-aca2-4068-9d22-261f151355b9] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 60, in validate_timeout_consistency
    .exclude(
     ~~~~~~~^
        escrowtimeout__is_executed=False, escrowtimeout__is_cancelled=False
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1484, in exclude
    return self._filter_or_exclude(True, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1499, in _filter_or_exclude_inplace
    self._query.add_q(~Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1491, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)
                                        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1303, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
                                ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:13,678 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[9aa823e3-668f-4e2d-af5e-41d9a03b542b] received
2025-06-14 23:03:13,691 celery.worker.strategy INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[1057c975-8b69-4e66-a629-3cdc3df7978f] received
2025-06-14 23:03:13,695 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:13,709 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:13,759 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 23:03:13,787 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[1dc757df-909b-4423-9370-351cb85e6199] succeeded in 0.6032826099981321s: 'Periodic timeout scheduling completed'
2025-06-14 23:03:13,790 periodic_migration INFO     Timeout health report generated: {'timestamp': '2025-06-14T23:03:13.187084+00:00', 'active_timeouts': 0, 'executed_last_7_days': 0, 'cancelled_last_7_days': 0, 'upcoming_24h': 0, 'overdue': 0, 'timeout_breakdown': {'inspection_start': {'active': 0, 'executed_last_7_days': 0}, 'inspection_end': {'active': 0, 'executed_last_7_days': 0}, 'dispute_refund': {'active': 0, 'executed_last_7_days': 0}, 'shipping': {'active': 0, 'executed_last_7_days': 0}}, 'health_status': 'healthy'}
2025-06-14 23:03:13,831 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.generate_timeout_health_report[19187d99-d50e-4f57-aff8-733f8f6a4146] succeeded in 0.6542202490018099s: {'timestamp': '2025-06-14T23:03:13.187084+00:00', 'active_timeouts': 0, 'executed_last_7_days': 0, 'cancelled_last_7_days': 0, 'upcoming_24h': 0, 'overdue': 0, 'timeout_breakdown': {'inspection_start': {'active': 0, 'executed_last_7_days': 0}, 'inspection_end': {'active': 0, 'executed_last_7_days': 0}, 'dispute_refund': {'active': 0, 'executed_last_7_days': 0}, 'shipping': {'active': 0, 'executed_last_7_days': 0}}, 'health_status': 'healthy'}
2025-06-14 23:03:13,855 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[adec0935-3e84-4887-bef2-754676d05f0a] received
2025-06-14 23:03:13,829 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[9aa823e3-668f-4e2d-af5e-41d9a03b542b] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 60, in validate_timeout_consistency
    .exclude(
     ~~~~~~~^
        escrowtimeout__is_executed=False, escrowtimeout__is_cancelled=False
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1484, in exclude
    return self._filter_or_exclude(True, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1499, in _filter_or_exclude_inplace
    self._query.add_q(~Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1491, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)
                                        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1303, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
                                ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:13,866 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[35cf67e9-b5b1-4224-bffc-6149feab1230] received
2025-06-14 23:03:13,870 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 23:03:13,881 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:13,923 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 23:03:13,926 transition_tasks INFO     Processed 0 expired timeouts
2025-06-14 23:03:13,935 celery.app.trace INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[1057c975-8b69-4e66-a629-3cdc3df7978f] succeeded in 0.11980975700134877s: {'processed_count': 0, 'results': []}
2025-06-14 23:03:13,963 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f97e31ef-541d-48f2-978f-9b0143417c9a] received
2025-06-14 23:03:13,982 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[4840bfff-2728-4c8a-b197-829bd6154410] received
2025-06-14 23:03:13,987 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:13,989 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:13,997 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[adec0935-3e84-4887-bef2-754676d05f0a] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 131, in auto_fix_timeout_issues
    transactions_with_multiple_timeouts = EscrowTransaction.objects.annotate(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        active_timeout_count=Count(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        )
        ^
    ).filter(active_timeout_count__gt=1)
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^
        annotation,
        ^^^^^^^^^^^
        alias,
        ^^^^^^
        select=select,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 1073, in resolve_expression
    c.source_expressions[pos] = arg.resolve_expression(
                                ~~~~~~~~~~~~~~~~~~~~~~^
        query, allow_joins, reuse, summarize, for_save
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 2010, in resolve_ref
    join_info = self.setup_joins(
        field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1863, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
                                       ~~~~~~~~~~~~~~~~~~^
        names[:pivot],
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        fail_on_missing=True,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,044 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 23:03:14,061 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[8e1bc94c-8579-40d1-b441-e803a5088124] succeeded in 0.5077449169984902s: 'Periodic timeout scheduling completed'
2025-06-14 23:03:14,065 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 23:03:14,088 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e43394a-f126-4246-81d2-3f1934740b36] received
2025-06-14 23:03:14,082 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f97e31ef-541d-48f2-978f-9b0143417c9a] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 60, in validate_timeout_consistency
    .exclude(
     ~~~~~~~^
        escrowtimeout__is_executed=False, escrowtimeout__is_cancelled=False
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1484, in exclude
    return self._filter_or_exclude(True, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1499, in _filter_or_exclude_inplace
    self._query.add_q(~Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1491, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)
                                        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1303, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
                                ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,097 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[60f70570-21b3-4b2f-9e1f-2852826c41a5] received
2025-06-14 23:03:14,104 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:14,108 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,135 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 23:03:14,195 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[8e43394a-f126-4246-81d2-3f1934740b36] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 60, in validate_timeout_consistency
    .exclude(
     ~~~~~~~^
        escrowtimeout__is_executed=False, escrowtimeout__is_cancelled=False
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1484, in exclude
    return self._filter_or_exclude(True, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1499, in _filter_or_exclude_inplace
    self._query.add_q(~Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1491, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)
                                        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1303, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
                                ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,285 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 23:03:14,296 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[60f70570-21b3-4b2f-9e1f-2852826c41a5] succeeded in 0.16163103200233309s: 'Periodic timeout scheduling completed'
2025-06-14 23:03:14,306 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[b70d843d-16b6-4d34-b95e-5a335eb0a3e8] received
2025-06-14 23:03:14,309 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 23:03:14,315 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[35cf67e9-b5b1-4224-bffc-6149feab1230] succeeded in 0.3932964810010162s: 'Periodic timeout scheduling completed'
2025-06-14 23:03:14,323 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 23:03:14,331 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,336 celery.worker.strategy INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[d628a8f1-f6d5-4614-abb1-0f0140319d97] received
2025-06-14 23:03:14,352 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 23:03:14,351 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0dad69d8-7fb2-432c-a385-bcb1eeadc308] received
2025-06-14 23:03:14,359 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[4840bfff-2728-4c8a-b197-829bd6154410] succeeded in 0.2938592200007406s: 'Periodic timeout scheduling completed'
2025-06-14 23:03:14,357 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:14,364 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,389 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[3c8b0d0c-72ef-461f-85e7-d7a45ed8c5bd] received
2025-06-14 23:03:14,395 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 23:03:14,450 transition_tasks INFO     Processed 0 expired timeouts
2025-06-14 23:03:14,458 celery.app.trace INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[d628a8f1-f6d5-4614-abb1-0f0140319d97] succeeded in 0.11506704299972625s: {'processed_count': 0, 'results': []}
2025-06-14 23:03:14,470 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0dad69d8-7fb2-432c-a385-bcb1eeadc308] retry: Retry in 3s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:14,471 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[b70d843d-16b6-4d34-b95e-5a335eb0a3e8] retry: Retry in 2s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:14,475 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[5cc14c2c-20ef-4596-9361-7624fcc6bbf9] received
2025-06-14 23:03:14,489 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:14,492 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,500 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[68072a2f-0d3f-4e1d-bd76-973213cd7cd3] received
2025-06-14 23:03:14,514 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0cad57c5-3d11-4eb9-ba76-0eb62b42baec] received
2025-06-14 23:03:14,534 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 23:03:14,535 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:14,538 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,551 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[5cc14c2c-20ef-4596-9361-7624fcc6bbf9] retry: Retry in 1s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:14,577 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 23:03:14,585 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0cad57c5-3d11-4eb9-ba76-0eb62b42baec] retry: Retry in 3s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:14,589 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[3c8b0d0c-72ef-461f-85e7-d7a45ed8c5bd] succeeded in 0.19401848899724428s: 'Periodic timeout scheduling completed'
2025-06-14 23:03:14,591 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[a33aa330-bb5a-447d-afa2-cbe8f1325395] received
2025-06-14 23:03:14,604 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 23:03:14,616 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[3f33baac-9448-46ac-ba46-5d0e91f9101c] received
2025-06-14 23:03:14,625 celery.worker.strategy INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[a3fd8ffb-8f4d-4d72-b8fb-373e1c1b94bb] received
2025-06-14 23:03:14,629 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 23:03:14,632 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,676 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 23:03:14,683 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[68072a2f-0d3f-4e1d-bd76-973213cd7cd3] succeeded in 0.15824605200032238s: 'Periodic timeout scheduling completed'
2025-06-14 23:03:14,697 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[b70d843d-16b6-4d34-b95e-5a335eb0a3e8] received
2025-06-14 23:03:14,711 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[3f33baac-9448-46ac-ba46-5d0e91f9101c] retry: Retry in 0s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:14,713 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[01ba421e-0f1e-4e6d-80ce-cc6ce204dab0] received
2025-06-14 23:03:14,718 periodic_migration INFO     Running periodic timeout scheduling check (max_age_hours=1)
2025-06-14 23:03:14,743 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0dad69d8-7fb2-432c-a385-bcb1eeadc308] received
2025-06-14 23:03:14,759 transition_tasks INFO     Processed 0 expired timeouts
2025-06-14 23:03:14,764 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[5cc14c2c-20ef-4596-9361-7624fcc6bbf9] received
2025-06-14 23:03:14,772 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 23:03:14,772 celery.app.trace INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[a3fd8ffb-8f4d-4d72-b8fb-373e1c1b94bb] succeeded in 0.14326978199824225s: {'processed_count': 0, 'results': []}
2025-06-14 23:03:14,777 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0cad57c5-3d11-4eb9-ba76-0eb62b42baec] received
2025-06-14 23:03:14,784 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[a33aa330-bb5a-447d-afa2-cbe8f1325395] succeeded in 0.181112275000487s: 'Periodic timeout scheduling completed'
2025-06-14 23:03:14,787 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[3f33baac-9448-46ac-ba46-5d0e91f9101c] received
2025-06-14 23:03:14,796 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 23:03:14,802 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:14,865 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[3f33baac-9448-46ac-ba46-5d0e91f9101c] received
2025-06-14 23:03:14,877 periodic_migration INFO     Periodic timeout scheduling check completed successfully
2025-06-14 23:03:14,883 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[01ba421e-0f1e-4e6d-80ce-cc6ce204dab0] succeeded in 0.1654191819980042s: 'Periodic timeout scheduling completed'
2025-06-14 23:03:14,893 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[3f33baac-9448-46ac-ba46-5d0e91f9101c] retry: Retry in 7s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:15,500 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:15,502 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:15,513 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[5cc14c2c-20ef-4596-9361-7624fcc6bbf9] received
2025-06-14 23:03:15,530 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[5cc14c2c-20ef-4596-9361-7624fcc6bbf9] retry: Retry in 4s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:15,623 celery.worker.control INFO     Events of group {task} enabled by remote.
2025-06-14 23:03:16,351 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 23:03:16,354 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:16,369 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[b70d843d-16b6-4d34-b95e-5a335eb0a3e8] received
2025-06-14 23:03:16,421 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[b70d843d-16b6-4d34-b95e-5a335eb0a3e8] retry: Retry in 9s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:17,379 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:17,382 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:17,432 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0dad69d8-7fb2-432c-a385-bcb1eeadc308] received
2025-06-14 23:03:17,448 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0dad69d8-7fb2-432c-a385-bcb1eeadc308] retry: Retry in 2s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:17,548 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:17,558 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:17,582 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0cad57c5-3d11-4eb9-ba76-0eb62b42baec] received
2025-06-14 23:03:17,601 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:17,609 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:17,620 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0cad57c5-3d11-4eb9-ba76-0eb62b42baec] retry: Retry in 0s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:17,632 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0cad57c5-3d11-4eb9-ba76-0eb62b42baec] received
2025-06-14 23:03:17,690 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0cad57c5-3d11-4eb9-ba76-0eb62b42baec] retry: Retry in 6s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:19,395 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:19,397 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:19,406 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0dad69d8-7fb2-432c-a385-bcb1eeadc308] received
2025-06-14 23:03:19,419 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0dad69d8-7fb2-432c-a385-bcb1eeadc308] retry: Retry in 20s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:19,509 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:19,510 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:19,521 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[5cc14c2c-20ef-4596-9361-7624fcc6bbf9] received
2025-06-14 23:03:19,537 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[5cc14c2c-20ef-4596-9361-7624fcc6bbf9] retry: Retry in 7s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:21,820 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 23:03:21,825 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:21,855 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[3f33baac-9448-46ac-ba46-5d0e91f9101c] received
2025-06-14 23:03:21,881 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[3f33baac-9448-46ac-ba46-5d0e91f9101c] retry: Retry in 6s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:23,622 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:23,635 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:23,697 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[0cad57c5-3d11-4eb9-ba76-0eb62b42baec] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 60, in validate_timeout_consistency
    .exclude(
     ~~~~~~~^
        escrowtimeout__is_executed=False, escrowtimeout__is_cancelled=False
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1484, in exclude
    return self._filter_or_exclude(True, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1499, in _filter_or_exclude_inplace
    self._query.add_q(~Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1491, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)
                                        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1303, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
                                ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:25,373 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 23:03:25,380 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:25,478 celery.app.trace INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[b70d843d-16b6-4d34-b95e-5a335eb0a3e8] retry: Retry in 6s: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
2025-06-14 23:03:25,456 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[b70d843d-16b6-4d34-b95e-5a335eb0a3e8] received
2025-06-14 23:03:26,525 periodic_migration INFO     Running timeout consistency validation
2025-06-14 23:03:26,532 periodic_migration ERROR    Error in timeout consistency validation: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:26,616 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[5cc14c2c-20ef-4596-9361-7624fcc6bbf9] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 60, in validate_timeout_consistency
    .exclude(
     ~~~~~~~^
        escrowtimeout__is_executed=False, escrowtimeout__is_cancelled=False
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1484, in exclude
    return self._filter_or_exclude(True, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1494, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1499, in _filter_or_exclude_inplace
    self._query.add_q(~Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1609, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1641, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1491, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)
                                        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1303, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
                                ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:27,853 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 23:03:27,877 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:28,039 celery.app.trace ERROR    Task apps.transactions.tasks.periodic_migration.auto_fix_timeout_issues[3f33baac-9448-46ac-ba46-5d0e91f9101c] raised unexpected: FieldError("Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at")
Traceback (most recent call last):
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
                 ~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
           ~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 60, in run
    ret = task.retry(exc=exc, **retry_kwargs)
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/task.py", line 736, in retry
    raise_with_context(exc)
    ~~~~~~~~~~~~~~~~~~^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/celery/app/autoretry.py", line 38, in run
    return task._orig_run(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/apps/transactions/tasks/periodic_migration.py", line 131, in auto_fix_timeout_issues
    transactions_with_multiple_timeouts = EscrowTransaction.objects.annotate(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        active_timeout_count=Count(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        )
        ^
    ).filter(active_timeout_count__gt=1)
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1630, in annotate
    return self._annotate(args, kwargs, select=True)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1680, in _annotate
    clone.query.add_annotation(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^
        annotation,
        ^^^^^^^^^^^
        alias,
        ^^^^^^
        select=select,
        ^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1194, in add_annotation
    annotation = annotation.resolve_expression(self, allow_joins=True, reuse=None)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/aggregates.py", line 63, in resolve_expression
    c = super().resolve_expression(query, allow_joins, reuse, summarize)
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 1073, in resolve_expression
    c.source_expressions[pos] = arg.resolve_expression(
                                ~~~~~~~~~~~~~~~~~~~~~~^
        query, allow_joins, reuse, summarize, for_save
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/expressions.py", line 895, in resolve_expression
    return query.resolve_ref(self.name, allow_joins, reuse, summarize)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 2010, in resolve_ref
    join_info = self.setup_joins(
        field_list, self.get_meta(), self.get_initial_alias(), can_reuse=reuse
    )
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1863, in setup_joins
    path, final_field, targets, rest = self.names_to_path(
                                       ~~~~~~~~~~~~~~~~~~^
        names[:pivot],
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        fail_on_missing=True,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/workspaces/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1768, in names_to_path
    raise FieldError(
    ...<2 lines>...
    )
django.core.exceptions.FieldError: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:03:31,390 periodic_migration INFO     Running automatic timeout issue fixes
2025-06-14 23:03:31,400 periodic_migration ERROR    Error in automatic timeout issue fixes: Cannot resolve keyword 'escrowtimeout' into field. Choices are: amount, auto_transition_type, buyer, buyer_id, created_at, currency, dispute, history, id, inspection_end_date, inspection_period_days, is_auto_transition_scheduled, negotiations, next_auto_transition_at, notes, price_by_negotiation, product, product_id, rating, seller, seller_id, shipping_address, shipping_carrier, status, status_changed_at, timeouts, tracking_id, tracking_number, updated_at
2025-06-14 23:04:00,058 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 23:04:00,067 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[28ffa43d-f518-4e96-b6f8-dc3f8cf1817c] received
2025-06-14 23:05:00,044 celery.beat  INFO     Scheduler: Sending due task validate-timeout-consistency-dev (apps.transactions.tasks.periodic_migration.validate_timeout_consistency)
2025-06-14 23:05:00,058 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f0625665-cfa8-4043-8dd8-9a788c6244d8] received
2025-06-14 23:05:00,092 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f0625665-cfa8-4043-8dd8-9a788c6244d8] received
2025-06-14 23:05:00,140 celery.beat  INFO     Scheduler: Sending due task check-expired-transactions-dev (apps.transactions.tasks.transitions_tasks.check_expired_transactions)
2025-06-14 23:05:00,159 celery.worker.strategy INFO     Task apps.transactions.tasks.transitions_tasks.check_expired_transactions[cbfc9c2e-3f2b-4eda-8dff-9178482ffc95] received
2025-06-14 23:05:02,095 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f0625665-cfa8-4043-8dd8-9a788c6244d8] received
2025-06-14 23:05:06,089 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.validate_timeout_consistency[f0625665-cfa8-4043-8dd8-9a788c6244d8] received
2025-06-14 23:06:00,025 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
2025-06-14 23:06:00,036 celery.worker.strategy INFO     Task apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling[9ce40f9b-711c-4313-96b4-9d9fa3f04651] received
2025-06-14 23:08:00,055 celery.beat  INFO     Scheduler: Sending due task ensure-timeout-scheduling-dev (apps.transactions.tasks.periodic_migration.ensure_timeout_scheduling)
